var Ra = Object.defineProperty;
var Fr = (n) => {
  throw TypeError(n);
};
var Da = (n, e, t) => e in n ? Ra(n, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : n[e] = t;
var _ = (n, e, t) => Da(n, typeof e != "symbol" ? e + "" : e, t), qn = (n, e, t) => e.has(n) || Fr("Cannot " + t);
var u = (n, e, t) => (qn(n, e, "read from private field"), t ? t.call(n) : e.get(n)), T = (n, e, t) => e.has(n) ? Fr("Cannot add the same private member more than once") : e instanceof WeakSet ? e.add(n) : e.set(n, t), y = (n, e, t, r) => (qn(n, e, "write to private field"), r ? r.call(n, t) : e.set(n, t), t), $ = (n, e, t) => (qn(n, e, "access private method"), t);
const tr = {
  version: "0.0.14"
};
function Ms(n) {
  const e = atob(n), t = e.length, r = new Uint8Array(t);
  for (let s = 0; s < t; s++)
    r[s] = e.charCodeAt(s);
  return r.buffer;
}
function Zs(n) {
  const e = String.fromCharCode(...new Uint8Array(n));
  return btoa(e);
}
function $s(n) {
  if (typeof n > "u" || n === null || typeof n != "object" || !("type" in n) || typeof n.type != "string" || !n.type || n.type !== "message" || !("content" in n) || !Array.isArray(n.content) || n.content.length < 1)
    return;
  const e = n.content[n.content.length - 1];
  if (!(!("type" in e) || typeof e.type != "string")) {
    if (e.type === "text")
      return typeof e.text == "string" ? e.text : void 0;
    if (e.type === "audio")
      return typeof e.transcript == "string" ? e.transcript : void 0;
  }
}
function Pa(n, e) {
  const t = n.filter((a) => !e.some((i) => i.itemId === a.itemId)), r = e.filter((a) => !n.some((i) => i.itemId === a.itemId)), s = e.filter((a) => n.some((i) => i.itemId === a.itemId && JSON.stringify(i) !== JSON.stringify(a)));
  return {
    removals: t,
    additions: r,
    updates: s
  };
}
function ja() {
  return typeof window > "u" ? !1 : typeof window.RTCPeerConnection < "u";
}
function Ur(n) {
  return n.role === "system" ? n : n.role === "assistant" ? {
    ...n,
    content: n.content.map((e) => e.type === "audio" ? {
      ...e,
      audio: null
    } : e)
  } : n.role === "user" ? {
    ...n,
    content: n.content.map((e) => e.type === "input_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n;
}
function Jr(n, e, t) {
  if (e.type === "conversation.item.input_audio_transcription.completed")
    return n.map((a) => {
      if (a.itemId === e.item_id && a.type === "message" && "role" in a && a.role === "user") {
        const i = a.content.map((o) => o.type === "input_audio" ? {
          ...o,
          transcript: e.transcript
        } : o);
        return {
          ...a,
          content: i,
          status: "completed"
        };
      }
      return a;
    });
  const r = !t && e.type === "message" ? Ur(e) : e, s = n.findIndex((a) => a.itemId === e.itemId);
  if (s !== -1)
    return n.map((a, i) => i === s ? r : !t && a.type === "message" ? Ur(a) : a);
  if (e.previousItemId) {
    const a = n.findIndex((i) => i.itemId === e.previousItemId);
    return a !== -1 ? [
      ...n.slice(0, a + 1),
      r,
      ...n.slice(a + 1)
    ] : [...n, r];
  } else
    return [...n, r];
}
const Ma = {
  "User-Agent": `Agents/JavaScript ${tr.version}`,
  "X-OpenAI-Agents-SDK": `openai-agents-sdk.${tr.version}`
}, Za = `openai-agents-sdk.${tr.version}`;
async function xr(n) {
  try {
    return [null, await n()];
  } catch (e) {
    return [e, null];
  }
}
function $a(n, e) {
  const t = { ...n };
  return Object.defineProperties(t, {
    $brand: {
      value: "auto-parseable-response-format",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    }
  }), t;
}
const La = Symbol("Let zodToJsonSchema decide on which parser to use"), Br = {
  name: void 0,
  $refStrategy: "root",
  effectStrategy: "input",
  pipeStrategy: "all",
  dateStrategy: "format:date-time",
  mapStrategy: "entries",
  nullableStrategy: "from-target",
  removeAdditionalStrategy: "passthrough",
  definitionPath: "definitions",
  target: "jsonSchema7",
  strictUnions: !1,
  errorMessages: !1,
  markdownDescription: !1,
  patternStrategy: "escape",
  applyRegexFlags: !1,
  emailStrategy: "format:email",
  base64Strategy: "contentEncoding:base64",
  nameStrategy: "ref"
}, Fa = (n) => typeof n == "string" ? {
  ...Br,
  basePath: ["#"],
  definitions: {},
  name: n
} : {
  ...Br,
  basePath: ["#"],
  definitions: {},
  ...n
}, nr = (n) => "_def" in n ? n._def : n;
function Ua(n) {
  if (!n)
    return !0;
  for (const e in n)
    return !1;
  return !0;
}
const Ja = (n) => {
  const e = Fa(n), t = e.name !== void 0 ? [...e.basePath, e.definitionPath, e.name] : e.basePath;
  return {
    ...e,
    currentPath: t,
    propertyPath: void 0,
    seenRefs: /* @__PURE__ */ new Set(),
    seen: new Map(Object.entries(e.definitions).map(([r, s]) => [
      nr(s),
      {
        def: nr(s),
        path: [...e.basePath, e.definitionPath, r],
        // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
        jsonSchema: void 0
      }
    ]))
  };
};
function Ls(n, e, t, r) {
  r != null && r.errorMessages && t && (n.errorMessage = {
    ...n.errorMessage,
    [e]: t
  });
}
function q(n, e, t, r, s) {
  n[e] = t, Ls(n, e, r, s);
}
var Mt;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const a = {};
    for (const i of s)
      a[i] = i;
    return a;
  }, n.getValidEnumValues = (s) => {
    const a = n.objectKeys(s).filter((o) => typeof s[s[o]] != "number"), i = {};
    for (const o of a)
      i[o] = s[o];
    return n.objectValues(i);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(a) {
    return s[a];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const a = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && a.push(i);
    return a;
  }, n.find = (s, a) => {
    for (const i of s)
      if (a(i))
        return i;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, a = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(a);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, a) => typeof a == "bigint" ? a.toString() : a;
})(Mt || (Mt = {}));
var qr;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(qr || (qr = {}));
Mt.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]);
Mt.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
let Gr = class Fs extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(a) {
      return a.message;
    }, r = { _errors: [] }, s = (a) => {
      for (const i of a.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(t(i));
        else {
          let o = r, d = 0;
          for (; d < i.path.length; ) {
            const c = i.path[d];
            d === i.path.length - 1 ? (o[c] = o[c] || { _errors: [] }, o[c]._errors.push(t(i))) : o[c] = o[c] || { _errors: [] }, o = o[c], d++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof Fs))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, Mt.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      s.path.length > 0 ? (t[s.path[0]] = t[s.path[0]] || [], t[s.path[0]].push(e(s))) : r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
};
Gr.create = (n) => new Gr(n);
var Vr;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})(Vr || (Vr = {}));
var P;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(P || (P = {}));
function Ba() {
  return {};
}
function qa(n, e) {
  var r, s;
  const t = {
    type: "array"
  };
  return ((s = (r = n.type) == null ? void 0 : r._def) == null ? void 0 : s.typeName) !== P.ZodAny && (t.items = J(n.type._def, {
    ...e,
    currentPath: [...e.currentPath, "items"]
  })), n.minLength && q(t, "minItems", n.minLength.value, n.minLength.message, e), n.maxLength && q(t, "maxItems", n.maxLength.value, n.maxLength.message, e), n.exactLength && (q(t, "minItems", n.exactLength.value, n.exactLength.message, e), q(t, "maxItems", n.exactLength.value, n.exactLength.message, e)), t;
}
function Ga(n, e) {
  const t = {
    type: "integer",
    format: "int64"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "minimum", r.value, r.message, e) : q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "maximum", r.value, r.message, e) : q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function Va() {
  return {
    type: "boolean"
  };
}
function za(n, e) {
  return J(n.type._def, e);
}
const Ha = (n, e) => J(n.innerType._def, e);
function Us(n, e, t) {
  const r = t ?? e.dateStrategy;
  if (Array.isArray(r))
    return {
      anyOf: r.map((s, a) => Us(n, e, s))
    };
  switch (r) {
    case "string":
    case "format:date-time":
      return {
        type: "string",
        format: "date-time"
      };
    case "format:date":
      return {
        type: "string",
        format: "date"
      };
    case "integer":
      return Wa(n, e);
  }
}
const Wa = (n, e) => {
  const t = {
    type: "integer",
    format: "unix-time"
  };
  if (e.target === "openApi3")
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        q(
          t,
          "minimum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
      case "max":
        q(
          t,
          "maximum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
    }
  return t;
};
function Ya(n, e) {
  return {
    ...J(n.innerType._def, e),
    default: n.defaultValue()
  };
}
function Xa(n, e, t) {
  return e.effectStrategy === "input" ? J(n.schema._def, e, t) : {};
}
function Qa(n) {
  return {
    type: "string",
    enum: [...n.values]
  };
}
const Ka = (n) => "type" in n && n.type === "string" ? !1 : "allOf" in n;
function ei(n, e) {
  const t = [
    J(n.left._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "0"]
    }),
    J(n.right._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "1"]
    })
  ].filter((a) => !!a);
  let r = e.target === "jsonSchema2019-09" ? { unevaluatedProperties: !1 } : void 0;
  const s = [];
  return t.forEach((a) => {
    if (Ka(a))
      s.push(...a.allOf), a.unevaluatedProperties === void 0 && (r = void 0);
    else {
      let i = a;
      if ("additionalProperties" in a && a.additionalProperties === !1) {
        const { additionalProperties: o, ...d } = a;
        i = d;
      } else
        r = void 0;
      s.push(i);
    }
  }), s.length ? {
    allOf: s,
    ...r
  } : void 0;
}
function ti(n, e) {
  const t = typeof n.value;
  return t !== "bigint" && t !== "number" && t !== "boolean" && t !== "string" ? {
    type: Array.isArray(n.value) ? "array" : "object"
  } : e.target === "openApi3" ? {
    type: t === "bigint" ? "integer" : t,
    enum: [n.value]
  } : {
    type: t === "bigint" ? "integer" : t,
    const: n.value
  };
}
let Gn;
const Ge = {
  /**
   * `c` was changed to `[cC]` to replicate /i flag
   */
  cuid: /^[cC][^\s-]{8,}$/,
  cuid2: /^[0-9a-z]+$/,
  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,
  /**
   * `a-z` was added to replicate /i flag
   */
  email: /^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,
  /**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */
  emoji: () => (Gn === void 0 && (Gn = RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$", "u")), Gn),
  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,
  nanoid: /^[a-zA-Z0-9_-]{21}$/
};
function Js(n, e) {
  const t = {
    type: "string"
  };
  function r(s) {
    return e.patternStrategy === "escape" ? ni(s) : s;
  }
  if (n.checks)
    for (const s of n.checks)
      switch (s.kind) {
        case "min":
          q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e);
          break;
        case "max":
          q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "email":
          switch (e.emailStrategy) {
            case "format:email":
              me(t, "email", s.message, e);
              break;
            case "format:idn-email":
              me(t, "idn-email", s.message, e);
              break;
            case "pattern:zod":
              ge(t, Ge.email, s.message, e);
              break;
          }
          break;
        case "url":
          me(t, "uri", s.message, e);
          break;
        case "uuid":
          me(t, "uuid", s.message, e);
          break;
        case "regex":
          ge(t, s.regex, s.message, e);
          break;
        case "cuid":
          ge(t, Ge.cuid, s.message, e);
          break;
        case "cuid2":
          ge(t, Ge.cuid2, s.message, e);
          break;
        case "startsWith":
          ge(t, RegExp(`^${r(s.value)}`), s.message, e);
          break;
        case "endsWith":
          ge(t, RegExp(`${r(s.value)}$`), s.message, e);
          break;
        case "datetime":
          me(t, "date-time", s.message, e);
          break;
        case "date":
          me(t, "date", s.message, e);
          break;
        case "time":
          me(t, "time", s.message, e);
          break;
        case "duration":
          me(t, "duration", s.message, e);
          break;
        case "length":
          q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e), q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "includes": {
          ge(t, RegExp(r(s.value)), s.message, e);
          break;
        }
        case "ip": {
          s.version !== "v6" && me(t, "ipv4", s.message, e), s.version !== "v4" && me(t, "ipv6", s.message, e);
          break;
        }
        case "emoji":
          ge(t, Ge.emoji, s.message, e);
          break;
        case "ulid": {
          ge(t, Ge.ulid, s.message, e);
          break;
        }
        case "base64": {
          switch (e.base64Strategy) {
            case "format:binary": {
              me(t, "binary", s.message, e);
              break;
            }
            case "contentEncoding:base64": {
              q(t, "contentEncoding", "base64", s.message, e);
              break;
            }
            case "pattern:zod": {
              ge(t, Ge.base64, s.message, e);
              break;
            }
          }
          break;
        }
        case "nanoid":
          ge(t, Ge.nanoid, s.message, e);
      }
  return t;
}
const ni = (n) => Array.from(n).map((e) => /[a-zA-Z0-9]/.test(e) ? e : `\\${e}`).join(""), me = (n, e, t, r) => {
  var s;
  n.format || (s = n.anyOf) != null && s.some((a) => a.format) ? (n.anyOf || (n.anyOf = []), n.format && (n.anyOf.push({
    format: n.format,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { format: n.errorMessage.format }
    }
  }), delete n.format, n.errorMessage && (delete n.errorMessage.format, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.anyOf.push({
    format: e,
    ...t && r.errorMessages && { errorMessage: { format: t } }
  })) : q(n, "format", e, t, r);
}, ge = (n, e, t, r) => {
  var s;
  n.pattern || (s = n.allOf) != null && s.some((a) => a.pattern) ? (n.allOf || (n.allOf = []), n.pattern && (n.allOf.push({
    pattern: n.pattern,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { pattern: n.errorMessage.pattern }
    }
  }), delete n.pattern, n.errorMessage && (delete n.errorMessage.pattern, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.allOf.push({
    pattern: zr(e, r),
    ...t && r.errorMessages && { errorMessage: { pattern: t } }
  })) : q(n, "pattern", zr(e, r), t, r);
}, zr = (n, e) => {
  var c;
  const t = typeof n == "function" ? n() : n;
  if (!e.applyRegexFlags || !t.flags)
    return t.source;
  const r = {
    i: t.flags.includes("i"),
    // Case-insensitive
    m: t.flags.includes("m"),
    // `^` and `$` matches adjacent to newline characters
    s: t.flags.includes("s")
    // `.` matches newlines
  }, s = r.i ? t.source.toLowerCase() : t.source;
  let a = "", i = !1, o = !1, d = !1;
  for (let p = 0; p < s.length; p++) {
    if (i) {
      a += s[p], i = !1;
      continue;
    }
    if (r.i) {
      if (o) {
        if (s[p].match(/[a-z]/)) {
          d ? (a += s[p], a += `${s[p - 2]}-${s[p]}`.toUpperCase(), d = !1) : s[p + 1] === "-" && ((c = s[p + 2]) != null && c.match(/[a-z]/)) ? (a += s[p], d = !0) : a += `${s[p]}${s[p].toUpperCase()}`;
          continue;
        }
      } else if (s[p].match(/[a-z]/)) {
        a += `[${s[p]}${s[p].toUpperCase()}]`;
        continue;
      }
    }
    if (r.m) {
      if (s[p] === "^") {
        a += `(^|(?<=[\r
]))`;
        continue;
      } else if (s[p] === "$") {
        a += `($|(?=[\r
]))`;
        continue;
      }
    }
    if (r.s && s[p] === ".") {
      a += o ? `${s[p]}\r
` : `[${s[p]}\r
]`;
      continue;
    }
    a += s[p], s[p] === "\\" ? i = !0 : o && s[p] === "]" ? o = !1 : !o && s[p] === "[" && (o = !0);
  }
  try {
    const p = new RegExp(a);
  } catch {
    return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`), t.source;
  }
  return a;
};
function Bs(n, e) {
  var r, s, a, i;
  if (e.target === "openApi3" && ((r = n.keyType) == null ? void 0 : r._def.typeName) === P.ZodEnum)
    return {
      type: "object",
      required: n.keyType._def.values,
      properties: n.keyType._def.values.reduce((o, d) => ({
        ...o,
        [d]: J(n.valueType._def, {
          ...e,
          currentPath: [...e.currentPath, "properties", d]
        }) ?? {}
      }), {}),
      additionalProperties: !1
    };
  const t = {
    type: "object",
    additionalProperties: J(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalProperties"]
    }) ?? {}
  };
  if (e.target === "openApi3")
    return t;
  if (((s = n.keyType) == null ? void 0 : s._def.typeName) === P.ZodString && ((a = n.keyType._def.checks) != null && a.length)) {
    const o = Object.entries(Js(n.keyType._def, e)).reduce((d, [c, p]) => c === "type" ? d : { ...d, [c]: p }, {});
    return {
      ...t,
      propertyNames: o
    };
  } else if (((i = n.keyType) == null ? void 0 : i._def.typeName) === P.ZodEnum)
    return {
      ...t,
      propertyNames: {
        enum: n.keyType._def.values
      }
    };
  return t;
}
function ri(n, e) {
  if (e.mapStrategy === "record")
    return Bs(n, e);
  const t = J(n.keyType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "0"]
  }) || {}, r = J(n.valueType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "1"]
  }) || {};
  return {
    type: "array",
    maxItems: 125,
    items: {
      type: "array",
      items: [t, r],
      minItems: 2,
      maxItems: 2
    }
  };
}
function si(n) {
  const e = n.values, r = Object.keys(n.values).filter((a) => typeof e[e[a]] != "number").map((a) => e[a]), s = Array.from(new Set(r.map((a) => typeof a)));
  return {
    type: s.length === 1 ? s[0] === "string" ? "string" : "number" : ["string", "number"],
    enum: r
  };
}
function ai() {
  return {
    not: {}
  };
}
function ii(n) {
  return n.target === "openApi3" ? {
    enum: ["null"],
    nullable: !0
  } : {
    type: "null"
  };
}
const wn = {
  ZodString: "string",
  ZodNumber: "number",
  ZodBigInt: "integer",
  ZodBoolean: "boolean",
  ZodNull: "null"
};
function oi(n, e) {
  if (e.target === "openApi3")
    return Hr(n, e);
  const t = n.options instanceof Map ? Array.from(n.options.values()) : n.options;
  if (t.every((r) => r._def.typeName in wn && (!r._def.checks || !r._def.checks.length))) {
    const r = t.reduce((s, a) => {
      const i = wn[a._def.typeName];
      return i && !s.includes(i) ? [...s, i] : s;
    }, []);
    return {
      type: r.length > 1 ? r : r[0]
    };
  } else if (t.every((r) => r._def.typeName === "ZodLiteral" && !r.description)) {
    const r = t.reduce((s, a) => {
      const i = typeof a._def.value;
      switch (i) {
        case "string":
        case "number":
        case "boolean":
          return [...s, i];
        case "bigint":
          return [...s, "integer"];
        case "object":
          if (a._def.value === null)
            return [...s, "null"];
        case "symbol":
        case "undefined":
        case "function":
        default:
          return s;
      }
    }, []);
    if (r.length === t.length) {
      const s = r.filter((a, i, o) => o.indexOf(a) === i);
      return {
        type: s.length > 1 ? s : s[0],
        enum: t.reduce((a, i) => a.includes(i._def.value) ? a : [...a, i._def.value], [])
      };
    }
  } else if (t.every((r) => r._def.typeName === "ZodEnum"))
    return {
      type: "string",
      enum: t.reduce((r, s) => [...r, ...s._def.values.filter((a) => !r.includes(a))], [])
    };
  return Hr(n, e);
}
const Hr = (n, e) => {
  const t = (n.options instanceof Map ? Array.from(n.options.values()) : n.options).map((r, s) => J(r._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", `${s}`]
  })).filter((r) => !!r && (!e.strictUnions || typeof r == "object" && Object.keys(r).length > 0));
  return t.length ? { anyOf: t } : void 0;
};
function ui(n, e) {
  if (["ZodString", "ZodNumber", "ZodBigInt", "ZodBoolean", "ZodNull"].includes(n.innerType._def.typeName) && (!n.innerType._def.checks || !n.innerType._def.checks.length))
    return e.target === "openApi3" || e.nullableStrategy === "property" ? {
      type: wn[n.innerType._def.typeName],
      nullable: !0
    } : {
      type: [wn[n.innerType._def.typeName], "null"]
    };
  if (e.target === "openApi3") {
    const r = J(n.innerType._def, {
      ...e,
      currentPath: [...e.currentPath]
    });
    return r && "$ref" in r ? { allOf: [r], nullable: !0 } : r && { ...r, nullable: !0 };
  }
  const t = J(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "0"]
  });
  return t && { anyOf: [t, { type: "null" }] };
}
function ci(n, e) {
  const t = {
    type: "number"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "int":
        t.type = "integer", Ls(t, "type", r.message, e);
        break;
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "minimum", r.value, r.message, e) : q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "maximum", r.value, r.message, e) : q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function di(n, e) {
  return e.removeAdditionalStrategy === "strict" ? n.catchall._def.typeName === "ZodNever" ? n.unknownKeys !== "strict" : J(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0 : n.catchall._def.typeName === "ZodNever" ? n.unknownKeys === "passthrough" : J(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0;
}
function li(n, e) {
  const t = {
    type: "object",
    ...Object.entries(n.shape()).reduce((r, [s, a]) => {
      var d;
      if (a === void 0 || a._def === void 0)
        return r;
      const i = [...e.currentPath, "properties", s], o = J(a._def, {
        ...e,
        currentPath: i,
        propertyPath: i
      });
      if (o === void 0)
        return r;
      if (e.openaiStrictMode && a.isOptional() && !a.isNullable() && typeof ((d = a._def) == null ? void 0 : d.defaultValue) > "u")
        throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
      return {
        properties: {
          ...r.properties,
          [s]: o
        },
        required: a.isOptional() && !e.openaiStrictMode ? r.required : [...r.required, s]
      };
    }, { properties: {}, required: [] }),
    additionalProperties: di(n, e)
  };
  return t.required.length || delete t.required, t;
}
const pi = (n, e) => {
  var r;
  if (e.currentPath.toString() === ((r = e.propertyPath) == null ? void 0 : r.toString()))
    return J(n.innerType._def, e);
  const t = J(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "1"]
  });
  return t ? {
    anyOf: [
      {
        not: {}
      },
      t
    ]
  } : {};
}, fi = (n, e) => {
  if (e.pipeStrategy === "input")
    return J(n.in._def, e);
  if (e.pipeStrategy === "output")
    return J(n.out._def, e);
  const t = J(n.in._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", "0"]
  }), r = J(n.out._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", t ? "1" : "0"]
  });
  return {
    allOf: [t, r].filter((s) => s !== void 0)
  };
};
function hi(n, e) {
  return J(n.type._def, e);
}
function mi(n, e) {
  const r = {
    type: "array",
    uniqueItems: !0,
    items: J(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "items"]
    })
  };
  return n.minSize && q(r, "minItems", n.minSize.value, n.minSize.message, e), n.maxSize && q(r, "maxItems", n.maxSize.value, n.maxSize.message, e), r;
}
function gi(n, e) {
  return n.rest ? {
    type: "array",
    minItems: n.items.length,
    items: n.items.map((t, r) => J(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], []),
    additionalItems: J(n.rest._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalItems"]
    })
  } : {
    type: "array",
    minItems: n.items.length,
    maxItems: n.items.length,
    items: n.items.map((t, r) => J(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], [])
  };
}
function _i() {
  return {
    not: {}
  };
}
function yi() {
  return {};
}
const vi = (n, e) => J(n.innerType._def, e);
function J(n, e, t = !1) {
  var i;
  const r = e.seen.get(n);
  if (e.override) {
    const o = (i = e.override) == null ? void 0 : i.call(e, n, e, r, t);
    if (o !== La)
      return o;
  }
  if (r && !t) {
    const o = wi(r, e);
    if (o !== void 0)
      return "$ref" in o && e.seenRefs.add(o.$ref), o;
  }
  const s = { def: n, path: e.currentPath, jsonSchema: void 0 };
  e.seen.set(n, s);
  const a = xi(n, n.typeName, e, t);
  return a && Si(n, e, a), s.jsonSchema = a, a;
}
const wi = (n, e) => {
  switch (e.$refStrategy) {
    case "root":
      return { $ref: n.path.join("/") };
    // this case is needed as OpenAI strict mode doesn't support top-level `$ref`s, i.e.
    // the top-level schema *must* be `{"type": "object", "properties": {...}}` but if we ever
    // need to define a `$ref`, relative `$ref`s aren't supported, so we need to extract
    // the schema to `#/definitions/` and reference that.
    //
    // e.g. if we need to reference a schema at
    // `["#","definitions","contactPerson","properties","person1","properties","name"]`
    // then we'll extract it out to `contactPerson_properties_person1_properties_name`
    case "extract-to-root":
      const t = n.path.slice(e.basePath.length + 1).join("_");
      return t !== e.name && e.nameStrategy === "duplicate-ref" && (e.definitions[t] = n.def), { $ref: [...e.basePath, e.definitionPath, t].join("/") };
    case "relative":
      return { $ref: bi(e.currentPath, n.path) };
    case "none":
    case "seen":
      return n.path.length < e.currentPath.length && n.path.every((r, s) => e.currentPath[s] === r) ? (console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`), {}) : e.$refStrategy === "seen" ? {} : void 0;
  }
}, bi = (n, e) => {
  let t = 0;
  for (; t < n.length && t < e.length && n[t] === e[t]; t++)
    ;
  return [(n.length - t).toString(), ...e.slice(t)].join("/");
}, xi = (n, e, t, r) => {
  switch (e) {
    case P.ZodString:
      return Js(n, t);
    case P.ZodNumber:
      return ci(n, t);
    case P.ZodObject:
      return li(n, t);
    case P.ZodBigInt:
      return Ga(n, t);
    case P.ZodBoolean:
      return Va();
    case P.ZodDate:
      return Us(n, t);
    case P.ZodUndefined:
      return _i();
    case P.ZodNull:
      return ii(t);
    case P.ZodArray:
      return qa(n, t);
    case P.ZodUnion:
    case P.ZodDiscriminatedUnion:
      return oi(n, t);
    case P.ZodIntersection:
      return ei(n, t);
    case P.ZodTuple:
      return gi(n, t);
    case P.ZodRecord:
      return Bs(n, t);
    case P.ZodLiteral:
      return ti(n, t);
    case P.ZodEnum:
      return Qa(n);
    case P.ZodNativeEnum:
      return si(n);
    case P.ZodNullable:
      return ui(n, t);
    case P.ZodOptional:
      return pi(n, t);
    case P.ZodMap:
      return ri(n, t);
    case P.ZodSet:
      return mi(n, t);
    case P.ZodLazy:
      return J(n.getter()._def, t);
    case P.ZodPromise:
      return hi(n, t);
    case P.ZodNaN:
    case P.ZodNever:
      return ai();
    case P.ZodEffects:
      return Xa(n, t, r);
    case P.ZodAny:
      return Ba();
    case P.ZodUnknown:
      return yi();
    case P.ZodDefault:
      return Ya(n, t);
    case P.ZodBranded:
      return za(n, t);
    case P.ZodReadonly:
      return vi(n, t);
    case P.ZodCatch:
      return Ha(n, t);
    case P.ZodPipeline:
      return fi(n, t);
    case P.ZodFunction:
    case P.ZodVoid:
    case P.ZodSymbol:
      return;
    default:
      return /* @__PURE__ */ ((s) => {
      })();
  }
}, Si = (n, e, t) => (n.description && (t.description = n.description, e.markdownDescription && (t.markdownDescription = n.description)), t), Ti = (n, e) => {
  const t = Ja(e), r = typeof e == "string" ? e : (e == null ? void 0 : e.nameStrategy) === "title" || e == null ? void 0 : e.name, s = J(n._def, r === void 0 ? t : {
    ...t,
    currentPath: [...t.basePath, t.definitionPath, r]
  }, !1) ?? {}, a = typeof e == "object" && e.name !== void 0 && e.nameStrategy === "title" ? e.name : void 0;
  a !== void 0 && (s.title = a);
  const i = (() => {
    if (Ua(t.definitions))
      return;
    const d = {}, c = /* @__PURE__ */ new Set();
    for (let p = 0; p < 500; p++) {
      const f = Object.entries(t.definitions).filter(([h]) => !c.has(h));
      if (f.length === 0)
        break;
      for (const [h, x] of f)
        d[h] = J(nr(x), { ...t, currentPath: [...t.basePath, t.definitionPath, h] }, !0) ?? {}, c.add(h);
    }
    return d;
  })(), o = r === void 0 ? i ? {
    ...s,
    [t.definitionPath]: i
  } : s : t.nameStrategy === "duplicate-ref" ? {
    ...s,
    ...i || t.seenRefs.size ? {
      [t.definitionPath]: {
        ...i,
        // only actually duplicate the schema definition if it was ever referenced
        // otherwise the duplication is completely pointless
        ...t.seenRefs.size ? { [r]: s } : void 0
      }
    } : void 0
  } : {
    $ref: [...t.$refStrategy === "relative" ? [] : t.basePath, t.definitionPath, r].join("/"),
    [t.definitionPath]: {
      ...i,
      [r]: s
    }
  };
  return t.target === "jsonSchema7" ? o.$schema = "http://json-schema.org/draft-07/schema#" : t.target === "jsonSchema2019-09" && (o.$schema = "https://json-schema.org/draft/2019-09/schema#"), o;
};
function ki(n, { parser: e, callback: t }) {
  const r = { ...n };
  return Object.defineProperties(r, {
    $brand: {
      value: "auto-parseable-tool",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    },
    $callback: {
      value: t,
      enumerable: !1
    }
  }), r;
}
function qs(n, e) {
  return Ti(n, {
    openaiStrictMode: !0,
    name: e.name,
    nameStrategy: "duplicate-ref",
    $refStrategy: "extract-to-root",
    nullableStrategy: "property"
  });
}
function Ii(n, e, t) {
  return $a({
    type: "json_schema",
    ...t,
    name: e,
    strict: !0,
    schema: qs(n, { name: e })
  }, (r) => n.parse(JSON.parse(r)));
}
function Ai(n) {
  return ki({
    type: "function",
    name: n.name,
    parameters: qs(n.parameters, { name: n.name }),
    strict: !0
  }, {
    callback: n.function,
    parser: (e) => n.parameters.parse(JSON.parse(e))
  });
}
class Be extends Error {
  constructor(t, r) {
    super(t);
    _(this, "state");
    this.state = r;
  }
}
class Ci extends Be {
}
class Wr extends Be {
}
class fe extends Be {
}
class Q extends Be {
}
class Yr extends Be {
  constructor(t, r, s) {
    super(t, s);
    _(this, "error");
    this.error = r;
  }
}
class Ei extends Be {
  constructor(t, r, s) {
    super(t, s);
    _(this, "error");
    this.error = r;
  }
}
class Xr extends Be {
  constructor(t, r, s) {
    super(t, s);
    _(this, "result");
    this.result = r;
  }
}
class rr extends Be {
  constructor(t, r, s) {
    super(t, s);
    _(this, "result");
    this.result = r;
  }
}
function st(n) {
  return typeof n == "object" && n !== null && "_def" in n && typeof n._def == "object" && n._def !== null && "typeName" in n._def && n._def.typeName === "ZodObject";
}
function Oi(n) {
  return typeof n == "object" && n !== null && "input" in n && typeof n.input == "string";
}
function bn(n) {
  if (n = n.replace(/\s/g, "_"), n = n.replace(/[^a-zA-Z0-9]/g, "_"), n.length === 0)
    throw new Error("Tool name cannot be empty");
  return n;
}
function Sr(n, e) {
  const t = (r) => JSON.parse(r);
  if (st(n)) {
    const r = Ai({
      name: e,
      parameters: n,
      function: () => {
      }
    });
    return {
      schema: r.parameters,
      parser: r.$parseRaw
    };
  } else if (typeof n == "object" && n !== null)
    return {
      schema: n,
      parser: t
    };
  throw new Q("Input type is not a ZodObject or a valid JSON schema");
}
function Qr(n) {
  if (n === "text")
    return "text";
  if (st(n)) {
    const e = Ii(n, "output");
    return {
      type: e.type,
      name: e.name,
      strict: e.strict || !1,
      schema: e.schema
    };
  }
  return n;
}
function Ni(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
}
var fn = { exports: {} }, Vn, Kr;
function Ri() {
  if (Kr) return Vn;
  Kr = 1;
  var n = 1e3, e = n * 60, t = e * 60, r = t * 24, s = r * 7, a = r * 365.25;
  Vn = function(p, f) {
    f = f || {};
    var h = typeof p;
    if (h === "string" && p.length > 0)
      return i(p);
    if (h === "number" && isFinite(p))
      return f.long ? d(p) : o(p);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(p)
    );
  };
  function i(p) {
    if (p = String(p), !(p.length > 100)) {
      var f = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        p
      );
      if (f) {
        var h = parseFloat(f[1]), x = (f[2] || "ms").toLowerCase();
        switch (x) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return h * a;
          case "weeks":
          case "week":
          case "w":
            return h * s;
          case "days":
          case "day":
          case "d":
            return h * r;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return h * t;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return h * e;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return h * n;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return h;
          default:
            return;
        }
      }
    }
  }
  function o(p) {
    var f = Math.abs(p);
    return f >= r ? Math.round(p / r) + "d" : f >= t ? Math.round(p / t) + "h" : f >= e ? Math.round(p / e) + "m" : f >= n ? Math.round(p / n) + "s" : p + "ms";
  }
  function d(p) {
    var f = Math.abs(p);
    return f >= r ? c(p, f, r, "day") : f >= t ? c(p, f, t, "hour") : f >= e ? c(p, f, e, "minute") : f >= n ? c(p, f, n, "second") : p + " ms";
  }
  function c(p, f, h, x) {
    var w = f >= h * 1.5;
    return Math.round(p / h) + " " + x + (w ? "s" : "");
  }
  return Vn;
}
var zn, es;
function Di() {
  if (es) return zn;
  es = 1;
  function n(e) {
    r.debug = r, r.default = r, r.coerce = c, r.disable = o, r.enable = a, r.enabled = d, r.humanize = Ri(), r.destroy = p, Object.keys(e).forEach((f) => {
      r[f] = e[f];
    }), r.names = [], r.skips = [], r.formatters = {};
    function t(f) {
      let h = 0;
      for (let x = 0; x < f.length; x++)
        h = (h << 5) - h + f.charCodeAt(x), h |= 0;
      return r.colors[Math.abs(h) % r.colors.length];
    }
    r.selectColor = t;
    function r(f) {
      let h, x = null, w, b;
      function E(...R) {
        if (!E.enabled)
          return;
        const z = E, Y = Number(/* @__PURE__ */ new Date()), oe = Y - (h || Y);
        z.diff = oe, z.prev = h, z.curr = Y, h = Y, R[0] = r.coerce(R[0]), typeof R[0] != "string" && R.unshift("%O");
        let ue = 0;
        R[0] = R[0].replace(/%([a-zA-Z%])/g, (Bn, Oa) => {
          if (Bn === "%%")
            return "%";
          ue++;
          const Lr = r.formatters[Oa];
          if (typeof Lr == "function") {
            const Na = R[ue];
            Bn = Lr.call(z, Na), R.splice(ue, 1), ue--;
          }
          return Bn;
        }), r.formatArgs.call(z, R), (z.log || r.log).apply(z, R);
      }
      return E.namespace = f, E.useColors = r.useColors(), E.color = r.selectColor(f), E.extend = s, E.destroy = r.destroy, Object.defineProperty(E, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => x !== null ? x : (w !== r.namespaces && (w = r.namespaces, b = r.enabled(f)), b),
        set: (R) => {
          x = R;
        }
      }), typeof r.init == "function" && r.init(E), E;
    }
    function s(f, h) {
      const x = r(this.namespace + (typeof h > "u" ? ":" : h) + f);
      return x.log = this.log, x;
    }
    function a(f) {
      r.save(f), r.namespaces = f, r.names = [], r.skips = [];
      const h = (typeof f == "string" ? f : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean);
      for (const x of h)
        x[0] === "-" ? r.skips.push(x.slice(1)) : r.names.push(x);
    }
    function i(f, h) {
      let x = 0, w = 0, b = -1, E = 0;
      for (; x < f.length; )
        if (w < h.length && (h[w] === f[x] || h[w] === "*"))
          h[w] === "*" ? (b = w, E = x, w++) : (x++, w++);
        else if (b !== -1)
          w = b + 1, E++, x = E;
        else
          return !1;
      for (; w < h.length && h[w] === "*"; )
        w++;
      return w === h.length;
    }
    function o() {
      const f = [
        ...r.names,
        ...r.skips.map((h) => "-" + h)
      ].join(",");
      return r.enable(""), f;
    }
    function d(f) {
      for (const h of r.skips)
        if (i(f, h))
          return !1;
      for (const h of r.names)
        if (i(f, h))
          return !0;
      return !1;
    }
    function c(f) {
      return f instanceof Error ? f.stack || f.message : f;
    }
    function p() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return r.enable(r.load()), r;
  }
  return zn = n, zn;
}
var ts;
function Pi() {
  return ts || (ts = 1, function(n, e) {
    e.formatArgs = r, e.save = s, e.load = a, e.useColors = t, e.storage = i(), e.destroy = /* @__PURE__ */ (() => {
      let d = !1;
      return () => {
        d || (d = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), e.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function t() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let d;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (d = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(d[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function r(d) {
      if (d[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + d[0] + (this.useColors ? "%c " : " ") + "+" + n.exports.humanize(this.diff), !this.useColors)
        return;
      const c = "color: " + this.color;
      d.splice(1, 0, c, "color: inherit");
      let p = 0, f = 0;
      d[0].replace(/%[a-zA-Z%]/g, (h) => {
        h !== "%%" && (p++, h === "%c" && (f = p));
      }), d.splice(f, 0, c);
    }
    e.log = console.debug || console.log || (() => {
    });
    function s(d) {
      try {
        d ? e.storage.setItem("debug", d) : e.storage.removeItem("debug");
      } catch {
      }
    }
    function a() {
      let d;
      try {
        d = e.storage.getItem("debug") || e.storage.getItem("DEBUG");
      } catch {
      }
      return !d && typeof process < "u" && "env" in process && (d = process.env.DEBUG), d;
    }
    function i() {
      try {
        return localStorage;
      } catch {
      }
    }
    n.exports = Di()(e);
    const { formatters: o } = n.exports;
    o.j = function(d) {
      try {
        return JSON.stringify(d);
      } catch (c) {
        return "[UnexpectedJSONParseError]: " + c.message;
      }
    };
  }(fn, fn.exports)), fn.exports;
}
var ji = Pi();
const Mi = /* @__PURE__ */ Ni(ji);
function Zi() {
  return yo();
}
function ns(n) {
  const e = Zi();
  return typeof e < "u" && (e[n] === "true" || e[n] === "1");
}
const Gs = {
  get disabled() {
    return !0;
  }
}, Vs = {
  get dontLogModelData() {
    return ns("OPENAI_AGENTS_DONT_LOG_MODEL_DATA");
  },
  get dontLogToolData() {
    return ns("OPENAI_AGENTS_DONT_LOG_TOOL_DATA");
  }
}, $i = Vs.dontLogModelData, Li = Vs.dontLogToolData;
function zs(n = "openai-agents") {
  return {
    namespace: n,
    debug: Mi(n),
    error: console.error,
    warn: console.warn,
    dontLogModelData: $i,
    dontLogToolData: Li
  };
}
const C = zs("openai-agents:core");
function at(n) {
  if (n == null)
    return String(n);
  if (typeof n == "string")
    return n;
  if (typeof n == "object")
    try {
      return JSON.stringify(n);
    } catch {
      return "[object with circular references]";
    }
  return String(n);
}
function Fi(n, e) {
  return `An error occurred while running the tool. Please try again. Error: ${e instanceof Error ? e.toString() : String(e)}`;
}
function sr(n) {
  const e = n.name ? bn(n.name) : bn(n.execute.name), t = typeof n.errorFunction > "u" ? Fi : n.errorFunction;
  if (!e)
    throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");
  const r = n.strict ?? !0;
  if (!r && st(n.parameters))
    throw new Q("Strict mode is required for Zod parameters");
  const { parser: s, schema: a } = Sr(n.parameters, e);
  async function i(c, p) {
    const [f, h] = await xr(() => s(p));
    if (f !== null)
      throw C.dontLogToolData ? C.debug(`Invalid JSON input for tool ${e}`) : C.debug(`Invalid JSON input for tool ${e}: ${p}`), new fe("Invalid JSON input for tool");
    C.dontLogToolData ? C.debug(`Invoking tool ${e}`) : C.debug(`Invoking tool ${e} with input ${p}`);
    const x = await n.execute(h, c), w = at(x);
    return C.dontLogToolData ? C.debug(`Tool ${e} completed`) : C.debug(`Tool ${e} returned: ${w}`), x;
  }
  async function o(c, p) {
    return i(c, p).catch((f) => {
      if (t) {
        const h = Ft();
        return h == null || h.setError({
          message: "Error running tool (non-fatal)",
          data: {
            tool_name: e,
            error: f.toString()
          }
        }), t(c, f);
      }
      throw f;
    });
  }
  const d = typeof n.needsApproval == "function" ? n.needsApproval : async () => typeof n.needsApproval == "boolean" ? n.needsApproval : !1;
  return {
    type: "function",
    name: e,
    description: n.description,
    parameters: a,
    strict: r,
    invoke: o,
    needsApproval: d
  };
}
var F;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const a = {};
    for (const i of s)
      a[i] = i;
    return a;
  }, n.getValidEnumValues = (s) => {
    const a = n.objectKeys(s).filter((o) => typeof s[s[o]] != "number"), i = {};
    for (const o of a)
      i[o] = s[o];
    return n.objectValues(i);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(a) {
    return s[a];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const a = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && a.push(i);
    return a;
  }, n.find = (s, a) => {
    for (const i of s)
      if (a(i))
        return i;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, a = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(a);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, a) => typeof a == "bigint" ? a.toString() : a;
})(F || (F = {}));
var rs;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(rs || (rs = {}));
const k = F.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]), Me = (n) => {
  switch (typeof n) {
    case "undefined":
      return k.undefined;
    case "string":
      return k.string;
    case "number":
      return Number.isNaN(n) ? k.nan : k.number;
    case "boolean":
      return k.boolean;
    case "function":
      return k.function;
    case "bigint":
      return k.bigint;
    case "symbol":
      return k.symbol;
    case "object":
      return Array.isArray(n) ? k.array : n === null ? k.null : n.then && typeof n.then == "function" && n.catch && typeof n.catch == "function" ? k.promise : typeof Map < "u" && n instanceof Map ? k.map : typeof Set < "u" && n instanceof Set ? k.set : typeof Date < "u" && n instanceof Date ? k.date : k.object;
    default:
      return k.unknown;
  }
}, v = F.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class Pe extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(a) {
      return a.message;
    }, r = { _errors: [] }, s = (a) => {
      for (const i of a.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(t(i));
        else {
          let o = r, d = 0;
          for (; d < i.path.length; ) {
            const c = i.path[d];
            d === i.path.length - 1 ? (o[c] = o[c] || { _errors: [] }, o[c]._errors.push(t(i))) : o[c] = o[c] || { _errors: [] }, o = o[c], d++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof Pe))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, F.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      s.path.length > 0 ? (t[s.path[0]] = t[s.path[0]] || [], t[s.path[0]].push(e(s))) : r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
}
Pe.create = (n) => new Pe(n);
const ar = (n, e) => {
  let t;
  switch (n.code) {
    case v.invalid_type:
      n.received === k.undefined ? t = "Required" : t = `Expected ${n.expected}, received ${n.received}`;
      break;
    case v.invalid_literal:
      t = `Invalid literal value, expected ${JSON.stringify(n.expected, F.jsonStringifyReplacer)}`;
      break;
    case v.unrecognized_keys:
      t = `Unrecognized key(s) in object: ${F.joinValues(n.keys, ", ")}`;
      break;
    case v.invalid_union:
      t = "Invalid input";
      break;
    case v.invalid_union_discriminator:
      t = `Invalid discriminator value. Expected ${F.joinValues(n.options)}`;
      break;
    case v.invalid_enum_value:
      t = `Invalid enum value. Expected ${F.joinValues(n.options)}, received '${n.received}'`;
      break;
    case v.invalid_arguments:
      t = "Invalid function arguments";
      break;
    case v.invalid_return_type:
      t = "Invalid function return type";
      break;
    case v.invalid_date:
      t = "Invalid date";
      break;
    case v.invalid_string:
      typeof n.validation == "object" ? "includes" in n.validation ? (t = `Invalid input: must include "${n.validation.includes}"`, typeof n.validation.position == "number" && (t = `${t} at one or more positions greater than or equal to ${n.validation.position}`)) : "startsWith" in n.validation ? t = `Invalid input: must start with "${n.validation.startsWith}"` : "endsWith" in n.validation ? t = `Invalid input: must end with "${n.validation.endsWith}"` : F.assertNever(n.validation) : n.validation !== "regex" ? t = `Invalid ${n.validation}` : t = "Invalid";
      break;
    case v.too_small:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "more than"} ${n.minimum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "over"} ${n.minimum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${new Date(Number(n.minimum))}` : t = "Invalid input";
      break;
    case v.too_big:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "less than"} ${n.maximum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "under"} ${n.maximum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "bigint" ? t = `BigInt must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly" : n.inclusive ? "smaller than or equal to" : "smaller than"} ${new Date(Number(n.maximum))}` : t = "Invalid input";
      break;
    case v.custom:
      t = "Invalid input";
      break;
    case v.invalid_intersection_types:
      t = "Intersection results could not be merged";
      break;
    case v.not_multiple_of:
      t = `Number must be a multiple of ${n.multipleOf}`;
      break;
    case v.not_finite:
      t = "Number must be finite";
      break;
    default:
      t = e.defaultError, F.assertNever(n);
  }
  return { message: t };
};
let Ui = ar;
function Ji() {
  return Ui;
}
const Bi = (n) => {
  const { data: e, path: t, errorMaps: r, issueData: s } = n, a = [...t, ...s.path || []], i = {
    ...s,
    path: a
  };
  if (s.message !== void 0)
    return {
      ...s,
      path: a,
      message: s.message
    };
  let o = "";
  const d = r.filter((c) => !!c).slice().reverse();
  for (const c of d)
    o = c(i, { data: e, defaultError: o }).message;
  return {
    ...s,
    path: a,
    message: o
  };
};
function S(n, e) {
  const t = Ji(), r = Bi({
    issueData: e,
    data: n.data,
    path: n.path,
    errorMaps: [
      n.common.contextualErrorMap,
      // contextual error map is first priority
      n.schemaErrorMap,
      // then schema-bound map if available
      t,
      // then global override map
      t === ar ? void 0 : ar
      // then global default map
    ].filter((s) => !!s)
  });
  n.common.issues.push(r);
}
class ae {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e, t) {
    const r = [];
    for (const s of t) {
      if (s.status === "aborted")
        return O;
      s.status === "dirty" && e.dirty(), r.push(s.value);
    }
    return { status: e.value, value: r };
  }
  static async mergeObjectAsync(e, t) {
    const r = [];
    for (const s of t) {
      const a = await s.key, i = await s.value;
      r.push({
        key: a,
        value: i
      });
    }
    return ae.mergeObjectSync(e, r);
  }
  static mergeObjectSync(e, t) {
    const r = {};
    for (const s of t) {
      const { key: a, value: i } = s;
      if (a.status === "aborted" || i.status === "aborted")
        return O;
      a.status === "dirty" && e.dirty(), i.status === "dirty" && e.dirty(), a.value !== "__proto__" && (typeof i.value < "u" || s.alwaysSet) && (r[a.value] = i.value);
    }
    return { status: e.value, value: r };
  }
}
const O = Object.freeze({
  status: "aborted"
}), Rt = (n) => ({ status: "dirty", value: n }), he = (n) => ({ status: "valid", value: n }), ss = (n) => n.status === "aborted", as = (n) => n.status === "dirty", Et = (n) => n.status === "valid", xn = (n) => typeof Promise < "u" && n instanceof Promise;
var I;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})(I || (I = {}));
class Se {
  constructor(e, t, r, s) {
    this._cachedPath = [], this.parent = e, this.data = t, this._path = r, this._key = s;
  }
  get path() {
    return this._cachedPath.length || (Array.isArray(this._key) ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
}
const is = (n, e) => {
  if (Et(e))
    return { success: !0, data: e.value };
  if (!n.common.issues.length)
    throw new Error("Validation failed but no issues detected.");
  return {
    success: !1,
    get error() {
      if (this._error)
        return this._error;
      const t = new Pe(n.common.issues);
      return this._error = t, this._error;
    }
  };
};
function j(n) {
  if (!n)
    return {};
  const { errorMap: e, invalid_type_error: t, required_error: r, description: s } = n;
  if (e && (t || r))
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e ? { errorMap: e, description: s } : { errorMap: (i, o) => {
    const { message: d } = n;
    return i.code === "invalid_enum_value" ? { message: d ?? o.defaultError } : typeof o.data > "u" ? { message: d ?? r ?? o.defaultError } : i.code !== "invalid_type" ? { message: o.defaultError } : { message: d ?? t ?? o.defaultError };
  }, description: s };
}
class Z {
  get description() {
    return this._def.description;
  }
  _getType(e) {
    return Me(e.data);
  }
  _getOrReturnCtx(e, t) {
    return t || {
      common: e.parent.common,
      data: e.data,
      parsedType: Me(e.data),
      schemaErrorMap: this._def.errorMap,
      path: e.path,
      parent: e.parent
    };
  }
  _processInputParams(e) {
    return {
      status: new ae(),
      ctx: {
        common: e.parent.common,
        data: e.data,
        parsedType: Me(e.data),
        schemaErrorMap: this._def.errorMap,
        path: e.path,
        parent: e.parent
      }
    };
  }
  _parseSync(e) {
    const t = this._parse(e);
    if (xn(t))
      throw new Error("Synchronous parse encountered promise.");
    return t;
  }
  _parseAsync(e) {
    const t = this._parse(e);
    return Promise.resolve(t);
  }
  parse(e, t) {
    const r = this.safeParse(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  safeParse(e, t) {
    const r = {
      common: {
        issues: [],
        async: (t == null ? void 0 : t.async) ?? !1,
        contextualErrorMap: t == null ? void 0 : t.errorMap
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: Me(e)
    }, s = this._parseSync({ data: e, path: r.path, parent: r });
    return is(r, s);
  }
  "~validate"(e) {
    var r, s;
    const t = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: Me(e)
    };
    if (!this["~standard"].async)
      try {
        const a = this._parseSync({ data: e, path: [], parent: t });
        return Et(a) ? {
          value: a.value
        } : {
          issues: t.common.issues
        };
      } catch (a) {
        (s = (r = a == null ? void 0 : a.message) == null ? void 0 : r.toLowerCase()) != null && s.includes("encountered") && (this["~standard"].async = !0), t.common = {
          issues: [],
          async: !0
        };
      }
    return this._parseAsync({ data: e, path: [], parent: t }).then((a) => Et(a) ? {
      value: a.value
    } : {
      issues: t.common.issues
    });
  }
  async parseAsync(e, t) {
    const r = await this.safeParseAsync(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  async safeParseAsync(e, t) {
    const r = {
      common: {
        issues: [],
        contextualErrorMap: t == null ? void 0 : t.errorMap,
        async: !0
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: Me(e)
    }, s = this._parse({ data: e, path: r.path, parent: r }), a = await (xn(s) ? s : Promise.resolve(s));
    return is(r, a);
  }
  refine(e, t) {
    const r = (s) => typeof t == "string" || typeof t > "u" ? { message: t } : typeof t == "function" ? t(s) : t;
    return this._refinement((s, a) => {
      const i = e(s), o = () => a.addIssue({
        code: v.custom,
        ...r(s)
      });
      return typeof Promise < "u" && i instanceof Promise ? i.then((d) => d ? !0 : (o(), !1)) : i ? !0 : (o(), !1);
    });
  }
  refinement(e, t) {
    return this._refinement((r, s) => e(r) ? !0 : (s.addIssue(typeof t == "function" ? t(r, s) : t), !1));
  }
  _refinement(e) {
    return new ut({
      schema: this,
      typeName: N.ZodEffects,
      effect: { type: "refinement", refinement: e }
    });
  }
  superRefine(e) {
    return this._refinement(e);
  }
  constructor(e) {
    this.spa = this.safeParseAsync, this._def = e, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this), this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (t) => this["~validate"](t)
    };
  }
  optional() {
    return De.create(this, this._def);
  }
  nullable() {
    return ct.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return xe.create(this);
  }
  promise() {
    return En.create(this, this._def);
  }
  or(e) {
    return Tn.create([this, e], this._def);
  }
  and(e) {
    return kn.create(this, e, this._def);
  }
  transform(e) {
    return new ut({
      ...j(this._def),
      schema: this,
      typeName: N.ZodEffects,
      effect: { type: "transform", transform: e }
    });
  }
  default(e) {
    const t = typeof e == "function" ? e : () => e;
    return new On({
      ...j(this._def),
      innerType: this,
      defaultValue: t,
      typeName: N.ZodDefault
    });
  }
  brand() {
    return new Xs({
      typeName: N.ZodBranded,
      type: this,
      ...j(this._def)
    });
  }
  catch(e) {
    const t = typeof e == "function" ? e : () => e;
    return new Nn({
      ...j(this._def),
      innerType: this,
      catchValue: t,
      typeName: N.ZodCatch
    });
  }
  describe(e) {
    const t = this.constructor;
    return new t({
      ...this._def,
      description: e
    });
  }
  pipe(e) {
    return kr.create(this, e);
  }
  readonly() {
    return Rn.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const qi = /^c[^\s-]{8,}$/i, Gi = /^[0-9a-z]+$/, Vi = /^[0-9A-HJKMNP-TV-Z]{26}$/i, zi = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i, Hi = /^[a-z0-9_-]{21}$/i, Wi = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/, Yi = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/, Xi = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i, Qi = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
let Hn;
const Ki = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, eo = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/, to = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/, no = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, ro = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/, so = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/, Hs = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))", ao = new RegExp(`^${Hs}$`);
function Ws(n) {
  let e = "[0-5]\\d";
  n.precision ? e = `${e}\\.\\d{${n.precision}}` : n.precision == null && (e = `${e}(\\.\\d+)?`);
  const t = n.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`;
}
function io(n) {
  return new RegExp(`^${Ws(n)}$`);
}
function oo(n) {
  let e = `${Hs}T${Ws(n)}`;
  const t = [];
  return t.push(n.local ? "Z?" : "Z"), n.offset && t.push("([+-]\\d{2}:?\\d{2})"), e = `${e}(${t.join("|")})`, new RegExp(`^${e}$`);
}
function uo(n, e) {
  return !!((e === "v4" || !e) && Ki.test(n) || (e === "v6" || !e) && to.test(n));
}
function co(n, e) {
  if (!Wi.test(n))
    return !1;
  try {
    const [t] = n.split("."), r = t.replace(/-/g, "+").replace(/_/g, "/").padEnd(t.length + (4 - t.length % 4) % 4, "="), s = JSON.parse(atob(r));
    return !(typeof s != "object" || s === null || "typ" in s && (s == null ? void 0 : s.typ) !== "JWT" || !s.alg || e && s.alg !== e);
  } catch {
    return !1;
  }
}
function lo(n, e) {
  return !!((e === "v4" || !e) && eo.test(n) || (e === "v6" || !e) && no.test(n));
}
class Re extends Z {
  _parse(e) {
    if (this._def.coerce && (e.data = String(e.data)), this._getType(e) !== k.string) {
      const a = this._getOrReturnCtx(e);
      return S(a, {
        code: v.invalid_type,
        expected: k.string,
        received: a.parsedType
      }), O;
    }
    const r = new ae();
    let s;
    for (const a of this._def.checks)
      if (a.kind === "min")
        e.data.length < a.value && (s = this._getOrReturnCtx(e, s), S(s, {
          code: v.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "max")
        e.data.length > a.value && (s = this._getOrReturnCtx(e, s), S(s, {
          code: v.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "length") {
        const i = e.data.length > a.value, o = e.data.length < a.value;
        (i || o) && (s = this._getOrReturnCtx(e, s), i ? S(s, {
          code: v.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }) : o && S(s, {
          code: v.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }), r.dirty());
      } else if (a.kind === "email")
        Xi.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
          validation: "email",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "emoji")
        Hn || (Hn = new RegExp(Qi, "u")), Hn.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
          validation: "emoji",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "uuid")
        zi.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
          validation: "uuid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "nanoid")
        Hi.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
          validation: "nanoid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid")
        qi.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
          validation: "cuid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid2")
        Gi.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
          validation: "cuid2",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "ulid")
        Vi.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
          validation: "ulid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "url")
        try {
          new URL(e.data);
        } catch {
          s = this._getOrReturnCtx(e, s), S(s, {
            validation: "url",
            code: v.invalid_string,
            message: a.message
          }), r.dirty();
        }
      else a.kind === "regex" ? (a.regex.lastIndex = 0, a.regex.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
        validation: "regex",
        code: v.invalid_string,
        message: a.message
      }), r.dirty())) : a.kind === "trim" ? e.data = e.data.trim() : a.kind === "includes" ? e.data.includes(a.value, a.position) || (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.invalid_string,
        validation: { includes: a.value, position: a.position },
        message: a.message
      }), r.dirty()) : a.kind === "toLowerCase" ? e.data = e.data.toLowerCase() : a.kind === "toUpperCase" ? e.data = e.data.toUpperCase() : a.kind === "startsWith" ? e.data.startsWith(a.value) || (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.invalid_string,
        validation: { startsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "endsWith" ? e.data.endsWith(a.value) || (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.invalid_string,
        validation: { endsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "datetime" ? oo(a).test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.invalid_string,
        validation: "datetime",
        message: a.message
      }), r.dirty()) : a.kind === "date" ? ao.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.invalid_string,
        validation: "date",
        message: a.message
      }), r.dirty()) : a.kind === "time" ? io(a).test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.invalid_string,
        validation: "time",
        message: a.message
      }), r.dirty()) : a.kind === "duration" ? Yi.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
        validation: "duration",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "ip" ? uo(e.data, a.version) || (s = this._getOrReturnCtx(e, s), S(s, {
        validation: "ip",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "jwt" ? co(e.data, a.alg) || (s = this._getOrReturnCtx(e, s), S(s, {
        validation: "jwt",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "cidr" ? lo(e.data, a.version) || (s = this._getOrReturnCtx(e, s), S(s, {
        validation: "cidr",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64" ? ro.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
        validation: "base64",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64url" ? so.test(e.data) || (s = this._getOrReturnCtx(e, s), S(s, {
        validation: "base64url",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : F.assertNever(a);
    return { status: r.value, value: e.data };
  }
  _regex(e, t, r) {
    return this.refinement((s) => e.test(s), {
      validation: t,
      code: v.invalid_string,
      ...I.errToObj(r)
    });
  }
  _addCheck(e) {
    return new Re({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  email(e) {
    return this._addCheck({ kind: "email", ...I.errToObj(e) });
  }
  url(e) {
    return this._addCheck({ kind: "url", ...I.errToObj(e) });
  }
  emoji(e) {
    return this._addCheck({ kind: "emoji", ...I.errToObj(e) });
  }
  uuid(e) {
    return this._addCheck({ kind: "uuid", ...I.errToObj(e) });
  }
  nanoid(e) {
    return this._addCheck({ kind: "nanoid", ...I.errToObj(e) });
  }
  cuid(e) {
    return this._addCheck({ kind: "cuid", ...I.errToObj(e) });
  }
  cuid2(e) {
    return this._addCheck({ kind: "cuid2", ...I.errToObj(e) });
  }
  ulid(e) {
    return this._addCheck({ kind: "ulid", ...I.errToObj(e) });
  }
  base64(e) {
    return this._addCheck({ kind: "base64", ...I.errToObj(e) });
  }
  base64url(e) {
    return this._addCheck({
      kind: "base64url",
      ...I.errToObj(e)
    });
  }
  jwt(e) {
    return this._addCheck({ kind: "jwt", ...I.errToObj(e) });
  }
  ip(e) {
    return this._addCheck({ kind: "ip", ...I.errToObj(e) });
  }
  cidr(e) {
    return this._addCheck({ kind: "cidr", ...I.errToObj(e) });
  }
  datetime(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "datetime",
      precision: null,
      offset: !1,
      local: !1,
      message: e
    }) : this._addCheck({
      kind: "datetime",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      offset: (e == null ? void 0 : e.offset) ?? !1,
      local: (e == null ? void 0 : e.local) ?? !1,
      ...I.errToObj(e == null ? void 0 : e.message)
    });
  }
  date(e) {
    return this._addCheck({ kind: "date", message: e });
  }
  time(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "time",
      precision: null,
      message: e
    }) : this._addCheck({
      kind: "time",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      ...I.errToObj(e == null ? void 0 : e.message)
    });
  }
  duration(e) {
    return this._addCheck({ kind: "duration", ...I.errToObj(e) });
  }
  regex(e, t) {
    return this._addCheck({
      kind: "regex",
      regex: e,
      ...I.errToObj(t)
    });
  }
  includes(e, t) {
    return this._addCheck({
      kind: "includes",
      value: e,
      position: t == null ? void 0 : t.position,
      ...I.errToObj(t == null ? void 0 : t.message)
    });
  }
  startsWith(e, t) {
    return this._addCheck({
      kind: "startsWith",
      value: e,
      ...I.errToObj(t)
    });
  }
  endsWith(e, t) {
    return this._addCheck({
      kind: "endsWith",
      value: e,
      ...I.errToObj(t)
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e,
      ...I.errToObj(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e,
      ...I.errToObj(t)
    });
  }
  length(e, t) {
    return this._addCheck({
      kind: "length",
      value: e,
      ...I.errToObj(t)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(e) {
    return this.min(1, I.errToObj(e));
  }
  trim() {
    return new Re({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new Re({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new Re({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((e) => e.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e) => e.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e) => e.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e) => e.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e) => e.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e) => e.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e) => e.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e) => e.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e) => e.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e) => e.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e) => e.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e) => e.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e) => e.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((e) => e.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((e) => e.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((e) => e.kind === "base64url");
  }
  get minLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Re.create = (n) => new Re({
  checks: [],
  typeName: N.ZodString,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...j(n)
});
function po(n, e) {
  const t = (n.toString().split(".")[1] || "").length, r = (e.toString().split(".")[1] || "").length, s = t > r ? t : r, a = Number.parseInt(n.toFixed(s).replace(".", "")), i = Number.parseInt(e.toFixed(s).replace(".", ""));
  return a % i / 10 ** s;
}
class Ot extends Z {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e) {
    if (this._def.coerce && (e.data = Number(e.data)), this._getType(e) !== k.number) {
      const a = this._getOrReturnCtx(e);
      return S(a, {
        code: v.invalid_type,
        expected: k.number,
        received: a.parsedType
      }), O;
    }
    let r;
    const s = new ae();
    for (const a of this._def.checks)
      a.kind === "int" ? F.isInteger(e.data) || (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.invalid_type,
        expected: "integer",
        received: "float",
        message: a.message
      }), s.dirty()) : a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.too_small,
        minimum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.too_big,
        maximum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? po(e.data, a.value) !== 0 && (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : a.kind === "finite" ? Number.isFinite(e.data) || (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.not_finite,
        message: a.message
      }), s.dirty()) : F.assertNever(a);
    return { status: s.value, value: e.data };
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, I.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, I.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, I.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, I.toString(t));
  }
  setLimit(e, t, r, s) {
    return new Ot({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: I.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new Ot({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  int(e) {
    return this._addCheck({
      kind: "int",
      message: I.toString(e)
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !1,
      message: I.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !1,
      message: I.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !0,
      message: I.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !0,
      message: I.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: I.toString(t)
    });
  }
  finite(e) {
    return this._addCheck({
      kind: "finite",
      message: I.toString(e)
    });
  }
  safe(e) {
    return this._addCheck({
      kind: "min",
      inclusive: !0,
      value: Number.MIN_SAFE_INTEGER,
      message: I.toString(e)
    })._addCheck({
      kind: "max",
      inclusive: !0,
      value: Number.MAX_SAFE_INTEGER,
      message: I.toString(e)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
  get isInt() {
    return !!this._def.checks.find((e) => e.kind === "int" || e.kind === "multipleOf" && F.isInteger(e.value));
  }
  get isFinite() {
    let e = null, t = null;
    for (const r of this._def.checks) {
      if (r.kind === "finite" || r.kind === "int" || r.kind === "multipleOf")
        return !0;
      r.kind === "min" ? (t === null || r.value > t) && (t = r.value) : r.kind === "max" && (e === null || r.value < e) && (e = r.value);
    }
    return Number.isFinite(t) && Number.isFinite(e);
  }
}
Ot.create = (n) => new Ot({
  checks: [],
  typeName: N.ZodNumber,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...j(n)
});
class Zt extends Z {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e) {
    if (this._def.coerce)
      try {
        e.data = BigInt(e.data);
      } catch {
        return this._getInvalidInput(e);
      }
    if (this._getType(e) !== k.bigint)
      return this._getInvalidInput(e);
    let r;
    const s = new ae();
    for (const a of this._def.checks)
      a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.too_small,
        type: "bigint",
        minimum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.too_big,
        type: "bigint",
        maximum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? e.data % a.value !== BigInt(0) && (r = this._getOrReturnCtx(e, r), S(r, {
        code: v.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : F.assertNever(a);
    return { status: s.value, value: e.data };
  }
  _getInvalidInput(e) {
    const t = this._getOrReturnCtx(e);
    return S(t, {
      code: v.invalid_type,
      expected: k.bigint,
      received: t.parsedType
    }), O;
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, I.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, I.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, I.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, I.toString(t));
  }
  setLimit(e, t, r, s) {
    return new Zt({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: I.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new Zt({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !1,
      message: I.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !1,
      message: I.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !0,
      message: I.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !0,
      message: I.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: I.toString(t)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Zt.create = (n) => new Zt({
  checks: [],
  typeName: N.ZodBigInt,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...j(n)
});
class ir extends Z {
  _parse(e) {
    if (this._def.coerce && (e.data = !!e.data), this._getType(e) !== k.boolean) {
      const r = this._getOrReturnCtx(e);
      return S(r, {
        code: v.invalid_type,
        expected: k.boolean,
        received: r.parsedType
      }), O;
    }
    return he(e.data);
  }
}
ir.create = (n) => new ir({
  typeName: N.ZodBoolean,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...j(n)
});
class Sn extends Z {
  _parse(e) {
    if (this._def.coerce && (e.data = new Date(e.data)), this._getType(e) !== k.date) {
      const a = this._getOrReturnCtx(e);
      return S(a, {
        code: v.invalid_type,
        expected: k.date,
        received: a.parsedType
      }), O;
    }
    if (Number.isNaN(e.data.getTime())) {
      const a = this._getOrReturnCtx(e);
      return S(a, {
        code: v.invalid_date
      }), O;
    }
    const r = new ae();
    let s;
    for (const a of this._def.checks)
      a.kind === "min" ? e.data.getTime() < a.value && (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.too_small,
        message: a.message,
        inclusive: !0,
        exact: !1,
        minimum: a.value,
        type: "date"
      }), r.dirty()) : a.kind === "max" ? e.data.getTime() > a.value && (s = this._getOrReturnCtx(e, s), S(s, {
        code: v.too_big,
        message: a.message,
        inclusive: !0,
        exact: !1,
        maximum: a.value,
        type: "date"
      }), r.dirty()) : F.assertNever(a);
    return {
      status: r.value,
      value: new Date(e.data.getTime())
    };
  }
  _addCheck(e) {
    return new Sn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e.getTime(),
      message: I.toString(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e.getTime(),
      message: I.toString(t)
    });
  }
  get minDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
  get maxDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
}
Sn.create = (n) => new Sn({
  checks: [],
  coerce: (n == null ? void 0 : n.coerce) || !1,
  typeName: N.ZodDate,
  ...j(n)
});
class os extends Z {
  _parse(e) {
    if (this._getType(e) !== k.symbol) {
      const r = this._getOrReturnCtx(e);
      return S(r, {
        code: v.invalid_type,
        expected: k.symbol,
        received: r.parsedType
      }), O;
    }
    return he(e.data);
  }
}
os.create = (n) => new os({
  typeName: N.ZodSymbol,
  ...j(n)
});
class or extends Z {
  _parse(e) {
    if (this._getType(e) !== k.undefined) {
      const r = this._getOrReturnCtx(e);
      return S(r, {
        code: v.invalid_type,
        expected: k.undefined,
        received: r.parsedType
      }), O;
    }
    return he(e.data);
  }
}
or.create = (n) => new or({
  typeName: N.ZodUndefined,
  ...j(n)
});
class ur extends Z {
  _parse(e) {
    if (this._getType(e) !== k.null) {
      const r = this._getOrReturnCtx(e);
      return S(r, {
        code: v.invalid_type,
        expected: k.null,
        received: r.parsedType
      }), O;
    }
    return he(e.data);
  }
}
ur.create = (n) => new ur({
  typeName: N.ZodNull,
  ...j(n)
});
class cr extends Z {
  constructor() {
    super(...arguments), this._any = !0;
  }
  _parse(e) {
    return he(e.data);
  }
}
cr.create = (n) => new cr({
  typeName: N.ZodAny,
  ...j(n)
});
class us extends Z {
  constructor() {
    super(...arguments), this._unknown = !0;
  }
  _parse(e) {
    return he(e.data);
  }
}
us.create = (n) => new us({
  typeName: N.ZodUnknown,
  ...j(n)
});
class Je extends Z {
  _parse(e) {
    const t = this._getOrReturnCtx(e);
    return S(t, {
      code: v.invalid_type,
      expected: k.never,
      received: t.parsedType
    }), O;
  }
}
Je.create = (n) => new Je({
  typeName: N.ZodNever,
  ...j(n)
});
class cs extends Z {
  _parse(e) {
    if (this._getType(e) !== k.undefined) {
      const r = this._getOrReturnCtx(e);
      return S(r, {
        code: v.invalid_type,
        expected: k.void,
        received: r.parsedType
      }), O;
    }
    return he(e.data);
  }
}
cs.create = (n) => new cs({
  typeName: N.ZodVoid,
  ...j(n)
});
class xe extends Z {
  _parse(e) {
    const { ctx: t, status: r } = this._processInputParams(e), s = this._def;
    if (t.parsedType !== k.array)
      return S(t, {
        code: v.invalid_type,
        expected: k.array,
        received: t.parsedType
      }), O;
    if (s.exactLength !== null) {
      const i = t.data.length > s.exactLength.value, o = t.data.length < s.exactLength.value;
      (i || o) && (S(t, {
        code: i ? v.too_big : v.too_small,
        minimum: o ? s.exactLength.value : void 0,
        maximum: i ? s.exactLength.value : void 0,
        type: "array",
        inclusive: !0,
        exact: !0,
        message: s.exactLength.message
      }), r.dirty());
    }
    if (s.minLength !== null && t.data.length < s.minLength.value && (S(t, {
      code: v.too_small,
      minimum: s.minLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.minLength.message
    }), r.dirty()), s.maxLength !== null && t.data.length > s.maxLength.value && (S(t, {
      code: v.too_big,
      maximum: s.maxLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.maxLength.message
    }), r.dirty()), t.common.async)
      return Promise.all([...t.data].map((i, o) => s.type._parseAsync(new Se(t, i, t.path, o)))).then((i) => ae.mergeArray(r, i));
    const a = [...t.data].map((i, o) => s.type._parseSync(new Se(t, i, t.path, o)));
    return ae.mergeArray(r, a);
  }
  get element() {
    return this._def.type;
  }
  min(e, t) {
    return new xe({
      ...this._def,
      minLength: { value: e, message: I.toString(t) }
    });
  }
  max(e, t) {
    return new xe({
      ...this._def,
      maxLength: { value: e, message: I.toString(t) }
    });
  }
  length(e, t) {
    return new xe({
      ...this._def,
      exactLength: { value: e, message: I.toString(t) }
    });
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
xe.create = (n, e) => new xe({
  type: n,
  minLength: null,
  maxLength: null,
  exactLength: null,
  typeName: N.ZodArray,
  ...j(e)
});
function pt(n) {
  if (n instanceof W) {
    const e = {};
    for (const t in n.shape) {
      const r = n.shape[t];
      e[t] = De.create(pt(r));
    }
    return new W({
      ...n._def,
      shape: () => e
    });
  } else return n instanceof xe ? new xe({
    ...n._def,
    type: pt(n.element)
  }) : n instanceof De ? De.create(pt(n.unwrap())) : n instanceof ct ? ct.create(pt(n.unwrap())) : n instanceof it ? it.create(n.items.map((e) => pt(e))) : n;
}
class W extends Z {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const e = this._def.shape(), t = F.objectKeys(e);
    return this._cached = { shape: e, keys: t }, this._cached;
  }
  _parse(e) {
    if (this._getType(e) !== k.object) {
      const c = this._getOrReturnCtx(e);
      return S(c, {
        code: v.invalid_type,
        expected: k.object,
        received: c.parsedType
      }), O;
    }
    const { status: r, ctx: s } = this._processInputParams(e), { shape: a, keys: i } = this._getCached(), o = [];
    if (!(this._def.catchall instanceof Je && this._def.unknownKeys === "strip"))
      for (const c in s.data)
        i.includes(c) || o.push(c);
    const d = [];
    for (const c of i) {
      const p = a[c], f = s.data[c];
      d.push({
        key: { status: "valid", value: c },
        value: p._parse(new Se(s, f, s.path, c)),
        alwaysSet: c in s.data
      });
    }
    if (this._def.catchall instanceof Je) {
      const c = this._def.unknownKeys;
      if (c === "passthrough")
        for (const p of o)
          d.push({
            key: { status: "valid", value: p },
            value: { status: "valid", value: s.data[p] }
          });
      else if (c === "strict")
        o.length > 0 && (S(s, {
          code: v.unrecognized_keys,
          keys: o
        }), r.dirty());
      else if (c !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      const c = this._def.catchall;
      for (const p of o) {
        const f = s.data[p];
        d.push({
          key: { status: "valid", value: p },
          value: c._parse(
            new Se(s, f, s.path, p)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: p in s.data
        });
      }
    }
    return s.common.async ? Promise.resolve().then(async () => {
      const c = [];
      for (const p of d) {
        const f = await p.key, h = await p.value;
        c.push({
          key: f,
          value: h,
          alwaysSet: p.alwaysSet
        });
      }
      return c;
    }).then((c) => ae.mergeObjectSync(r, c)) : ae.mergeObjectSync(r, d);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e) {
    return I.errToObj, new W({
      ...this._def,
      unknownKeys: "strict",
      ...e !== void 0 ? {
        errorMap: (t, r) => {
          var a, i;
          const s = ((i = (a = this._def).errorMap) == null ? void 0 : i.call(a, t, r).message) ?? r.defaultError;
          return t.code === "unrecognized_keys" ? {
            message: I.errToObj(e).message ?? s
          } : {
            message: s
          };
        }
      } : {}
    });
  }
  strip() {
    return new W({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new W({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(e) {
    return new W({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...e
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(e) {
    return new W({
      unknownKeys: e._def.unknownKeys,
      catchall: e._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...e._def.shape()
      }),
      typeName: N.ZodObject
    });
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(e, t) {
    return this.augment({ [e]: t });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(e) {
    return new W({
      ...this._def,
      catchall: e
    });
  }
  pick(e) {
    const t = {};
    for (const r of F.objectKeys(e))
      e[r] && this.shape[r] && (t[r] = this.shape[r]);
    return new W({
      ...this._def,
      shape: () => t
    });
  }
  omit(e) {
    const t = {};
    for (const r of F.objectKeys(this.shape))
      e[r] || (t[r] = this.shape[r]);
    return new W({
      ...this._def,
      shape: () => t
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return pt(this);
  }
  partial(e) {
    const t = {};
    for (const r of F.objectKeys(this.shape)) {
      const s = this.shape[r];
      e && !e[r] ? t[r] = s : t[r] = s.optional();
    }
    return new W({
      ...this._def,
      shape: () => t
    });
  }
  required(e) {
    const t = {};
    for (const r of F.objectKeys(this.shape))
      if (e && !e[r])
        t[r] = this.shape[r];
      else {
        let a = this.shape[r];
        for (; a instanceof De; )
          a = a._def.innerType;
        t[r] = a;
      }
    return new W({
      ...this._def,
      shape: () => t
    });
  }
  keyof() {
    return Ys(F.objectKeys(this.shape));
  }
}
W.create = (n, e) => new W({
  shape: () => n,
  unknownKeys: "strip",
  catchall: Je.create(),
  typeName: N.ZodObject,
  ...j(e)
});
W.strictCreate = (n, e) => new W({
  shape: () => n,
  unknownKeys: "strict",
  catchall: Je.create(),
  typeName: N.ZodObject,
  ...j(e)
});
W.lazycreate = (n, e) => new W({
  shape: n,
  unknownKeys: "strip",
  catchall: Je.create(),
  typeName: N.ZodObject,
  ...j(e)
});
class Tn extends Z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = this._def.options;
    function s(a) {
      for (const o of a)
        if (o.result.status === "valid")
          return o.result;
      for (const o of a)
        if (o.result.status === "dirty")
          return t.common.issues.push(...o.ctx.common.issues), o.result;
      const i = a.map((o) => new Pe(o.ctx.common.issues));
      return S(t, {
        code: v.invalid_union,
        unionErrors: i
      }), O;
    }
    if (t.common.async)
      return Promise.all(r.map(async (a) => {
        const i = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await a._parseAsync({
            data: t.data,
            path: t.path,
            parent: i
          }),
          ctx: i
        };
      })).then(s);
    {
      let a;
      const i = [];
      for (const d of r) {
        const c = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        }, p = d._parseSync({
          data: t.data,
          path: t.path,
          parent: c
        });
        if (p.status === "valid")
          return p;
        p.status === "dirty" && !a && (a = { result: p, ctx: c }), c.common.issues.length && i.push(c.common.issues);
      }
      if (a)
        return t.common.issues.push(...a.ctx.common.issues), a.result;
      const o = i.map((d) => new Pe(d));
      return S(t, {
        code: v.invalid_union,
        unionErrors: o
      }), O;
    }
  }
  get options() {
    return this._def.options;
  }
}
Tn.create = (n, e) => new Tn({
  options: n,
  typeName: N.ZodUnion,
  ...j(e)
});
const Ae = (n) => n instanceof An ? Ae(n.schema) : n instanceof ut ? Ae(n.innerType()) : n instanceof Cn ? [n.value] : n instanceof ot ? n.options : n instanceof lr ? F.objectValues(n.enum) : n instanceof On ? Ae(n._def.innerType) : n instanceof or ? [void 0] : n instanceof ur ? [null] : n instanceof De ? [void 0, ...Ae(n.unwrap())] : n instanceof ct ? [null, ...Ae(n.unwrap())] : n instanceof Xs || n instanceof Rn ? Ae(n.unwrap()) : n instanceof Nn ? Ae(n._def.innerType) : [];
class Tr extends Z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== k.object)
      return S(t, {
        code: v.invalid_type,
        expected: k.object,
        received: t.parsedType
      }), O;
    const r = this.discriminator, s = t.data[r], a = this.optionsMap.get(s);
    return a ? t.common.async ? a._parseAsync({
      data: t.data,
      path: t.path,
      parent: t
    }) : a._parseSync({
      data: t.data,
      path: t.path,
      parent: t
    }) : (S(t, {
      code: v.invalid_union_discriminator,
      options: Array.from(this.optionsMap.keys()),
      path: [r]
    }), O);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  /**
   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
   * have a different value for each object in the union.
   * @param discriminator the name of the discriminator property
   * @param types an array of object schemas
   * @param params
   */
  static create(e, t, r) {
    const s = /* @__PURE__ */ new Map();
    for (const a of t) {
      const i = Ae(a.shape[e]);
      if (!i.length)
        throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);
      for (const o of i) {
        if (s.has(o))
          throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);
        s.set(o, a);
      }
    }
    return new Tr({
      typeName: N.ZodDiscriminatedUnion,
      discriminator: e,
      options: t,
      optionsMap: s,
      ...j(r)
    });
  }
}
function dr(n, e) {
  const t = Me(n), r = Me(e);
  if (n === e)
    return { valid: !0, data: n };
  if (t === k.object && r === k.object) {
    const s = F.objectKeys(e), a = F.objectKeys(n).filter((o) => s.indexOf(o) !== -1), i = { ...n, ...e };
    for (const o of a) {
      const d = dr(n[o], e[o]);
      if (!d.valid)
        return { valid: !1 };
      i[o] = d.data;
    }
    return { valid: !0, data: i };
  } else if (t === k.array && r === k.array) {
    if (n.length !== e.length)
      return { valid: !1 };
    const s = [];
    for (let a = 0; a < n.length; a++) {
      const i = n[a], o = e[a], d = dr(i, o);
      if (!d.valid)
        return { valid: !1 };
      s.push(d.data);
    }
    return { valid: !0, data: s };
  } else return t === k.date && r === k.date && +n == +e ? { valid: !0, data: n } : { valid: !1 };
}
class kn extends Z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = (a, i) => {
      if (ss(a) || ss(i))
        return O;
      const o = dr(a.value, i.value);
      return o.valid ? ((as(a) || as(i)) && t.dirty(), { status: t.value, value: o.data }) : (S(r, {
        code: v.invalid_intersection_types
      }), O);
    };
    return r.common.async ? Promise.all([
      this._def.left._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      }),
      this._def.right._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      })
    ]).then(([a, i]) => s(a, i)) : s(this._def.left._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }), this._def.right._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }));
  }
}
kn.create = (n, e, t) => new kn({
  left: n,
  right: e,
  typeName: N.ZodIntersection,
  ...j(t)
});
class it extends Z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.array)
      return S(r, {
        code: v.invalid_type,
        expected: k.array,
        received: r.parsedType
      }), O;
    if (r.data.length < this._def.items.length)
      return S(r, {
        code: v.too_small,
        minimum: this._def.items.length,
        inclusive: !0,
        exact: !1,
        type: "array"
      }), O;
    !this._def.rest && r.data.length > this._def.items.length && (S(r, {
      code: v.too_big,
      maximum: this._def.items.length,
      inclusive: !0,
      exact: !1,
      type: "array"
    }), t.dirty());
    const a = [...r.data].map((i, o) => {
      const d = this._def.items[o] || this._def.rest;
      return d ? d._parse(new Se(r, i, r.path, o)) : null;
    }).filter((i) => !!i);
    return r.common.async ? Promise.all(a).then((i) => ae.mergeArray(t, i)) : ae.mergeArray(t, a);
  }
  get items() {
    return this._def.items;
  }
  rest(e) {
    return new it({
      ...this._def,
      rest: e
    });
  }
}
it.create = (n, e) => {
  if (!Array.isArray(n))
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new it({
    items: n,
    typeName: N.ZodTuple,
    rest: null,
    ...j(e)
  });
};
class In extends Z {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.object)
      return S(r, {
        code: v.invalid_type,
        expected: k.object,
        received: r.parsedType
      }), O;
    const s = [], a = this._def.keyType, i = this._def.valueType;
    for (const o in r.data)
      s.push({
        key: a._parse(new Se(r, o, r.path, o)),
        value: i._parse(new Se(r, r.data[o], r.path, o)),
        alwaysSet: o in r.data
      });
    return r.common.async ? ae.mergeObjectAsync(t, s) : ae.mergeObjectSync(t, s);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e, t, r) {
    return t instanceof Z ? new In({
      keyType: e,
      valueType: t,
      typeName: N.ZodRecord,
      ...j(r)
    }) : new In({
      keyType: Re.create(),
      valueType: e,
      typeName: N.ZodRecord,
      ...j(t)
    });
  }
}
class ds extends Z {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.map)
      return S(r, {
        code: v.invalid_type,
        expected: k.map,
        received: r.parsedType
      }), O;
    const s = this._def.keyType, a = this._def.valueType, i = [...r.data.entries()].map(([o, d], c) => ({
      key: s._parse(new Se(r, o, r.path, [c, "key"])),
      value: a._parse(new Se(r, d, r.path, [c, "value"]))
    }));
    if (r.common.async) {
      const o = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const d of i) {
          const c = await d.key, p = await d.value;
          if (c.status === "aborted" || p.status === "aborted")
            return O;
          (c.status === "dirty" || p.status === "dirty") && t.dirty(), o.set(c.value, p.value);
        }
        return { status: t.value, value: o };
      });
    } else {
      const o = /* @__PURE__ */ new Map();
      for (const d of i) {
        const c = d.key, p = d.value;
        if (c.status === "aborted" || p.status === "aborted")
          return O;
        (c.status === "dirty" || p.status === "dirty") && t.dirty(), o.set(c.value, p.value);
      }
      return { status: t.value, value: o };
    }
  }
}
ds.create = (n, e, t) => new ds({
  valueType: e,
  keyType: n,
  typeName: N.ZodMap,
  ...j(t)
});
class $t extends Z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.set)
      return S(r, {
        code: v.invalid_type,
        expected: k.set,
        received: r.parsedType
      }), O;
    const s = this._def;
    s.minSize !== null && r.data.size < s.minSize.value && (S(r, {
      code: v.too_small,
      minimum: s.minSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.minSize.message
    }), t.dirty()), s.maxSize !== null && r.data.size > s.maxSize.value && (S(r, {
      code: v.too_big,
      maximum: s.maxSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.maxSize.message
    }), t.dirty());
    const a = this._def.valueType;
    function i(d) {
      const c = /* @__PURE__ */ new Set();
      for (const p of d) {
        if (p.status === "aborted")
          return O;
        p.status === "dirty" && t.dirty(), c.add(p.value);
      }
      return { status: t.value, value: c };
    }
    const o = [...r.data.values()].map((d, c) => a._parse(new Se(r, d, r.path, c)));
    return r.common.async ? Promise.all(o).then((d) => i(d)) : i(o);
  }
  min(e, t) {
    return new $t({
      ...this._def,
      minSize: { value: e, message: I.toString(t) }
    });
  }
  max(e, t) {
    return new $t({
      ...this._def,
      maxSize: { value: e, message: I.toString(t) }
    });
  }
  size(e, t) {
    return this.min(e, t).max(e, t);
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
$t.create = (n, e) => new $t({
  valueType: n,
  minSize: null,
  maxSize: null,
  typeName: N.ZodSet,
  ...j(e)
});
class An extends Z {
  get schema() {
    return this._def.getter();
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    return this._def.getter()._parse({ data: t.data, path: t.path, parent: t });
  }
}
An.create = (n, e) => new An({
  getter: n,
  typeName: N.ZodLazy,
  ...j(e)
});
class Cn extends Z {
  _parse(e) {
    if (e.data !== this._def.value) {
      const t = this._getOrReturnCtx(e);
      return S(t, {
        received: t.data,
        code: v.invalid_literal,
        expected: this._def.value
      }), O;
    }
    return { status: "valid", value: e.data };
  }
  get value() {
    return this._def.value;
  }
}
Cn.create = (n, e) => new Cn({
  value: n,
  typeName: N.ZodLiteral,
  ...j(e)
});
function Ys(n, e) {
  return new ot({
    values: n,
    typeName: N.ZodEnum,
    ...j(e)
  });
}
class ot extends Z {
  _parse(e) {
    if (typeof e.data != "string") {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return S(t, {
        expected: F.joinValues(r),
        received: t.parsedType,
        code: v.invalid_type
      }), O;
    }
    if (this._cache || (this._cache = new Set(this._def.values)), !this._cache.has(e.data)) {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return S(t, {
        received: t.data,
        code: v.invalid_enum_value,
        options: r
      }), O;
    }
    return he(e.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Values() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  extract(e, t = this._def) {
    return ot.create(e, {
      ...this._def,
      ...t
    });
  }
  exclude(e, t = this._def) {
    return ot.create(this.options.filter((r) => !e.includes(r)), {
      ...this._def,
      ...t
    });
  }
}
ot.create = Ys;
class lr extends Z {
  _parse(e) {
    const t = F.getValidEnumValues(this._def.values), r = this._getOrReturnCtx(e);
    if (r.parsedType !== k.string && r.parsedType !== k.number) {
      const s = F.objectValues(t);
      return S(r, {
        expected: F.joinValues(s),
        received: r.parsedType,
        code: v.invalid_type
      }), O;
    }
    if (this._cache || (this._cache = new Set(F.getValidEnumValues(this._def.values))), !this._cache.has(e.data)) {
      const s = F.objectValues(t);
      return S(r, {
        received: r.data,
        code: v.invalid_enum_value,
        options: s
      }), O;
    }
    return he(e.data);
  }
  get enum() {
    return this._def.values;
  }
}
lr.create = (n, e) => new lr({
  values: n,
  typeName: N.ZodNativeEnum,
  ...j(e)
});
class En extends Z {
  unwrap() {
    return this._def.type;
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== k.promise && t.common.async === !1)
      return S(t, {
        code: v.invalid_type,
        expected: k.promise,
        received: t.parsedType
      }), O;
    const r = t.parsedType === k.promise ? t.data : Promise.resolve(t.data);
    return he(r.then((s) => this._def.type.parseAsync(s, {
      path: t.path,
      errorMap: t.common.contextualErrorMap
    })));
  }
}
En.create = (n, e) => new En({
  type: n,
  typeName: N.ZodPromise,
  ...j(e)
});
class ut extends Z {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === N.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = this._def.effect || null, a = {
      addIssue: (i) => {
        S(r, i), i.fatal ? t.abort() : t.dirty();
      },
      get path() {
        return r.path;
      }
    };
    if (a.addIssue = a.addIssue.bind(a), s.type === "preprocess") {
      const i = s.transform(r.data, a);
      if (r.common.async)
        return Promise.resolve(i).then(async (o) => {
          if (t.value === "aborted")
            return O;
          const d = await this._def.schema._parseAsync({
            data: o,
            path: r.path,
            parent: r
          });
          return d.status === "aborted" ? O : d.status === "dirty" || t.value === "dirty" ? Rt(d.value) : d;
        });
      {
        if (t.value === "aborted")
          return O;
        const o = this._def.schema._parseSync({
          data: i,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? O : o.status === "dirty" || t.value === "dirty" ? Rt(o.value) : o;
      }
    }
    if (s.type === "refinement") {
      const i = (o) => {
        const d = s.refinement(o, a);
        if (r.common.async)
          return Promise.resolve(d);
        if (d instanceof Promise)
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return o;
      };
      if (r.common.async === !1) {
        const o = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? O : (o.status === "dirty" && t.dirty(), i(o.value), { status: t.value, value: o.value });
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((o) => o.status === "aborted" ? O : (o.status === "dirty" && t.dirty(), i(o.value).then(() => ({ status: t.value, value: o.value }))));
    }
    if (s.type === "transform")
      if (r.common.async === !1) {
        const i = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        if (!Et(i))
          return O;
        const o = s.transform(i.value, a);
        if (o instanceof Promise)
          throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
        return { status: t.value, value: o };
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((i) => Et(i) ? Promise.resolve(s.transform(i.value, a)).then((o) => ({
          status: t.value,
          value: o
        })) : O);
    F.assertNever(s);
  }
}
ut.create = (n, e, t) => new ut({
  schema: n,
  typeName: N.ZodEffects,
  effect: e,
  ...j(t)
});
ut.createWithPreprocess = (n, e, t) => new ut({
  schema: e,
  effect: { type: "preprocess", transform: n },
  typeName: N.ZodEffects,
  ...j(t)
});
class De extends Z {
  _parse(e) {
    return this._getType(e) === k.undefined ? he(void 0) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
De.create = (n, e) => new De({
  innerType: n,
  typeName: N.ZodOptional,
  ...j(e)
});
class ct extends Z {
  _parse(e) {
    return this._getType(e) === k.null ? he(null) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
ct.create = (n, e) => new ct({
  innerType: n,
  typeName: N.ZodNullable,
  ...j(e)
});
class On extends Z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    let r = t.data;
    return t.parsedType === k.undefined && (r = this._def.defaultValue()), this._def.innerType._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
On.create = (n, e) => new On({
  innerType: n,
  typeName: N.ZodDefault,
  defaultValue: typeof e.default == "function" ? e.default : () => e.default,
  ...j(e)
});
class Nn extends Z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = {
      ...t,
      common: {
        ...t.common,
        issues: []
      }
    }, s = this._def.innerType._parse({
      data: r.data,
      path: r.path,
      parent: {
        ...r
      }
    });
    return xn(s) ? s.then((a) => ({
      status: "valid",
      value: a.status === "valid" ? a.value : this._def.catchValue({
        get error() {
          return new Pe(r.common.issues);
        },
        input: r.data
      })
    })) : {
      status: "valid",
      value: s.status === "valid" ? s.value : this._def.catchValue({
        get error() {
          return new Pe(r.common.issues);
        },
        input: r.data
      })
    };
  }
  removeCatch() {
    return this._def.innerType;
  }
}
Nn.create = (n, e) => new Nn({
  innerType: n,
  typeName: N.ZodCatch,
  catchValue: typeof e.catch == "function" ? e.catch : () => e.catch,
  ...j(e)
});
class ls extends Z {
  _parse(e) {
    if (this._getType(e) !== k.nan) {
      const r = this._getOrReturnCtx(e);
      return S(r, {
        code: v.invalid_type,
        expected: k.nan,
        received: r.parsedType
      }), O;
    }
    return { status: "valid", value: e.data };
  }
}
ls.create = (n) => new ls({
  typeName: N.ZodNaN,
  ...j(n)
});
class Xs extends Z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = t.data;
    return this._def.type._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class kr extends Z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.common.async)
      return (async () => {
        const a = await this._def.in._parseAsync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? O : a.status === "dirty" ? (t.dirty(), Rt(a.value)) : this._def.out._parseAsync({
          data: a.value,
          path: r.path,
          parent: r
        });
      })();
    {
      const s = this._def.in._parseSync({
        data: r.data,
        path: r.path,
        parent: r
      });
      return s.status === "aborted" ? O : s.status === "dirty" ? (t.dirty(), {
        status: "dirty",
        value: s.value
      }) : this._def.out._parseSync({
        data: s.value,
        path: r.path,
        parent: r
      });
    }
  }
  static create(e, t) {
    return new kr({
      in: e,
      out: t,
      typeName: N.ZodPipeline
    });
  }
}
class Rn extends Z {
  _parse(e) {
    const t = this._def.innerType._parse(e), r = (s) => (Et(s) && (s.value = Object.freeze(s.value)), s);
    return xn(t) ? t.then((s) => r(s)) : r(t);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Rn.create = (n, e) => new Rn({
  innerType: n,
  typeName: N.ZodReadonly,
  ...j(e)
});
var N;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(N || (N = {}));
const l = Re.create, A = Ot.create, Pt = ir.create, L = cr.create;
Je.create;
const B = xe.create, g = W.create, Qs = Tn.create, pe = Tr.create;
kn.create;
it.create;
const K = In.create, fo = An.create, m = Cn.create, se = ot.create;
En.create;
De.create;
ct.create;
g({
  name: l(),
  description: l().optional(),
  inputSchema: g({
    type: m("object"),
    properties: K(l(), L()),
    required: B(l()),
    additionalProperties: Pt()
  })
});
async function ho(n, e, t, r = !1) {
  const s = [], a = /* @__PURE__ */ new Set();
  for (const i of n) {
    const o = await mo(i, e, t, r), c = [...new Set(o.map((p) => p.name))].filter((p) => a.has(p));
    if (c.length > 0)
      throw new Q(`Duplicate tool names found across MCP servers: ${c.join(", ")}`);
    for (const p of o)
      a.add(p.name), s.push(p);
  }
  return s;
}
const Wn = {};
async function mo(n, e, t, r) {
  return n.cacheToolsList && Wn[n.name] ? Wn[n.name].map((s) => ps(s, n, r)) : Uo(async (s) => {
    const a = await n.listTools(), i = [], o = {
      runContext: e,
      agent: t,
      serverName: n.name
    };
    for (const c of a) {
      const p = n.toolFilter;
      if (p)
        if (p && typeof p == "function") {
          if (!await p(o, c)) {
            C.debug(`MCP Tool (server: ${n.name}, tool: ${c.name}) is blocked by the callable filter.`);
            continue;
          }
        } else {
          const f = p.allowedToolNames ?? [], h = p.blockedToolNames ?? [];
          if (f.length > 0 || h.length > 0) {
            const x = f.length > 0 ? f.includes(c.name) : !0, w = h.length > 0 ? h.includes(c.name) : !1;
            if (!x || w) {
              w ? C.debug(`MCP Tool (server: ${n.name}, tool: ${c.name}) is blocked by the static filter.`) : x || C.debug(`MCP Tool (server: ${n.name}, tool: ${c.name}) is not allowed by the static filter.`);
              continue;
            }
          }
        }
      i.push(c);
    }
    s.spanData.result = i.map((c) => c.name);
    const d = i.map((c) => ps(c, n, r));
    return n.cacheToolsList && (Wn[n.name] = i), d;
  }, { data: { server: n.name } });
}
async function go(n, e, t, r = !1) {
  return ho(n, e, t, r);
}
function ps(n, e, t) {
  var i, o, d, c;
  async function r(p, f) {
    let h = {};
    typeof p == "string" && p ? h = JSON.parse(p) : typeof p == "object" && p != null && (h = p);
    const x = Ft();
    x && (x.spanData.mcp_data = { server: e.name });
    const w = await e.callTool(n.name, h);
    return w.length === 1 ? w[0] : w;
  }
  const s = {
    ...n.inputSchema,
    type: ((i = n.inputSchema) == null ? void 0 : i.type) ?? "object",
    properties: ((o = n.inputSchema) == null ? void 0 : o.properties) ?? {},
    required: ((d = n.inputSchema) == null ? void 0 : d.required) ?? [],
    additionalProperties: ((c = n.inputSchema) == null ? void 0 : c.additionalProperties) ?? !1
  };
  if (t || s.additionalProperties === !0)
    try {
      const p = _o(s);
      return sr({
        name: n.name,
        description: n.description || "",
        parameters: p,
        strict: !0,
        execute: r
      });
    } catch (p) {
      C.warn(`Error converting MCP schema to strict mode: ${p}`);
    }
  const a = {
    ...s,
    additionalProperties: !0
  };
  return sr({
    name: n.name,
    description: n.description || "",
    parameters: a,
    strict: !1,
    execute: r
  });
}
function _o(n) {
  const e = {
    ...n,
    additionalProperties: !1
  };
  return e.required || (e.required = []), e;
}
function yo() {
  return {};
}
var _t;
class $n {
  constructor() {
    T(this, _t, new EventTarget());
  }
  on(e, t) {
    return u(this, _t).addEventListener(e, (r) => t(...r.detail ?? [])), this;
  }
  off(e, t) {
    return u(this, _t).removeEventListener(e, (r) => t(...r.detail ?? [])), this;
  }
  emit(e, ...t) {
    const r = new CustomEvent(e, { detail: t });
    return u(this, _t).dispatchEvent(r);
  }
  once(e, t) {
    const r = (...s) => {
      this.off(e, r), t(...s);
    };
    return this.on(e, r), this;
  }
}
_t = new WeakMap();
const Ks = crypto.randomUUID.bind(crypto), vo = class {
  constructor() {
  }
  pipeTo(e, t) {
  }
  pipeThrough(e, t) {
  }
}, wo = globalThis.ReadableStream, bo = globalThis.TransformStream;
class xo {
  constructor() {
    _(this, "context", null);
  }
  run(e, t) {
    return this.context = e, t();
  }
  getStore() {
    return this.context;
  }
  enterWith(e) {
    this.context = e;
  }
}
class So {
  constructor() {
  }
  setTimeout(e, t) {
    const r = setTimeout(e, t);
    return r.ref = typeof r.ref == "function" ? r.ref : () => r, r.unref = typeof r.unref == "function" ? r.unref : () => r, r.hasRef = typeof r.hasRef == "function" ? r.hasRef : () => !0, r.refresh = typeof r.refresh == "function" ? r.refresh : () => r, r;
  }
  clearTimeout(e) {
    window.clearTimeout(e);
  }
}
const To = new So();
let fs;
function Te() {
  return fs ?? (fs = new xo()), fs;
}
function Lt() {
  const n = Te().getStore();
  return n != null && n.trace ? n.trace : null;
}
function Ft() {
  const n = Te().getStore();
  return n != null && n.span ? n.span : null;
}
function ea(n) {
  return async () => {
    const e = Lt();
    if (!e)
      throw new Error("No trace found");
    await e.start();
    const t = await n(e);
    return await e.end(), t;
  };
}
async function ko(n, e, t = {}) {
  const r = typeof n == "string" ? Ie().createTrace({
    ...t,
    name: n
  }) : n;
  return Te().run({ trace: r }, ea(e));
}
async function Io(n, e = {}) {
  if (Lt())
    return await n();
  const r = Ie().createTrace(e);
  return Te().run({ trace: r }, ea(n));
}
function mn(n) {
  const e = Te().getStore();
  if (!e)
    throw new Error("No existing trace found");
  e.span && (e.span.previousSpan = e.previousSpan, e.previousSpan = e.span), e.span = n, Te().enterWith(e);
}
function Dt() {
  var e;
  const n = Te().getStore();
  n && (n.span = n.previousSpan, n.previousSpan = (e = n.previousSpan) == null ? void 0 : e.previousSpan, Te().enterWith(n));
}
function gt(n) {
  const e = Ft();
  e && e.setError(n);
}
function Ao(n) {
  var e, t, r;
  return {
    trace: (e = n.trace) == null ? void 0 : e.clone(),
    span: (t = n.span) == null ? void 0 : t.clone(),
    previousSpan: (r = n.previousSpan) == null ? void 0 : r.clone()
  };
}
function pr(n) {
  const e = Te().getStore();
  if (!e)
    throw new Error("No existing trace found");
  const t = Ao(e);
  return Te().run(t, n);
}
class Co {
  async export(e) {
    if (Gs.disabled) {
      C.debug("Tracing is disabled. Skipping export");
      return;
    }
    for (const t of e)
      t.type === "trace" ? console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}`) : console.log(`[Exporter] Export span: ${JSON.stringify(t)}`);
  }
}
var Gt, yt, Vt, zt, vt, ne, Ee, Ze, $e, wt, ie, fr, hr, ft;
class Eo {
  constructor(e, {
    maxQueueSize: t = 1e3,
    maxBatchSize: r = 100,
    scheduleDelay: s = 5e3,
    // 5 seconds
    exportTriggerRatio: a = 0.8
  } = {}) {
    T(this, ie);
    T(this, Gt);
    T(this, yt);
    T(this, Vt);
    T(this, zt);
    T(this, vt);
    T(this, ne, []);
    T(this, Ee);
    T(this, Ze, null);
    T(this, $e, !1);
    T(this, wt, null);
    y(this, Gt, t), y(this, yt, r), y(this, Vt, s), y(this, zt, t * a), y(this, vt, e), y(this, Ee, To), C.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.");
  }
  start() {
    y(this, wt, new AbortController()), $(this, ie, hr).call(this);
  }
  async onTraceStart(e) {
    await $(this, ie, fr).call(this, e);
  }
  async onTraceEnd(e) {
  }
  async onSpanStart(e) {
  }
  async onSpanEnd(e) {
    await $(this, ie, fr).call(this, e);
  }
  async shutdown(e) {
    var t;
    for (e && u(this, Ee).setTimeout(() => {
      var r;
      (r = u(this, wt)) == null || r.abort();
    }, e), C.debug("Shutting down gracefully"); u(this, ne).length > 0; ) {
      if (C.debug(`Waiting for buffer to empty. Items left: ${u(this, ne).length}`), u(this, $e) || await $(this, ie, ft).call(this, !0), (t = u(this, wt)) != null && t.signal.aborted) {
        C.debug("Timeout reached, force flushing"), await $(this, ie, ft).call(this, !0);
        break;
      }
      await new Promise((r) => u(this, Ee).setTimeout(r, 500));
    }
    C.debug("Buffer empty. Exiting"), u(this, Ee) && u(this, Ze) && u(this, Ee).clearTimeout(u(this, Ze));
  }
  async forceFlush() {
    u(this, ne).length > 0 && await $(this, ie, ft).call(this, !0);
  }
}
Gt = new WeakMap(), yt = new WeakMap(), Vt = new WeakMap(), zt = new WeakMap(), vt = new WeakMap(), ne = new WeakMap(), Ee = new WeakMap(), Ze = new WeakMap(), $e = new WeakMap(), wt = new WeakMap(), ie = new WeakSet(), fr = async function(e) {
  if (u(this, ne).length + 1 > u(this, Gt)) {
    C.error("Dropping trace because buffer is full");
    return;
  }
  u(this, ne).push(e), u(this, ne).length > u(this, zt) && await $(this, ie, ft).call(this);
}, hr = function() {
  y(this, Ze, u(this, Ee).setTimeout(async () => {
    await $(this, ie, ft).call(this), $(this, ie, hr).call(this);
  }, u(this, Vt))), typeof u(this, Ze).unref == "function" && u(this, Ze).unref();
}, ft = async function(e = !1) {
  if (u(this, ne).length !== 0) {
    if (C.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this, ne).length}`), e || u(this, ne).length < u(this, yt)) {
      const t = [...u(this, ne)];
      y(this, ne, []), y(this, $e, !0), await u(this, vt).export(t), y(this, $e, !1);
    } else if (u(this, ne).length > 0) {
      const t = u(this, ne).splice(0, u(this, yt));
      y(this, $e, !0), await u(this, vt).export(t), y(this, $e, !1);
    }
  }
};
var ce;
class Oo {
  constructor() {
    T(this, ce, []);
  }
  start() {
    for (const e of u(this, ce))
      e.start && e.start();
  }
  addTraceProcessor(e) {
    u(this, ce).push(e);
  }
  setProcessors(e) {
    C.debug("Shutting down old processors");
    for (const t of u(this, ce))
      t.shutdown();
    y(this, ce, e);
  }
  async onTraceStart(e) {
    for (const t of u(this, ce))
      await t.onTraceStart(e);
  }
  async onTraceEnd(e) {
    for (const t of u(this, ce))
      await t.onTraceEnd(e);
  }
  async onSpanStart(e) {
    for (const t of u(this, ce))
      await t.onSpanStart(e);
  }
  async onSpanEnd(e) {
    for (const t of u(this, ce))
      await t.onSpanEnd(e);
  }
  async shutdown(e) {
    for (const t of u(this, ce))
      await t.shutdown(e);
  }
  async forceFlush() {
    for (const e of u(this, ce))
      await e.forceFlush();
  }
}
ce = new WeakMap();
let Yn = null, Xn = null;
function No() {
  return Yn || (Yn = new Co()), Yn;
}
function ta() {
  return Xn || (Xn = new Eo(No())), Xn;
}
function hs() {
  return (/* @__PURE__ */ new Date()).toISOString();
}
function na() {
  return `trace_${Ks().replace(/-/g, "")}`;
}
function Ro() {
  return `span_${Ks().replace(/-/g, "").slice(0, 24)}`;
}
function Do(n) {
  return Object.fromEntries(Object.entries(n).filter(([e]) => !e.startsWith("_")));
}
var Ht, Wt, Yt, Xt, ze, Le, Fe, He, Qt;
const Mr = class Mr {
  constructor(e, t) {
    _(this, "type", "trace.span");
    T(this, Ht);
    T(this, Wt);
    T(this, Yt);
    T(this, Xt);
    T(this, ze);
    T(this, Le);
    T(this, Fe);
    T(this, He);
    T(this, Qt);
    y(this, Wt, e.traceId), y(this, Yt, e.spanId ?? Ro()), y(this, Ht, e.data), y(this, ze, t), y(this, Xt, e.parentId ?? null), y(this, He, e.error ?? null), y(this, Le, e.startedAt ?? null), y(this, Fe, e.endedAt ?? null);
  }
  get traceId() {
    return u(this, Wt);
  }
  get spanData() {
    return u(this, Ht);
  }
  get spanId() {
    return u(this, Yt);
  }
  get parentId() {
    return u(this, Xt);
  }
  get previousSpan() {
    return u(this, Qt);
  }
  set previousSpan(e) {
    y(this, Qt, e);
  }
  start() {
    if (u(this, Le)) {
      C.warn("Span already started");
      return;
    }
    y(this, Le, hs()), u(this, ze).onSpanStart(this);
  }
  end() {
    if (u(this, Fe)) {
      C.debug("Span already finished", this.spanData);
      return;
    }
    y(this, Fe, hs()), u(this, ze).onSpanEnd(this);
  }
  setError(e) {
    y(this, He, e);
  }
  get error() {
    return u(this, He);
  }
  get startedAt() {
    return u(this, Le);
  }
  get endedAt() {
    return u(this, Fe);
  }
  clone() {
    var t;
    const e = new Mr({
      traceId: this.traceId,
      spanId: this.spanId,
      parentId: this.parentId ?? void 0,
      data: this.spanData,
      startedAt: u(this, Le) ?? void 0,
      endedAt: u(this, Fe) ?? void 0,
      error: u(this, He) ?? void 0
    }, u(this, ze));
    return e.previousSpan = (t = this.previousSpan) == null ? void 0 : t.clone(), e;
  }
  toJSON() {
    return {
      object: this.type,
      id: this.spanId,
      trace_id: this.traceId,
      parent_id: this.parentId,
      started_at: this.startedAt,
      ended_at: this.endedAt,
      span_data: Do(this.spanData),
      error: this.error
    };
  }
};
Ht = new WeakMap(), Wt = new WeakMap(), Yt = new WeakMap(), Xt = new WeakMap(), ze = new WeakMap(), Le = new WeakMap(), Fe = new WeakMap(), He = new WeakMap(), Qt = new WeakMap();
let Ut = Mr;
class je extends Ut {
  constructor(e, t) {
    super({ traceId: "no-op", spanId: "no-op", data: e }, t);
  }
  start() {
  }
  end() {
  }
  setError() {
  }
  toJSON() {
    return null;
  }
}
var bt, Oe;
const Zr = class Zr {
  constructor(e, t) {
    _(this, "type", "trace");
    _(this, "traceId");
    _(this, "name");
    _(this, "groupId", null);
    _(this, "metadata");
    T(this, bt);
    T(this, Oe);
    this.traceId = e.traceId ?? na(), this.name = e.name ?? "Agent workflow", this.groupId = e.groupId ?? null, this.metadata = e.metadata ?? {}, y(this, bt, t ?? ta()), y(this, Oe, e.started ?? !1);
  }
  async start() {
    u(this, Oe) || (y(this, Oe, !0), await u(this, bt).onTraceStart(this));
  }
  async end() {
    u(this, Oe) && (y(this, Oe, !1), await u(this, bt).onTraceEnd(this));
  }
  clone() {
    return new Zr({
      traceId: this.traceId,
      name: this.name,
      groupId: this.groupId ?? void 0,
      metadata: this.metadata,
      started: u(this, Oe)
    });
  }
  toJSON() {
    return {
      object: this.type,
      id: this.traceId,
      workflow_name: this.name,
      group_id: this.groupId,
      metadata: this.metadata
    };
  }
};
bt = new WeakMap(), Oe = new WeakMap();
let Jt = Zr;
class Qn extends Jt {
  constructor() {
    super({});
  }
  async start() {
  }
  async end() {
  }
  toJSON() {
    return null;
  }
}
var ee, We, Mn, ra;
class Po {
  constructor() {
    T(this, Mn);
    T(this, ee);
    T(this, We);
    y(this, ee, new Oo()), y(this, We, Gs.disabled), $(this, Mn, ra).call(this);
  }
  /**
   * Add a processor to the list of processors. Each processor will receive all traces/spans.
   *
   * @param processor - The processor to add.
   */
  registerProcessor(e) {
    u(this, ee).addTraceProcessor(e);
  }
  /**
   * Set the list of processors. This will replace any existing processors.
   *
   * @param processors - The list of processors to set.
   */
  setProcessors(e) {
    u(this, ee).setProcessors(e);
  }
  /**
   * Get the current trace.
   *
   * @returns The current trace.
   */
  getCurrentTrace() {
    return Lt();
  }
  getCurrentSpan() {
    return Ft();
  }
  setDisabled(e) {
    y(this, We, e);
  }
  startExportLoop() {
    u(this, ee).start();
  }
  createTrace(e) {
    if (u(this, We))
      return C.debug("Tracing is disabled, Not creating trace %o", e), new Qn();
    const t = e.traceId ?? na(), r = e.name ?? "Agent workflow";
    return C.debug("Creating trace %s with name %s", t, r), new Jt({ ...e, name: r, traceId: t }, u(this, ee));
  }
  createSpan(e, t) {
    if (u(this, We) || e.disabled)
      return C.debug("Tracing is disabled, Not creating span %o", e), new je(e.data, u(this, ee));
    let r, s;
    if (t) {
      if (t instanceof Jt) {
        if (t instanceof Qn)
          return C.debug("Parent trace is no-op, returning NoopSpan"), new je(e.data, u(this, ee));
        s = t.traceId;
      } else if (t instanceof Ut) {
        if (t instanceof je)
          return C.debug("Parent span is no-op, returning NoopSpan"), new je(e.data, u(this, ee));
        r = t.spanId, s = t.traceId;
      }
    } else {
      const a = Lt(), i = Ft();
      if (!a)
        return C.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new je(e.data, u(this, ee));
      if (i instanceof je || a instanceof Qn)
        return C.debug(`Parent ${i} or ${a} is no-op, returning NoopSpan`), new je(e.data, u(this, ee));
      s = a.traceId, i ? (C.debug("Using parent span %s", i.spanId), r = i.spanId) : C.debug("No parent span, using current trace %s", a.traceId);
    }
    return s ? (C.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId ?? s}`), new Ut({
      ...e,
      traceId: s,
      parentId: r
    }, u(this, ee))) : (C.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new je(e.data, u(this, ee)));
  }
  async shutdown(e) {
    try {
      C.debug("Shutting down tracing provider"), await u(this, ee).shutdown(e);
    } catch (t) {
      C.error("Error shutting down tracing provider %o", t);
    }
  }
  async forceFlush() {
    await u(this, ee).forceFlush();
  }
}
ee = new WeakMap(), We = new WeakMap(), Mn = new WeakSet(), /** Adds listeners to `process` to ensure `shutdown` occurs before exit. */
ra = function() {
  if (typeof process < "u" && typeof process.on == "function") {
    const e = async () => {
      const t = setTimeout(() => {
        console.warn("Cleanup timeout, forcing exit"), process.exit(1);
      }, 5e3);
      try {
        await this.shutdown();
      } finally {
        clearTimeout(t);
      }
    };
    process.on("beforeExit", e), process.on("SIGINT", async () => {
      await e(), ms("SIGINT") || process.exit(130);
    }), process.on("SIGTERM", async () => {
      await e(), ms("SIGTERM") || process.exit(0);
    }), process.on("unhandledRejection", async (t, r) => {
      C.error("Unhandled rejection", t, r), await e(), jo("unhandledRejection") || process.exit(1);
    });
  }
};
function ms(n) {
  return process.listeners(n).length > 1;
}
function jo(n) {
  return process.listeners(n).length > 1;
}
let Kn;
function Ie() {
  return Kn || (Kn = new Po()), Kn;
}
function Ln(n) {
  return async (e, ...t) => pr(async () => {
    const r = n(...t);
    mn(r);
    try {
      return r.start(), await e(r);
    } catch (s) {
      throw r.setError({
        message: s.message,
        data: s.data
      }), s;
    } finally {
      r.end(), Dt();
    }
  });
}
function gs(n, e) {
  var t;
  return Ie().createSpan({
    ...n,
    data: {
      type: "agent",
      name: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.name) ?? "Agent",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
function Mo(n, e) {
  var t, r;
  return Ie().createSpan({
    ...n,
    data: {
      type: "function",
      input: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.input) ?? "",
      output: ((r = n == null ? void 0 : n.data) == null ? void 0 : r.output) ?? "",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const _s = Ln(Mo);
function Zo(n, e) {
  return Ie().createSpan({
    ...n,
    data: { type: "handoff", ...n == null ? void 0 : n.data }
  }, e);
}
const $o = Ln(Zo);
function Lo(n, e) {
  return Ie().createSpan({
    ...n,
    data: {
      type: "guardrail",
      triggered: !1,
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const ys = Ln(Lo);
function Fo(n, e) {
  return Ie().createSpan({
    ...n,
    data: {
      type: "mcp_tools",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const Uo = Ln(Fo);
function Jo(n) {
  Ie().registerProcessor(n);
}
class Ir {
  on(e, t) {
    return this.eventEmitter.on(e, t), this.eventEmitter;
  }
  off(e, t) {
    return this.eventEmitter.off(e, t), this.eventEmitter;
  }
  emit(e, ...t) {
    return this.eventEmitter.emit(e, ...t);
  }
  once(e, t) {
    return this.eventEmitter.once(e, t), this.eventEmitter;
  }
}
class Bo extends Ir {
  constructor() {
    super(...arguments);
    _(this, "eventEmitter", new $n());
  }
}
class qo extends Ir {
  constructor() {
    super(...arguments);
    _(this, "eventEmitter", new $n());
  }
}
function vs({ name: n, execute: e }) {
  return {
    type: "input",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "input", name: n },
        output: await e(t)
      };
    }
  };
}
function mr({ name: n, execute: e }) {
  return {
    type: "output",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "output", name: n },
        agent: t.agent,
        agentOutput: t.agentOutput,
        output: await e(t)
      };
    }
  };
}
function sa(n) {
  return JSON.stringify({ assistant: n.name });
}
function Go(n) {
  return `transfer_to_${bn(n.name)}`;
}
function Vo(n) {
  return `Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription ?? ""}`;
}
class aa {
  constructor(e, t) {
    /**
     * The name of the tool that represents the handoff.
     */
    _(this, "toolName");
    /**
     * The description of the tool that represents the handoff.
     */
    _(this, "toolDescription");
    /**
     * The JSON schema for the handoff input. Can be empty if the handoff does not take an input
     */
    _(this, "inputJsonSchema", {
      type: "object",
      properties: {},
      required: [],
      additionalProperties: !1
    });
    /**
     * Whether the input JSON schema is in strict mode. We **strongly** recommend setting this to
     * true, as it increases the likelihood of correct JSON input.
     */
    _(this, "strictJsonSchema", !0);
    /**
     * The function that invokes the handoff. The parameters passed are:
     * 1. The handoff run context
     * 2. The arguments from the LLM, as a JSON string. Empty string if inputJsonSchema is empty.
     *
     * Must return an agent
     */
    _(this, "onInvokeHandoff");
    /**
     * The name of the agent that is being handed off to.
     */
    _(this, "agentName");
    /**
     * A function that filters the inputs that are passed to the next agent. By default, the new agent
     * sees the entire conversation history. In some cases, you may want to filter inputs e.g. to
     * remove older inputs, or remove tools from existing inputs.
     *
     * The function will receive the entire conversation hisstory so far, including the input item
     * that triggered the handoff and a tool call output item representing the handoff tool's output.
     *
     * You are free to modify the input history or new items as you see fit. The next agent that runs
     * will receive `handoffInputData.allItems
     */
    _(this, "inputFilter");
    /**
     * The agent that is being handed off to.
     */
    _(this, "agent");
    this.agentName = e.name, this.onInvokeHandoff = t, this.toolName = Go(e), this.toolDescription = Vo(e), this.agent = e;
  }
  /**
   * Returns a function tool definition that can be used to invoke the handoff.
   */
  getHandoffAsFunctionTool() {
    return {
      type: "function",
      name: this.toolName,
      description: this.toolDescription,
      parameters: this.inputJsonSchema,
      strict: this.strictJsonSchema
    };
  }
}
function ia(n, e = {}) {
  let t;
  const r = !!e.onHandoff, s = !!e.inputType;
  if (!(r === s))
    throw new Q("You must provide either both `onHandoff` and `inputType` or neither.");
  async function i(d, c) {
    var p;
    if (t) {
      if (!c)
        throw gt({
          message: `Handoff function expected non empty input but got: ${c}`,
          data: {
            details: "input is empty"
          }
        }), new fe("Handoff function expected non empty input");
      try {
        const f = await t(c);
        e.onHandoff && await e.onHandoff(d, f);
      } catch (f) {
        throw gt({
          message: "Invalid JSON provided",
          data: {}
        }), C.dontLogToolData || C.error(`Invalid JSON when parsing: ${c}. Error: ${f}`), new fe("Invalid JSON provided");
      }
    } else
      await ((p = e.onHandoff) == null ? void 0 : p.call(e, d));
    return n;
  }
  const o = new aa(n, i);
  if (e.inputType) {
    const d = Sr(e.inputType, o.toolName);
    o.inputJsonSchema = d.schema, o.strictJsonSchema = !0, t = d.parser;
  }
  return e.toolNameOverride && (o.toolName = e.toolNameOverride), e.toolDescriptionOverride && (o.toolDescription = e.toolDescriptionOverride), e.inputFilter && (o.inputFilter = e.inputFilter), o;
}
function Dn(n) {
  return n instanceof aa ? n : ia(n);
}
function zo() {
  throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.");
}
const te = g({
  /**
   * Additional optional provider specific data. Used for custom functionality or model provider
   * specific fields.
   */
  providerData: K(l(), L()).optional()
}), lt = te.extend({
  /**
   * An ID to identify the item. This is optional by default. If a model provider absolutely
   * requires this field, it will be validated on the model level.
   */
  id: l().optional()
}), Ho = te.extend({
  type: m("refusal"),
  /**
   * The refusal explanation from the model.
   */
  refusal: l()
}), Wo = te.extend({
  type: m("output_text"),
  /**
   * The text output from the model.
   */
  text: l()
}), Ar = te.extend({
  type: m("input_text"),
  /**
   * A text input for example a message from a user
   */
  text: l()
}), Yo = te.extend({
  type: m("input_image"),
  /**
   * The image input to the model. Could be a URL, base64 or an object with a file ID.
   */
  image: l().or(g({
    id: l()
  })).describe("Could be a URL, base64 or an object with a file ID.")
}), Xo = te.extend({
  type: m("input_file"),
  /**
   * The file input to the model. Could be a URL, base64 or an object with a file ID.
   */
  file: l().describe("Either base64 encoded file data or a publicly accessible file URL").or(g({
    id: l().describe("OpenAI file ID")
  })).or(g({
    url: l().describe("Publicly accessible PDF file URL")
  })).describe("Contents of the file or an object with a file ID.")
}), oa = te.extend({
  type: m("audio"),
  /**
   * The audio input to the model. Could be base64 encoded audio data or an object with a file ID.
   */
  audio: l().or(g({
    id: l()
  })).describe("Base64 encoded audio data or file id"),
  /**
   * The format of the audio.
   */
  format: l().nullable().optional(),
  /**
   * The transcript of the audio.
   */
  transcript: l().nullable().optional()
}), Qo = te.extend({
  type: m("image"),
  /**
   * The image input to the model. Could be base64 encoded image data or an object with a file ID.
   */
  image: l().describe("Base64 encoded image data")
}), Ko = te.extend({
  type: m("text"),
  /**
   * The text output from the model.
   */
  text: l()
}), eu = te.extend({
  type: m("image"),
  /**
   * The image data. Could be base64 encoded image data or an object with a file ID.
   */
  data: l().describe("Base64 encoded image data"),
  /**
   * The media type of the image.
   */
  mediaType: l().describe("IANA media type of the image")
}), tu = te.extend({
  type: m("computer_screenshot"),
  /**
   * A base64 encoded image data or a URL representing the screenshot.
   */
  data: l().describe("Base64 encoded image data or URL")
}), nu = pe("type", [
  g({ type: m("screenshot") }),
  g({
    type: m("click"),
    x: A(),
    y: A(),
    button: se(["left", "right", "wheel", "back", "forward"])
  }),
  g({
    type: m("double_click"),
    x: A(),
    y: A()
  }),
  g({
    type: m("scroll"),
    x: A(),
    y: A(),
    scroll_x: A(),
    scroll_y: A()
  }),
  g({
    type: m("type"),
    text: l()
  }),
  g({ type: m("wait") }),
  g({
    type: m("move"),
    x: A(),
    y: A()
  }),
  g({
    type: m("keypress"),
    keys: B(l())
  }),
  g({
    type: m("drag"),
    path: B(g({ x: A(), y: A() }))
  })
]), ru = pe("type", [
  Wo,
  Ho,
  Ar,
  oa,
  Qo
]), Cr = lt.extend({
  /**
   * Any item without a type is treated as a message
   */
  type: m("message").optional()
}), Fn = Cr.extend({
  /**
   * Representing a message from the assistant (i.e. the model)
   */
  role: m("assistant"),
  /**
   * The status of the message.
   */
  status: se(["in_progress", "completed", "incomplete"]),
  /**
   * The content of the message.
   */
  content: B(ru)
}), su = pe("type", [
  Ar,
  Yo,
  Xo,
  oa
]), ua = Cr.extend({
  // type: z.literal('message'),
  /**
   * Representing a message from the user
   */
  role: m("user"),
  /**
   * The content of the message.
   */
  content: B(su).or(l())
}), ca = Cr.extend({
  // type: z.literal('message'),
  /**
   * Representing a system message to the user
   */
  role: m("system"),
  /**
   * The content of the message.
   */
  content: l()
});
pe("role", [
  ca,
  Fn,
  ua
]);
const Bt = lt.extend({
  type: m("hosted_tool_call"),
  /**
   * The name of the hosted tool. For example `web_search_call` or `file_search_call`
   */
  name: l().describe("The name of the hosted tool"),
  /**
   * The arguments of the hosted tool call.
   */
  arguments: l().describe("The arguments of the hosted tool call").optional(),
  /**
   * The status of the tool call.
   */
  status: l().optional(),
  /**
   * The primary output of the tool call. Additional output might be in the `providerData` field.
   */
  output: l().optional()
}), qt = lt.extend({
  type: m("function_call"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: l().describe("The ID of the tool call"),
  /**
   * The name of the function.
   */
  name: l().describe("The name of the function"),
  /**
   * The status of the function call.
   */
  status: se(["in_progress", "completed", "incomplete"]).optional(),
  /**
   * The arguments of the function call.
   */
  arguments: l()
}), gr = lt.extend({
  type: m("function_call_result"),
  /**
   * The name of the tool that was called
   */
  name: l().describe("The name of the tool"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: l().describe("The ID of the tool call"),
  /**
   * The status of the tool call.
   */
  status: se(["in_progress", "completed", "incomplete"]),
  /**
   * The output of the tool call.
   */
  output: pe("type", [Ko, eu])
}), Er = lt.extend({
  type: m("computer_call"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: l().describe("The ID of the computer call"),
  /**
   * The status of the computer call.
   */
  status: se(["in_progress", "completed", "incomplete"]),
  /**
   * The action to be performed by the computer.
   */
  action: nu
}), au = lt.extend({
  type: m("computer_call_result"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: l().describe("The ID of the computer call"),
  /**
   * The output of the computer call.
   */
  output: tu
}), iu = pe("type", [
  Er,
  qt,
  Bt
]), Or = te.extend({
  id: l().optional(),
  type: m("reasoning"),
  /**
   * The user facing representation of the reasoning. Additional information might be in the `providerData` field.
   */
  content: B(Ar)
}), da = lt.extend({
  type: m("unknown")
}), Nr = pe("type", [
  Fn,
  Bt,
  qt,
  Er,
  Or,
  da
]), ou = Qs([
  ua,
  Fn,
  ca,
  Bt,
  qt,
  Er,
  gr,
  au,
  Or,
  da
]), uu = g({
  requests: A().optional(),
  inputTokens: A(),
  outputTokens: A(),
  totalTokens: A(),
  inputTokensDetails: K(l(), A()).optional(),
  outputTokensDetails: K(l(), A()).optional()
}), la = te.extend({
  type: m("output_text_delta"),
  /**
   * The delta text that was streamed by the modelto the user.
   */
  delta: l()
}), cu = te.extend({
  type: m("response_started")
}), pa = te.extend({
  type: m("response_done"),
  /**
   * The response from the model.
   */
  response: te.extend({
    /**
     * The ID of the response.
     */
    id: l(),
    /**
     * The usage data for the response.
     */
    usage: uu,
    /**
     * The output from the model.
     */
    output: B(Nr)
  })
}), du = te.extend({
  type: m("model"),
  event: L().describe("The event from the model")
});
pe("type", [
  la,
  pa,
  cu,
  du
]);
class Un {
  constructor(e) {
    /**
     * The number of requests made to the LLM API.
     */
    _(this, "requests");
    /**
     * The number of input tokens used across all requests.
     */
    _(this, "inputTokens");
    /**
     * The number of output tokens used across all requests.
     */
    _(this, "outputTokens");
    /**
     * The total number of tokens sent and received, across all requests.
     */
    _(this, "totalTokens");
    /**
     * Details about the input tokens used across all requests.
     */
    _(this, "inputTokensDetails", []);
    /**
     * Details about the output tokens used across all requests.
     */
    _(this, "outputTokensDetails", []);
    typeof e > "u" ? (this.requests = 0, this.inputTokens = 0, this.outputTokens = 0, this.totalTokens = 0, this.inputTokensDetails = [], this.outputTokensDetails = []) : (this.requests = (e == null ? void 0 : e.requests) ?? 1, this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? 0, this.inputTokensDetails = e != null && e.inputTokensDetails ? [e.inputTokensDetails] : [], this.outputTokensDetails = e != null && e.outputTokensDetails ? [e.outputTokensDetails] : []);
  }
  add(e) {
    this.requests += e.requests, this.inputTokens += e.inputTokens, this.outputTokens += e.outputTokens, this.totalTokens += e.totalTokens, e.inputTokensDetails && this.inputTokensDetails.push(...e.inputTokensDetails), e.outputTokensDetails && this.outputTokensDetails.push(...e.outputTokensDetails);
  }
}
var de;
class ht {
  constructor(e = {}) {
    /**
     * The context object passed by you to the `Runner.run()`
     */
    _(this, "context");
    /**
     * The usage of the agent run so far. For streamed responses, the usage will be stale until the
     * last chunk of the stream is processed.
     */
    _(this, "usage");
    /**
     * A map of tool names to whether they have been approved.
     */
    T(this, de);
    this.context = e, this.usage = new Un(), y(this, de, /* @__PURE__ */ new Map());
  }
  /**
   * Rebuild the approvals map from a serialized state.
   * @internal
   *
   * @param approvals - The approvals map to rebuild.
   */
  _rebuildApprovals(e) {
    y(this, de, new Map(Object.entries(e)));
  }
  /**
   * Check if a tool call has been approved.
   *
   * @param toolName - The name of the tool.
   * @param callId - The call ID of the tool call.
   * @returns `true` if the tool call has been approved, `false` if blocked and `undefined` if not yet approved or rejected.
   */
  isToolApproved({ toolName: e, callId: t }) {
    const r = u(this, de).get(e);
    if ((r == null ? void 0 : r.approved) === !0 && r.rejected === !0)
      return C.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"), !0;
    if ((r == null ? void 0 : r.approved) === !0)
      return !0;
    if ((r == null ? void 0 : r.rejected) === !0)
      return !1;
    const s = Array.isArray(r == null ? void 0 : r.approved) ? r.approved.includes(t) : !1, a = Array.isArray(r == null ? void 0 : r.rejected) ? r.rejected.includes(t) : !1;
    if (s && a)
      return C.warn(`Tool call ${t} is both approved and rejected at the same time. Approval takes precedence`), !0;
    if (s)
      return !0;
    if (a)
      return !1;
  }
  /**
   * Approve a tool call.
   *
   * @param toolName - The name of the tool.
   * @param callId - The call ID of the tool call.
   */
  approveTool(e, { alwaysApprove: t = !1 } = {}) {
    const r = e.rawItem.name;
    if (t) {
      u(this, de).set(r, {
        approved: !0,
        rejected: []
      });
      return;
    }
    const s = u(this, de).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.approved)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.approved.push(a);
    }
    u(this, de).set(r, s);
  }
  /**
   * Reject a tool call.
   *
   * @param approvalItem - The tool approval item to reject.
   */
  rejectTool(e, { alwaysReject: t = !1 } = {}) {
    const r = e.rawItem.name;
    if (t) {
      u(this, de).set(r, {
        approved: !1,
        rejected: !0
      });
      return;
    }
    const s = u(this, de).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.rejected)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.rejected.push(a);
    }
    u(this, de).set(r, s);
  }
  toJSON() {
    return {
      context: this.context,
      usage: this.usage,
      approvals: Object.fromEntries(u(this, de).entries())
    };
  }
}
de = new WeakMap();
class fa {
  constructor(e) {
    _(this, "state");
    this.state = e;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during
   * the agent run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Pn(this.input, this.newItems);
  }
  /**
   * The new items generated during the agent run. These include things like new messages, tool
   * calls and their outputs, etc.
   *
   * It does not include information about the agents and instead represents the model data.
   *
   * For the output including the agents, use the `newItems` property.
   */
  get output() {
    return Pn([], this.newItems);
  }
  /**
   * A copy of the original input items.
   */
  get input() {
    return this.state._originalInput;
  }
  /**
   * The run items generated during the agent run. This associates the model data with the agents.
   *
   * For the model data that can be used as inputs for the next agent run, use the `output` property.
   */
  get newItems() {
    return this.state._generatedItems;
  }
  /**
   * The raw LLM responses generated by the model during the agent run.
   */
  get rawResponses() {
    return this.state._modelResponses;
  }
  /**
   * The last response ID generated by the model during the agent run.
   */
  get lastResponseId() {
    const e = this.rawResponses;
    return e && e.length > 0 ? e[e.length - 1].responseId : void 0;
  }
  /**
   * The last agent that was run
   */
  get lastAgent() {
    return this.state._currentAgent;
  }
  /**
   * Guardrail results for the input messages.
   */
  get inputGuardrailResults() {
    return this.state._inputGuardrailResults;
  }
  /**
   * Guardrail results for the final output of the agent.
   */
  get outputGuardrailResults() {
    return this.state._outputGuardrailResults;
  }
  /**
   * Any interruptions that occurred during the agent run for example for tool approvals.
   */
  get interruptions() {
    var e;
    return ((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_interruption" ? this.state._currentStep.data.interruptions : [];
  }
  /**
   * The final output of the agent. If the output type was set to anything other than `text`,
   * this will be parsed either as JSON or using the Zod schema you provided.
   */
  get finalOutput() {
    var e;
    if (((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_final_output")
      return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);
    C.warn("Accessed finalOutput before agent run is completed.");
  }
}
class er extends fa {
  constructor(e) {
    super(e);
  }
}
var Kt, xt, _e, Ue, St, en, tn, nn;
class lu extends fa {
  constructor(t = {}) {
    super(t.state);
    /**
     * The current turn number
     */
    _(this, "currentTurn", 0);
    /**
     * The maximum number of turns that can be run
     */
    _(this, "maxTurns");
    T(this, Kt, null);
    T(this, xt);
    T(this, _e);
    T(this, Ue);
    T(this, St);
    T(this, en);
    T(this, tn);
    T(this, nn, !1);
    y(this, xt, t.signal), u(this, xt) && u(this, xt).addEventListener("abort", async () => {
      await u(this, Ue).cancel();
    }), y(this, Ue, new wo({
      start: (r) => {
        y(this, _e, r);
      },
      cancel: () => {
        y(this, nn, !0);
      }
    })), y(this, St, new Promise((r, s) => {
      y(this, en, r), y(this, tn, s);
    }));
  }
  /**
   * The current agent that is running
   */
  get currentAgent() {
    return this.lastAgent;
  }
  /**
   * @internal
   * Adds an item to the stream of output items
   */
  _addItem(t) {
    var r;
    this.cancelled || (r = u(this, _e)) == null || r.enqueue(t);
  }
  /**
   * @internal
   * Indicates that the stream has been completed
   */
  _done() {
    var t;
    !this.cancelled && u(this, _e) && (u(this, _e).close(), y(this, _e, void 0), (t = u(this, en)) == null || t.call(this));
  }
  /**
   * @internal
   * Handles an error in the stream loop.
   */
  _raiseError(t) {
    var r;
    !this.cancelled && u(this, _e) && (u(this, _e).error(t), y(this, _e, void 0)), y(this, Kt, t), (r = u(this, tn)) == null || r.call(this, t), u(this, St).catch((s) => {
      C.debug(`Resulted in an error: ${s}`);
    });
  }
  /**
   * Returns true if the stream has been cancelled.
   */
  get cancelled() {
    return u(this, nn);
  }
  /**
   * Returns the underlying readable stream.
   * @returns A readable stream of the agent run.
   */
  toStream() {
    return u(this, Ue);
  }
  /**
   * Await this promise to ensure that the stream has been completed if you are not consuming the
   * stream directly.
   */
  get completed() {
    return u(this, St);
  }
  /**
   * Error thrown during the run, if any.
   */
  get error() {
    return u(this, Kt);
  }
  toTextStream(t = {}) {
    const r = u(this, Ue).pipeThrough(new bo({
      transform(s, a) {
        if (s.type === "raw_model_stream_event" && s.data.type === "output_text_delta") {
          const i = la.parse(s.data);
          a.enqueue(i.delta);
        }
      }
    }));
    return t.compatibleWithNodeStreams ? vo.fromWeb(r) : r;
  }
  [Symbol.asyncIterator]() {
    return u(this, Ue)[Symbol.asyncIterator]();
  }
}
Kt = new WeakMap(), xt = new WeakMap(), _e = new WeakMap(), Ue = new WeakMap(), St = new WeakMap(), en = new WeakMap(), tn = new WeakMap(), nn = new WeakMap();
function ws(n) {
  return n.type === "function" ? {
    type: "function",
    name: n.name,
    description: n.description,
    parameters: n.parameters,
    strict: n.strict
  } : n.type === "computer" ? {
    type: "computer",
    name: n.name,
    environment: n.computer.environment,
    dimensions: n.computer.dimensions
  } : {
    type: "hosted_tool",
    name: n.name,
    providerData: n.providerData
  };
}
function bs(n) {
  return {
    toolName: n.toolName,
    toolDescription: n.toolDescription,
    inputJsonSchema: n.inputJsonSchema,
    strictJsonSchema: n.strictJsonSchema
  };
}
class qe {
  constructor() {
    _(this, "type", "base_item");
    _(this, "rawItem");
  }
  toJSON() {
    return {
      type: this.type,
      rawItem: this.rawItem
    };
  }
}
class Jn extends qe {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "message_output_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
  get content() {
    let t = "";
    for (const r of this.rawItem.content)
      r.type === "output_text" && (t += r.text);
    return t;
  }
}
class nt extends qe {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "tool_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class rt extends qe {
  constructor(t, r, s) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "output");
    _(this, "type", "tool_call_output_item");
    this.rawItem = t, this.agent = r, this.output = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      output: at(this.output)
    };
  }
}
class Rr extends qe {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "reasoning_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Dr extends qe {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "handoff_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Pr extends qe {
  constructor(t, r, s) {
    super();
    _(this, "rawItem");
    _(this, "sourceAgent");
    _(this, "targetAgent");
    _(this, "type", "handoff_output_item");
    this.rawItem = t, this.sourceAgent = r, this.targetAgent = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      sourceAgent: this.sourceAgent.toJSON(),
      targetAgent: this.targetAgent.toJSON()
    };
  }
}
class ke extends qe {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "tool_approval_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class pu extends qe {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "injected_message_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
function ha(n) {
  if (n.type !== "message" || n.role !== "assistant")
    return;
  const e = n.content[n.content.length - 1];
  if (e.type === "output_text")
    return e.text;
}
function fu(n) {
  return n.output.length === 0 ? "" : ha(n.output[n.output.length - 1]) || "";
}
class hu {
  /**
   * @param data The raw responses stream events from the LLM.
   */
  constructor(e) {
    _(this, "data");
    /**
     * The type of the event.
     */
    _(this, "type", "raw_model_stream_event");
    this.data = e;
  }
}
class mu {
  /**
   * @param name The name of the event.
   * @param item The item that was created.
   */
  constructor(e, t) {
    _(this, "name");
    _(this, "item");
    _(this, "type", "run_item_stream_event");
    this.name = e, this.item = t;
  }
}
class gu {
  /**
   * @param agent The new agent
   */
  constructor(e) {
    _(this, "agent");
    _(this, "type", "agent_updated_stream_event");
    this.agent = e;
  }
}
function xs(n, e, t, r) {
  var w;
  const s = [], a = [], i = [], o = [], d = [], c = [], p = new Map(r.map((b) => [b.toolName, b])), f = new Map(t.filter((b) => b.type === "function").map((b) => [b.name, b])), h = t.find((b) => b.type === "computer"), x = new Map(t.filter((b) => {
    var E;
    return b.type === "hosted_tool" && ((E = b.providerData) == null ? void 0 : E.type) === "mcp";
  }).map((b) => b).map((b) => [b.providerData.server_label, b]));
  for (const b of n.output) {
    if (b.type === "message")
      b.role === "assistant" && s.push(new Jn(b, e));
    else if (b.type === "hosted_tool_call") {
      s.push(new nt(b, e));
      const R = b.name;
      if (c.push(R), ((w = b.providerData) == null ? void 0 : w.type) === "mcp_approval_request" || b.name === "mcp_approval_request") {
        const z = b.providerData, Y = z.server_label, oe = x.get(Y);
        if (typeof oe > "u") {
          const Nt = `MCP server (${Y}) not found in Agent (${e.name})`;
          throw gt({
            message: Nt,
            data: { mcp_server_label: Y }
          }), new fe(Nt);
        }
        const ue = new ke({
          type: "hosted_tool_call",
          // We must use this name to align with the name sent from the servers
          name: z.name,
          id: z.id,
          status: "in_progress",
          providerData: z
        }, e);
        d.push({
          requestItem: ue,
          mcpTool: oe
        }), oe.providerData.on_approval || s.push(ue);
      }
    } else if (b.type === "reasoning")
      s.push(new Rr(b, e));
    else if (b.type === "computer_call") {
      if (s.push(new nt(b, e)), c.push("computer_use"), !h)
        throw gt({
          message: "Model produced computer action without a computer tool.",
          data: {
            agent_name: e.name
          }
        }), new fe("Model produced computer action without a computer tool.");
      o.push({
        toolCall: b,
        computer: h
      });
    }
    if (b.type !== "function_call")
      continue;
    c.push(b.name);
    const E = p.get(b.name);
    if (E)
      s.push(new Dr(b, e)), a.push({
        toolCall: b,
        handoff: E
      });
    else {
      const R = f.get(b.name);
      if (!R)
        throw gt({
          message: `Tool ${b.name} not found in agent ${e.name}.`,
          data: {
            tool_name: b.name,
            agent_name: e.name
          }
        }), new fe(`Tool ${b.name} not found in agent ${e.name}.`);
      s.push(new nt(b, e)), i.push({
        toolCall: b,
        tool: R
      });
    }
  }
  return {
    newItems: s,
    handoffs: a,
    functions: i,
    computerActions: o,
    mcpApprovalRequests: d,
    toolsUsed: c,
    hasToolsOrApprovalsToRun() {
      return a.length > 0 || i.length > 0 || d.length > 0 || o.length > 0;
    }
  };
}
const _u = pe("type", [
  g({
    type: m("next_step_handoff"),
    newAgent: L()
  }),
  g({
    type: m("next_step_final_output"),
    output: l()
  }),
  g({
    type: m("next_step_run_again")
  }),
  g({
    type: m("next_step_interruption"),
    data: K(l(), L())
  })
]);
class ye {
  constructor(e, t, r, s, a) {
    _(this, "originalInput");
    _(this, "modelResponse");
    _(this, "preStepItems");
    _(this, "newStepItems");
    _(this, "nextStep");
    this.originalInput = e, this.modelResponse = t, this.preStepItems = r, this.newStepItems = s, this.nextStep = a;
  }
  /**
   * The items generated during the agent run (i.e. everything generated after originalInput)
   */
  get generatedItems() {
    return this.preStepItems.concat(this.newStepItems);
  }
}
function Ss(n, e, t) {
  return n.resetToolChoice && e.hasUsedTools(n) ? { ...t, toolChoice: void 0 } : t;
}
async function Ts(n, e, t, r, s, a, i) {
  const o = t.filter((w) => w instanceof ke && "callId" in w.rawItem && w.rawItem.type === "function_call").map((w) => w.rawItem.callId), d = s.functions.filter((w) => o.includes(w.toolCall.callId)), c = await ma(n, d, a, i), p = c.map((w) => w.runItem), f = s.mcpApprovalRequests.filter((w) => {
    var b;
    return w.requestItem.type === "tool_approval_item" && w.requestItem.rawItem.type === "hosted_tool_call" && ((b = w.requestItem.rawItem.providerData) == null ? void 0 : b.type) === "mcp_approval_request";
  });
  for (const w of f) {
    const b = w.requestItem.rawItem.id, E = i._context.isToolApproved({
      // Since this item name must be the same with the one sent from Responses API server
      toolName: w.requestItem.rawItem.name,
      callId: b
    });
    if (typeof E < "u") {
      const R = {
        approve: E,
        approval_request_id: b,
        reason: void 0
      };
      p.push(new nt({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: R
      }, n));
    }
  }
  const h = await ga(n, c, i), x = t.filter((w) => !(w instanceof ke));
  return h.isFinalOutput ? (a.emit("agent_end", i._context, n, h.finalOutput), n.emit("agent_end", i._context, h.finalOutput), new ye(e, r, x, p, {
    type: "next_step_final_output",
    output: h.finalOutput
  })) : h.isInterrupted ? new ye(e, r, x, p, {
    type: "next_step_interruption",
    data: {
      interruptions: h.interruptions
    }
  }) : new ye(e, r, x, p, { type: "next_step_run_again" });
}
async function ks(n, e, t, r, s, a, i) {
  const o = t;
  let d = s.newItems;
  const [c, p] = await Promise.all([
    ma(n, s.functions, a, i),
    vu(n, s.computerActions, a, i._context)
  ]);
  d = d.concat(c.map((w) => w.runItem));
  for (const w of c)
    if (w.type === "function_output" && w.output && typeof w.output == "object" && w.output.type === "message") {
      const b = new pu(w.output, n);
      d.push(b);
    }
  if (d = d.concat(p), s.mcpApprovalRequests.length > 0)
    for (const w of s.mcpApprovalRequests) {
      const b = w.mcpTool.providerData, E = w.requestItem.rawItem.providerData;
      if (b.on_approval) {
        const R = await b.on_approval(i._context, w.requestItem), z = {
          approve: R.approve,
          approval_request_id: E.id,
          reason: R.reason
        };
        d.push(new nt({
          type: "hosted_tool_call",
          name: "mcp_approval_response",
          providerData: z
        }, n));
      } else {
        d.push(w.requestItem);
        const R = {
          type: "hosted_mcp_tool_approval",
          tool: w.mcpTool,
          runItem: new ke({
            type: "hosted_tool_call",
            name: E.name,
            id: E.id,
            arguments: E.arguments,
            status: "in_progress",
            providerData: E
          }, n)
        };
        c.push(R);
      }
    }
  if (s.handoffs.length > 0)
    return await wu(n, e, o, d, r, s.handoffs, a, i._context);
  const f = await ga(n, c, i);
  if (f.isFinalOutput)
    return a.emit("agent_end", i._context, n, f.finalOutput), n.emit("agent_end", i._context, f.finalOutput), new ye(e, r, o, d, {
      type: "next_step_final_output",
      output: f.finalOutput
    });
  if (f.isInterrupted)
    return new ye(e, r, o, d, {
      type: "next_step_interruption",
      data: {
        interruptions: f.interruptions
      }
    });
  const h = d.filter((w) => w instanceof Jn), x = h.length > 0 ? ha(h[h.length - 1].rawItem) : void 0;
  if (!x)
    return new ye(e, r, o, d, { type: "next_step_run_again" });
  if (n.outputType === "text" && !s.hasToolsOrApprovalsToRun())
    return new ye(e, r, o, d, {
      type: "next_step_final_output",
      output: x
    });
  if (n.outputType !== "text" && x) {
    const { parser: w } = Sr(n.outputType, "final_output"), [b] = await xr(() => w(x));
    if (b)
      throw gt({
        message: "Invalid output type",
        data: {
          error: String(b)
        }
      }), new fe("Invalid output type");
    return new ye(e, r, o, d, { type: "next_step_final_output", output: x });
  }
  return new ye(e, r, o, d, { type: "next_step_run_again" });
}
function jt(n, e) {
  return {
    type: "function_call_result",
    name: n.name,
    callId: n.callId,
    status: "completed",
    output: {
      type: "text",
      text: at(e)
    }
  };
}
async function ma(n, e, t, r) {
  async function s(a) {
    let i = a.toolCall.arguments;
    if (a.tool.parameters && (st(a.tool.parameters) ? i = a.tool.parameters.parse(i) : i = JSON.parse(i)), await a.tool.needsApproval(r._context, i, a.toolCall.callId)) {
      const d = r._context.isToolApproved({
        toolName: a.tool.name,
        callId: a.toolCall.callId
      });
      if (d === !1)
        return _s(async (c) => {
          const p = "Tool execution was not approved.";
          return c.setError({
            message: p,
            data: {
              tool_name: a.tool.name,
              error: `Tool execution for ${a.toolCall.callId} was manually rejected by user.`
            }
          }), c.spanData.output = p, {
            type: "function_output",
            tool: a.tool,
            output: p,
            runItem: new rt(jt(a.toolCall, p), n, p)
          };
        }, {
          data: {
            name: a.tool.name
          }
        });
      if (d !== !0)
        return {
          type: "function_approval",
          tool: a.tool,
          runItem: new ke(a.toolCall, n)
        };
    }
    return _s(async (d) => {
      t.config.traceIncludeSensitiveData && (d.spanData.input = a.toolCall.arguments);
      try {
        t.emit("agent_tool_start", r._context, n, a.tool, {
          toolCall: a.toolCall
        }), n.emit("agent_tool_start", r._context, a.tool, {
          toolCall: a.toolCall
        });
        const c = await a.tool.invoke(r._context, a.toolCall.arguments);
        if (c && typeof c == "object" && c.type === "message") {
          const f = "Message with rich content injected into conversation";
          return t.emit("agent_tool_end", r._context, n, a.tool, f, { toolCall: a.toolCall }), n.emit("agent_tool_end", r._context, a.tool, f, { toolCall: a.toolCall }), t.config.traceIncludeSensitiveData && (d.spanData.output = f), {
            type: "function_output",
            tool: a.tool,
            output: c,
            // Keep the original message object for processing
            runItem: new rt(jt(a.toolCall, f), n, c)
          };
        }
        const p = at(c);
        return t.emit("agent_tool_end", r._context, n, a.tool, p, { toolCall: a.toolCall }), n.emit("agent_tool_end", r._context, a.tool, p, { toolCall: a.toolCall }), t.config.traceIncludeSensitiveData && (d.spanData.output = p), {
          type: "function_output",
          tool: a.tool,
          output: c,
          runItem: new rt(jt(a.toolCall, c), n, c)
        };
      } catch (c) {
        throw d.setError({
          message: "Error running tool",
          data: {
            tool_name: a.tool.name,
            error: String(c)
          }
        }), c;
      }
    }, {
      data: {
        name: a.tool.name
      }
    });
  }
  try {
    return await Promise.all(e.map(s));
  } catch (a) {
    throw new Ei(`Failed to run function tools: ${a}`, a, r);
  }
}
async function yu(n, e) {
  const t = e.action;
  let r;
  switch (t.type) {
    case "click":
      await n.click(t.x, t.y, t.button);
      break;
    case "double_click":
      await n.doubleClick(t.x, t.y);
      break;
    case "drag":
      await n.drag(t.path.map((s) => [s.x, s.y]));
      break;
    case "keypress":
      await n.keypress(t.keys);
      break;
    case "move":
      await n.move(t.x, t.y);
      break;
    case "screenshot":
      r = await n.screenshot();
      break;
    case "scroll":
      await n.scroll(t.x, t.y, t.scroll_x, t.scroll_y);
      break;
    case "type":
      await n.type(t.text);
      break;
    case "wait":
      await n.wait();
      break;
  }
  if (typeof r < "u" || typeof n.screenshot == "function" && (r = await n.screenshot(), typeof r < "u"))
    return r;
  throw new Error("Computer does not implement screenshot()");
}
async function vu(n, e, t, r, s = void 0) {
  const a = s ?? C, i = [];
  for (const o of e) {
    const d = o.computer.computer, c = o.toolCall;
    t.emit("agent_tool_start", r, n, o.computer, {
      toolCall: c
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, o.computer, { toolCall: c });
    let p;
    try {
      p = await yu(d, c);
    } catch (x) {
      a.error("Failed to execute computer action:", x), p = "";
    }
    t.emit("agent_tool_end", r, n, o.computer, p, {
      toolCall: c
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, o.computer, p, {
      toolCall: c
    });
    const f = p ? `data:image/png;base64,${p}` : "", h = {
      type: "computer_call_result",
      callId: c.callId,
      output: { type: "computer_screenshot", data: f }
    };
    i.push(new rt(h, n, f));
  }
  return i;
}
async function wu(n, e, t, r, s, a, i, o) {
  if (r = [...r], a.length === 0)
    return C.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."), new ye(e, s, t, r, { type: "next_step_run_again" });
  if (a.length > 1) {
    const c = "Multiple handoffs detected, ignoring this one.";
    for (let p = 1; p < a.length; p++)
      r.push(new rt(jt(a[p].toolCall, c), n, c));
  }
  const d = a[0];
  return $o(async (c) => {
    const p = d.handoff, f = await p.onInvokeHandoff(o, d.toolCall.arguments);
    if (c.spanData.to_agent = f.name, a.length > 1) {
      const x = a.map((w) => w.handoff.agentName);
      c.setError({
        message: "Multiple handoffs requested",
        data: {
          requested_agents: x
        }
      });
    }
    r.push(new Pr(jt(d.toolCall, sa(f)), n, f)), i.emit("agent_handoff", o, n, f), n.emit("agent_handoff", o, f);
    const h = p.inputFilter ?? i.config.handoffInputFilter;
    if (h) {
      C.debug("Filtering inputs for handoff"), typeof h != "function" && c.setError({
        message: "Invalid input filter",
        data: {
          details: "not callable"
        }
      });
      const x = {
        inputHistory: Array.isArray(e) ? [...e] : e,
        preHandoffItems: [...t],
        newItems: [...r]
      }, w = h(x);
      e = w.inputHistory, t = w.preHandoffItems, r = w.newItems;
    }
    return new ye(e, s, t, r, { type: "next_step_handoff", newAgent: f });
  }, {
    data: {
      from_agent: n.name
    }
  });
}
const hn = {
  isFinalOutput: !1,
  isInterrupted: void 0
};
async function ga(n, e, t) {
  if (e.length === 0)
    return hn;
  const r = e.filter((i) => i.runItem instanceof ke).map((i) => i.runItem);
  if (r.length > 0)
    return {
      isFinalOutput: !1,
      isInterrupted: !0,
      interruptions: r
    };
  if (n.toolUseBehavior === "run_llm_again")
    return hn;
  const s = e[0];
  if (n.toolUseBehavior === "stop_on_first_tool")
    return (s == null ? void 0 : s.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: at(s.output)
    } : hn;
  const a = n.toolUseBehavior;
  if (typeof a == "object") {
    const i = e.find((o) => a.stopAtToolNames.includes(o.tool.name));
    return (i == null ? void 0 : i.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: at(i.output)
    } : hn;
  }
  if (typeof a == "function")
    return a(t._context, e);
  throw new Q(`Invalid toolUseBehavior: ${a}`, t);
}
function Is(n, e) {
  for (const t of e.newStepItems) {
    let r;
    if (t instanceof Jn)
      r = "message_output_created";
    else if (t instanceof Dr)
      r = "handoff_requested";
    else if (t instanceof Pr)
      r = "handoff_occurred";
    else if (t instanceof nt)
      r = "tool_called";
    else if (t instanceof rt)
      r = "tool_output";
    else if (t instanceof Rr)
      r = "reasoning_item_created";
    else if (t instanceof ke)
      r = "tool_approval_requested";
    else {
      C.warn("Unknown item type: ", t);
      continue;
    }
    n._addItem(new mu(r, t));
  }
}
var Tt;
class As {
  constructor() {
    T(this, Tt, /* @__PURE__ */ new Map());
  }
  addToolUse(e, t) {
    u(this, Tt).set(e, t);
  }
  hasUsedTools(e) {
    return u(this, Tt).has(e);
  }
  toJSON() {
    return Object.fromEntries(Array.from(u(this, Tt).entries()).map(([e, t]) => [e.name, t]));
  }
}
Tt = new WeakMap();
const gn = "1.0", bu = m(gn), we = g({
  name: l()
}), xu = g({
  object: m("trace.span"),
  id: l(),
  trace_id: l(),
  parent_id: l().nullable(),
  started_at: l().nullable(),
  ended_at: l().nullable(),
  error: g({
    message: l(),
    data: K(l(), L()).optional()
  }).nullable(),
  span_data: K(l(), L())
}), _a = xu.extend({
  previous_span: fo(() => _a).optional()
}), ya = g({
  requests: A(),
  inputTokens: A(),
  outputTokens: A(),
  totalTokens: A()
}), Cs = g({
  usage: ya,
  output: B(Nr),
  responseId: l().optional(),
  providerData: K(l(), L()).optional()
}), va = pe("type", [
  g({
    type: m("message_output_item"),
    rawItem: Fn,
    agent: we
  }),
  g({
    type: m("tool_call_item"),
    rawItem: iu.or(Bt),
    agent: we
  }),
  g({
    type: m("tool_call_output_item"),
    rawItem: gr,
    agent: we,
    output: l()
  }),
  g({
    type: m("reasoning_item"),
    rawItem: Or,
    agent: we
  }),
  g({
    type: m("handoff_call_item"),
    rawItem: qt,
    agent: we
  }),
  g({
    type: m("handoff_output_item"),
    rawItem: gr,
    sourceAgent: we,
    targetAgent: we
  }),
  g({
    type: m("tool_approval_item"),
    rawItem: qt.or(Bt),
    agent: we
  })
]), Su = g({
  object: m("trace"),
  id: l(),
  workflow_name: l(),
  group_id: l().nullable(),
  metadata: K(l(), L())
}), Tu = g({
  newItems: B(va),
  toolsUsed: B(l()),
  handoffs: B(g({
    toolCall: L(),
    handoff: L()
  })),
  functions: B(g({
    toolCall: L(),
    tool: L()
  })),
  computerActions: B(g({
    toolCall: L(),
    computer: L()
  })),
  mcpApprovalRequests: B(g({
    requestItem: g({
      // protocol.HostedToolCallItem
      rawItem: g({
        type: m("hosted_tool_call"),
        name: l(),
        arguments: l().optional(),
        status: l().optional(),
        output: l().optional(),
        // this always exists but marked as optional for early version compatibility; when releasing 1.0, we can remove the nullable and optional
        providerData: K(l(), L()).nullable().optional()
      })
    }),
    // HostedMCPTool
    mcpTool: g({
      type: m("hosted_tool"),
      name: m("hosted_mcp"),
      providerData: K(l(), L())
    })
  })).optional()
}), wa = g({
  tripwireTriggered: Pt(),
  outputInfo: L()
}), ku = g({
  guardrail: g({
    type: m("input"),
    name: l()
  }),
  output: wa
}), Iu = g({
  guardrail: g({
    type: m("output"),
    name: l()
  }),
  agentOutput: L(),
  agent: we,
  output: wa
}), Es = g({
  $schemaVersion: bu,
  currentTurn: A(),
  currentAgent: we,
  originalInput: l().or(B(ou)),
  modelResponses: B(Cs),
  context: g({
    usage: ya,
    approvals: K(l(), g({
      approved: B(l()).or(Pt()),
      rejected: B(l()).or(Pt())
    })),
    context: K(l(), L())
  }),
  toolUseTracker: K(l(), B(l())),
  maxTurns: A(),
  currentAgentSpan: _a.nullable().optional(),
  noActiveAgentRun: Pt(),
  inputGuardrailResults: B(ku),
  outputGuardrailResults: B(Iu),
  currentStep: _u.optional(),
  lastModelResponse: Cs.optional(),
  generatedItems: B(va),
  lastProcessedResponse: Tu.optional(),
  trace: Su.nullable()
});
class Ve {
  constructor(e, t, r, s) {
    /**
     * Current turn number in the conversation.
     */
    _(this, "_currentTurn", 0);
    /**
     * The agent currently handling the conversation.
     */
    _(this, "_currentAgent");
    /**
     * Original user input prior to any processing.
     */
    _(this, "_originalInput");
    /**
     * Responses from the model so far.
     */
    _(this, "_modelResponses");
    /**
     * Active tracing span for the current agent if tracing is enabled.
     */
    _(this, "_currentAgentSpan");
    /**
     * Run context tracking approvals, usage, and other metadata.
     */
    _(this, "_context");
    /**
     * Tracks what tools each agent has used.
     */
    _(this, "_toolUseTracker");
    /**
     * Items generated by the agent during the run.
     */
    _(this, "_generatedItems");
    /**
     * Maximum allowed turns before forcing termination.
     */
    _(this, "_maxTurns");
    /**
     * Whether the run has an active agent step in progress.
     */
    _(this, "_noActiveAgentRun", !0);
    /**
     * Last model response for the previous turn.
     */
    _(this, "_lastTurnResponse");
    /**
     * Results from input guardrails applied to the run.
     */
    _(this, "_inputGuardrailResults");
    /**
     * Results from output guardrails applied to the run.
     */
    _(this, "_outputGuardrailResults");
    /**
     * Next step computed for the agent to take.
     */
    _(this, "_currentStep");
    /**
     * Parsed model response after applying guardrails and tools.
     */
    _(this, "_lastProcessedResponse");
    /**
     * Trace associated with this run if tracing is enabled.
     */
    _(this, "_trace", null);
    this._context = e, this._originalInput = structuredClone(t), this._modelResponses = [], this._currentAgentSpan = void 0, this._currentAgent = r, this._toolUseTracker = new As(), this._generatedItems = [], this._maxTurns = s, this._inputGuardrailResults = [], this._outputGuardrailResults = [], this._trace = Lt();
  }
  /**
   * Returns all interruptions if the current step is an interruption otherwise returns an empty array.
   */
  getInterruptions() {
    var e;
    return ((e = this._currentStep) == null ? void 0 : e.type) !== "next_step_interruption" ? [] : this._currentStep.data.interruptions;
  }
  /**
   * Approves a tool call requested by the agent through an interruption and approval item request.
   *
   * To approve the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only approve the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysApprove` option to `true`.
   *
   * @param approvalItem - The tool call approval item to approve.
   * @param options - Options for the approval.
   */
  approve(e, t = { alwaysApprove: !1 }) {
    this._context.approveTool(e, t);
  }
  /**
   * Rejects a tool call requested by the agent through an interruption and approval item request.
   *
   * To reject the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only reject the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysReject` option to `true`.
   *
   * @param approvalItem - The tool call approval item to reject.
   * @param options - Options for the rejection.
   */
  reject(e, t = { alwaysReject: !1 }) {
    this._context.rejectTool(e, t);
  }
  /**
   * Serializes the run state to a JSON object.
   *
   * This method is used to serialize the run state to a JSON object that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toJSON() {
    var r;
    const e = {
      $schemaVersion: gn,
      currentTurn: this._currentTurn,
      currentAgent: {
        name: this._currentAgent.name
      },
      originalInput: this._originalInput,
      modelResponses: this._modelResponses.map((s) => ({
        usage: {
          requests: s.usage.requests,
          inputTokens: s.usage.inputTokens,
          outputTokens: s.usage.outputTokens,
          totalTokens: s.usage.totalTokens
        },
        output: s.output,
        responseId: s.responseId,
        providerData: s.providerData
      })),
      context: this._context.toJSON(),
      toolUseTracker: this._toolUseTracker.toJSON(),
      maxTurns: this._maxTurns,
      currentAgentSpan: (r = this._currentAgentSpan) == null ? void 0 : r.toJSON(),
      noActiveAgentRun: this._noActiveAgentRun,
      inputGuardrailResults: this._inputGuardrailResults,
      outputGuardrailResults: this._outputGuardrailResults.map((s) => ({
        ...s,
        agent: s.agent.toJSON()
      })),
      currentStep: this._currentStep,
      lastModelResponse: this._lastTurnResponse,
      generatedItems: this._generatedItems.map((s) => s.toJSON()),
      lastProcessedResponse: this._lastProcessedResponse,
      trace: this._trace ? this._trace.toJSON() : null
    }, t = Es.safeParse(e);
    if (!t.success)
      throw new Ci(`Failed to serialize run state. ${t.error.message}`);
    return t.data;
  }
  /**
   * Serializes the run state to a string.
   *
   * This method is used to serialize the run state to a string that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toString() {
    return JSON.stringify(this.toJSON());
  }
  /**
   * Deserializes a run state from a string.
   *
   * This method is used to deserialize a run state from a string that was serialized using the
   * `toString` method.
   */
  static async fromString(e, t) {
    var f, h, x, w, b;
    const [r, s] = await xr(() => JSON.parse(t));
    if (r)
      throw new Q(`Failed to parse run state. ${r instanceof Error ? r.message : String(r)}`);
    const a = s.$schemaVersion;
    if (!a)
      throw new Q("Run state is missing schema version");
    if (a !== gn)
      throw new Q(`Run state schema version ${a} is not supported. Please use version ${gn}`);
    const i = Es.parse(JSON.parse(t)), o = Au(e), d = new ht(i.context.context);
    d._rebuildApprovals(i.context.approvals);
    const c = o.get(i.currentAgent.name);
    if (!c)
      throw new Q(`Agent ${i.currentAgent.name} not found`);
    const p = new Ve(d, "", c, i.maxTurns);
    p._currentTurn = i.currentTurn, p._toolUseTracker = new As();
    for (const [E, R] of Object.entries(i.toolUseTracker))
      p._toolUseTracker.addToolUse(o.get(E), R);
    if (i.currentAgentSpan) {
      i.trace || C.warn("Trace is not set, skipping tracing setup");
      const E = Ie().createTrace({
        traceId: (f = i.trace) == null ? void 0 : f.id,
        name: (h = i.trace) == null ? void 0 : h.workflow_name,
        groupId: ((x = i.trace) == null ? void 0 : x.group_id) ?? void 0,
        metadata: (w = i.trace) == null ? void 0 : w.metadata
      });
      p._currentAgentSpan = ba(E, i.currentAgentSpan), p._trace = E;
    }
    return p._noActiveAgentRun = i.noActiveAgentRun, p._inputGuardrailResults = i.inputGuardrailResults, p._outputGuardrailResults = i.outputGuardrailResults.map((E) => ({
      ...E,
      agent: o.get(E.agent.name)
    })), p._currentStep = i.currentStep, p._originalInput = i.originalInput, p._modelResponses = i.modelResponses.map(Os), p._lastTurnResponse = i.lastModelResponse ? Os(i.lastModelResponse) : void 0, p._generatedItems = i.generatedItems.map((E) => xa(E, o)), p._lastProcessedResponse = i.lastProcessedResponse ? await Cu(o, p._currentAgent, p._context, i.lastProcessedResponse) : void 0, ((b = i.currentStep) == null ? void 0 : b.type) === "next_step_handoff" && (p._currentStep = {
      type: "next_step_handoff",
      newAgent: o.get(i.currentStep.newAgent.name)
    }), p;
  }
}
function Au(n) {
  const e = /* @__PURE__ */ new Map(), t = [n];
  for (; t.length > 0; ) {
    const r = t.shift();
    if (!e.has(r.name)) {
      e.set(r.name, r);
      for (const s of r.handoffs)
        s instanceof dt ? e.has(s.name) || t.push(s) : s.agent && (e.has(s.agent.name) || t.push(s.agent));
    }
  }
  return e;
}
function ba(n, e) {
  const t = e.span_data, r = e.previous_span ? ba(n, e.previous_span) : void 0, s = Ie().createSpan({
    spanId: e.id,
    traceId: e.trace_id,
    parentId: e.parent_id ?? void 0,
    startedAt: e.started_at ?? void 0,
    endedAt: e.ended_at ?? void 0,
    data: t
  }, n);
  return s.previousSpan = r, s;
}
function Os(n) {
  const e = new Un();
  return e.requests = n.usage.requests, e.inputTokens = n.usage.inputTokens, e.outputTokens = n.usage.outputTokens, e.totalTokens = n.usage.totalTokens, {
    usage: e,
    output: n.output.map((t) => Nr.parse(t)),
    responseId: n.responseId,
    providerData: n.providerData
  };
}
function xa(n, e) {
  switch (n.type) {
    case "message_output_item":
      return new Jn(n.rawItem, e.get(n.agent.name));
    case "tool_call_item":
      return new nt(n.rawItem, e.get(n.agent.name));
    case "tool_call_output_item":
      return new rt(n.rawItem, e.get(n.agent.name), n.output);
    case "reasoning_item":
      return new Rr(n.rawItem, e.get(n.agent.name));
    case "handoff_call_item":
      return new Dr(n.rawItem, e.get(n.agent.name));
    case "handoff_output_item":
      return new Pr(n.rawItem, e.get(n.sourceAgent.name), e.get(n.targetAgent.name));
    case "tool_approval_item":
      return new ke(n.rawItem, e.get(n.agent.name));
  }
}
async function Cu(n, e, t, r) {
  const s = await e.getAllTools(t), a = new Map(s.filter((c) => c.type === "function").map((c) => [c.name, c])), i = new Map(s.filter((c) => c.type === "computer").map((c) => [c.name, c])), o = new Map(e.handoffs.map((c) => c instanceof dt ? [c.name, ia(c)] : [c.toolName, c])), d = {
    newItems: r.newItems.map((c) => xa(c, n)),
    toolsUsed: r.toolsUsed,
    handoffs: r.handoffs.map((c) => {
      if (!o.has(c.handoff.toolName))
        throw new Q(`Handoff ${c.handoff.toolName} not found`);
      return {
        toolCall: c.toolCall,
        handoff: o.get(c.handoff.toolName)
      };
    }),
    functions: await Promise.all(r.functions.map(async (c) => {
      if (!a.has(c.tool.name))
        throw new Q(`Tool ${c.tool.name} not found`);
      return {
        toolCall: c.toolCall,
        tool: a.get(c.tool.name)
      };
    })),
    computerActions: r.computerActions.map((c) => {
      const p = c.computer.name;
      if (!i.has(p))
        throw new Q(`Computer tool ${p} not found`);
      return {
        toolCall: c.toolCall,
        computer: i.get(p)
      };
    }),
    mcpApprovalRequests: (r.mcpApprovalRequests ?? []).map((c) => ({
      requestItem: new ke(c.requestItem.rawItem, e),
      mcpTool: c.mcpTool
    }))
  };
  return {
    ...d,
    hasToolsOrApprovalsToRun() {
      return d.handoffs.length > 0 || d.functions.length > 0 || d.mcpApprovalRequests.length > 0 || d.computerActions.length > 0;
    }
  };
}
const Ns = 10;
function Rs(n, e) {
  return n ? !1 : e ? !0 : "enabled_without_data";
}
function Pn(n, e) {
  const t = e.filter((r) => r.type !== "tool_approval_item").map((r) => r.rawItem);
  return typeof n == "string" && (n = [{ type: "message", role: "user", content: n }]), [...n, ...t];
}
var re, _r, yr, vr, Sa, wr;
class Eu extends qo {
  constructor(t = {}) {
    super();
    T(this, re);
    _(this, "config");
    _(this, "inputGuardrailDefs");
    _(this, "outputGuardrailDefs");
    this.config = {
      modelProvider: t.modelProvider ?? zo(),
      model: t.model,
      modelSettings: t.modelSettings,
      handoffInputFilter: t.handoffInputFilter,
      inputGuardrails: t.inputGuardrails,
      outputGuardrails: t.outputGuardrails,
      tracingDisabled: t.tracingDisabled ?? !1,
      traceIncludeSensitiveData: t.traceIncludeSensitiveData ?? !0,
      workflowName: t.workflowName ?? "Agent workflow",
      traceId: t.traceId,
      groupId: t.groupId,
      traceMetadata: t.traceMetadata
    }, this.inputGuardrailDefs = (t.inputGuardrails ?? []).map(vs), this.outputGuardrailDefs = (t.outputGuardrails ?? []).map(mr);
  }
  run(t, r, s = {
    stream: !1,
    context: void 0
  }) {
    return r instanceof Ve && r._trace ? ko(r._trace, async () => (r._currentAgentSpan && mn(r._currentAgentSpan), s != null && s.stream ? $(this, re, wr).call(this, t, r, s) : $(this, re, _r).call(this, t, r, s))) : Io(async () => s != null && s.stream ? $(this, re, wr).call(this, t, r, s) : $(this, re, _r).call(this, t, r, s), {
      traceId: this.config.traceId,
      name: this.config.workflowName,
      groupId: this.config.groupId,
      metadata: this.config.traceMetadata
    });
  }
}
re = new WeakSet(), _r = async function(t, r, s) {
  return pr(async () => {
    var i, o;
    const a = r instanceof Ve ? r : new Ve(s.context instanceof ht ? s.context : new ht(s.context), r, t, s.maxTurns ?? Ns);
    try {
      for (; ; ) {
        let d = Ds(a._currentAgent.model, this.config.model);
        if (typeof d == "string" && (d = await this.config.modelProvider.getModel(d)), a._currentStep = a._currentStep ?? {
          type: "next_step_run_again"
        }, a._currentStep.type === "next_step_interruption") {
          if (C.debug("Continuing from interruption"), !a._lastTurnResponse || !a._lastProcessedResponse)
            throw new Q("No model response found in previous state", a);
          const c = await Ts(a._currentAgent, a._originalInput, a._generatedItems, a._lastTurnResponse, a._lastProcessedResponse, this, a);
          if (a._toolUseTracker.addToolUse(a._currentAgent, a._lastProcessedResponse.toolsUsed), a._originalInput = c.originalInput, a._generatedItems = c.generatedItems, a._currentStep = c.nextStep, c.nextStep.type === "next_step_interruption")
            return new er(a);
          continue;
        }
        if (a._currentStep.type === "next_step_run_again") {
          const c = [];
          if (a._currentAgent.handoffs && c.push(...a._currentAgent.handoffs.map(Dn)), !a._currentAgentSpan) {
            const R = c.map((z) => z.agentName);
            a._currentAgentSpan = gs({
              data: {
                name: a._currentAgent.name,
                handoffs: R,
                output_type: a._currentAgent.outputSchemaName
              }
            }), a._currentAgentSpan.start(), mn(a._currentAgentSpan);
          }
          const p = await a._currentAgent.getAllTools(a._context), f = p.map((R) => ws(R)), h = c.map((R) => bs(R));
          if (a._currentAgentSpan && (a._currentAgentSpan.spanData.tools = p.map((R) => R.name)), a._currentTurn++, a._currentTurn > a._maxTurns)
            throw (i = a._currentAgentSpan) == null || i.setError({
              message: "Max turns exceeded",
              data: { max_turns: a._maxTurns }
            }), new Wr(`Max turns (${a._maxTurns}) exceeded`, a);
          C.debug(`Running agent ${a._currentAgent.name} (turn ${a._currentTurn})`), a._currentTurn === 1 && await $(this, re, yr).call(this, a);
          const x = Pn(a._originalInput, a._generatedItems);
          a._noActiveAgentRun && (a._currentAgent.emit("agent_start", a._context, a._currentAgent), this.emit("agent_start", a._context, a._currentAgent));
          let w = {
            ...this.config.modelSettings,
            ...a._currentAgent.modelSettings
          };
          w = Ss(a._currentAgent, a._toolUseTracker, w), a._lastTurnResponse = await d.getResponse({
            systemInstructions: await a._currentAgent.getSystemPrompt(a._context),
            prompt: await a._currentAgent.getPrompt(a._context),
            input: x,
            previousResponseId: s.previousResponseId,
            modelSettings: w,
            tools: f,
            outputType: Qr(a._currentAgent.outputType),
            handoffs: h,
            tracing: Rs(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: s.signal
          }), a._modelResponses.push(a._lastTurnResponse), a._context.usage.add(a._lastTurnResponse.usage), a._noActiveAgentRun = !1;
          const b = xs(a._lastTurnResponse, a._currentAgent, p, c);
          a._lastProcessedResponse = b;
          const E = await ks(a._currentAgent, a._originalInput, a._generatedItems, a._lastTurnResponse, a._lastProcessedResponse, this, a);
          a._toolUseTracker.addToolUse(a._currentAgent, a._lastProcessedResponse.toolsUsed), a._originalInput = E.originalInput, a._generatedItems = E.generatedItems, a._currentStep = E.nextStep;
        }
        if (a._currentStep && a._currentStep.type === "next_step_final_output")
          return await $(this, re, vr).call(this, a, a._currentStep.output), this.emit("agent_end", a._context, a._currentAgent, a._currentStep.output), a._currentAgent.emit("agent_end", a._context, a._currentStep.output), new er(a);
        if (a._currentStep && a._currentStep.type === "next_step_handoff")
          a._currentAgent = a._currentStep.newAgent, a._currentAgentSpan && (a._currentAgentSpan.end(), Dt(), a._currentAgentSpan = void 0), a._noActiveAgentRun = !0, a._currentStep = { type: "next_step_run_again" };
        else {
          if (a._currentStep && a._currentStep.type === "next_step_interruption")
            return new er(a);
          C.debug("Running next loop");
        }
      }
    } catch (d) {
      throw a._currentAgentSpan && a._currentAgentSpan.setError({
        message: "Error in agent run",
        data: { error: String(d) }
      }), d;
    } finally {
      a._currentAgentSpan && (((o = a._currentStep) == null ? void 0 : o.type) !== "next_step_interruption" && a._currentAgentSpan.end(), Dt());
    }
  });
}, yr = async function(t) {
  const r = this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(vs));
  if (r.length > 0) {
    const s = {
      agent: t._currentAgent,
      input: t._originalInput,
      context: t._context
    };
    try {
      const a = await Promise.all(r.map(async (i) => ys(async (o) => {
        const d = await i.run(s);
        return o.spanData.triggered = d.output.tripwireTriggered, d;
      }, { data: { name: i.name } }, t._currentAgentSpan)));
      for (const i of a)
        if (i.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: i.guardrail.name }
          }), new Xr(`Input guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`, i, t);
    } catch (a) {
      throw a instanceof Xr ? a : (t._currentTurn--, new Yr(`Input guardrail failed to complete: ${a}`, a, t));
    }
  }
}, vr = async function(t, r) {
  const s = this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(mr));
  if (s.length > 0) {
    const a = t._currentAgent.processFinalOutput(r), i = {
      agent: t._currentAgent,
      agentOutput: a,
      context: t._context,
      details: { modelResponse: t._lastTurnResponse }
    };
    try {
      const o = await Promise.all(s.map(async (d) => ys(async (c) => {
        const p = await d.run(i);
        return c.spanData.triggered = p.output.tripwireTriggered, p;
      }, { data: { name: d.name } }, t._currentAgentSpan)));
      for (const d of o)
        if (d.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: d.guardrail.name }
          }), new rr(`Output guardrail triggered: ${JSON.stringify(d.output.outputInfo)}`, d, t);
    } catch (o) {
      throw o instanceof rr ? o : new Yr(`Output guardrail failed to complete: ${o}`, o, t);
    }
  }
}, Sa = async function(t, r) {
  var s, a, i;
  try {
    for (; ; ) {
      const o = t.state._currentAgent, d = o.handoffs.map(Dn), c = await o.getAllTools(t.state._context), p = c.map((h) => ws(h)), f = d.map((h) => bs(h));
      if (t.state._currentStep = t.state._currentStep ?? {
        type: "next_step_run_again"
      }, t.state._currentStep.type === "next_step_interruption") {
        if (C.debug("Continuing from interruption"), !t.state._lastTurnResponse || !t.state._lastProcessedResponse)
          throw new Q("No model response found in previous state", t.state);
        const h = await Ts(t.state._currentAgent, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        if (Is(t, h), t.state._toolUseTracker.addToolUse(t.state._currentAgent, t.state._lastProcessedResponse.toolsUsed), t.state._originalInput = h.originalInput, t.state._generatedItems = h.generatedItems, t.state._currentStep = h.nextStep, h.nextStep.type === "next_step_interruption")
          return;
        continue;
      }
      if (t.state._currentStep.type === "next_step_run_again") {
        if (!t.state._currentAgentSpan) {
          const z = d.map((Y) => Y.agentName);
          t.state._currentAgentSpan = gs({
            data: {
              name: o.name,
              handoffs: z,
              tools: c.map((Y) => Y.name),
              output_type: o.outputSchemaName
            }
          }), t.state._currentAgentSpan.start(), mn(t.state._currentAgentSpan);
        }
        if (t.state._currentTurn++, t.state._currentTurn > t.state._maxTurns)
          throw (s = t.state._currentAgentSpan) == null || s.setError({
            message: "Max turns exceeded",
            data: { max_turns: t.state._maxTurns }
          }), new Wr(`Max turns (${t.state._maxTurns}) exceeded`, t.state);
        C.debug(`Running agent ${o.name} (turn ${t.state._currentTurn})`);
        let h = Ds(o.model, this.config.model);
        typeof h == "string" && (h = await this.config.modelProvider.getModel(h)), t.state._currentTurn === 1 && await $(this, re, yr).call(this, t.state);
        let x = {
          ...this.config.modelSettings,
          ...o.modelSettings
        };
        x = Ss(o, t.state._toolUseTracker, x);
        const w = Pn(t.input, t.newItems);
        t.state._noActiveAgentRun && (o.emit("agent_start", t.state._context, o), this.emit("agent_start", t.state._context, o));
        let b;
        for await (const z of h.getStreamedResponse({
          systemInstructions: await o.getSystemPrompt(t.state._context),
          prompt: await o.getPrompt(t.state._context),
          input: w,
          previousResponseId: r.previousResponseId,
          modelSettings: x,
          tools: p,
          handoffs: f,
          outputType: Qr(o.outputType),
          tracing: Rs(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
          signal: r.signal
        })) {
          if (z.type === "response_done") {
            const Y = pa.parse(z);
            b = {
              usage: new Un(Y.response.usage),
              output: Y.response.output,
              responseId: Y.response.id
            };
          }
          if (t.cancelled)
            return;
          t._addItem(new hu(z));
        }
        if (t.state._noActiveAgentRun = !1, !b)
          throw new fe("Model did not produce a final response!", t.state);
        t.state._lastTurnResponse = b, t.state._modelResponses.push(t.state._lastTurnResponse);
        const E = xs(t.state._lastTurnResponse, o, c, d);
        t.state._lastProcessedResponse = E;
        const R = await ks(o, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        Is(t, R), t.state._toolUseTracker.addToolUse(o, E.toolsUsed), t.state._originalInput = R.originalInput, t.state._generatedItems = R.generatedItems, t.state._currentStep = R.nextStep;
      }
      if (t.state._currentStep.type === "next_step_final_output") {
        await $(this, re, vr).call(this, t.state, t.state._currentStep.output);
        return;
      } else {
        if (t.state._currentStep.type === "next_step_interruption")
          return;
        t.state._currentStep.type === "next_step_handoff" ? (t.state._currentAgent = (a = t.state._currentStep) == null ? void 0 : a.newAgent, t.state._currentAgentSpan && (t.state._currentAgentSpan.end(), Dt()), t.state._currentAgentSpan = void 0, t._addItem(new gu(t.state._currentAgent)), t.state._noActiveAgentRun = !0, t.state._currentStep = {
          type: "next_step_run_again"
        }) : C.debug("Running next loop");
      }
    }
  } catch (o) {
    throw t.state._currentAgentSpan && t.state._currentAgentSpan.setError({
      message: "Error in agent run",
      data: { error: String(o) }
    }), o;
  } finally {
    t.state._currentAgentSpan && (((i = t.state._currentStep) == null ? void 0 : i.type) !== "next_step_interruption" && t.state._currentAgentSpan.end(), Dt());
  }
}, wr = async function(t, r, s) {
  return s = s ?? {}, pr(async () => {
    const a = r instanceof Ve ? r : new Ve(s.context instanceof ht ? s.context : new ht(s.context), r, t, s.maxTurns ?? Ns), i = new lu({
      signal: s.signal,
      state: a
    });
    return i.maxTurns = s.maxTurns ?? a._maxTurns, $(this, re, Sa).call(this, i, s).then(() => {
      i._done();
    }, (o) => {
      i._raiseError(o);
    }), i;
  });
};
function Ds(n, e) {
  return typeof n == "string" && n !== dt.DEFAULT_MODEL_PLACEHOLDER || n ? n : e ?? n ?? dt.DEFAULT_MODEL_PLACEHOLDER;
}
const mt = class mt extends Bo {
  constructor(t) {
    super();
    _(this, "name");
    _(this, "instructions");
    _(this, "prompt");
    _(this, "handoffDescription");
    _(this, "handoffs");
    _(this, "model");
    _(this, "modelSettings");
    _(this, "tools");
    _(this, "mcpServers");
    _(this, "inputGuardrails");
    _(this, "outputGuardrails");
    _(this, "outputType", "text");
    _(this, "toolUseBehavior");
    _(this, "resetToolChoice");
    if (typeof t.name != "string" || t.name.trim() === "")
      throw new Q("Agent must have a name.");
    if (this.name = t.name, this.instructions = t.instructions ?? mt.DEFAULT_MODEL_PLACEHOLDER, this.prompt = t.prompt, this.handoffDescription = t.handoffDescription ?? "", this.handoffs = t.handoffs ?? [], this.model = t.model ?? "", this.modelSettings = t.modelSettings ?? {}, this.tools = t.tools ?? [], this.mcpServers = t.mcpServers ?? [], this.inputGuardrails = t.inputGuardrails ?? [], this.outputGuardrails = t.outputGuardrails ?? [], t.outputType && (this.outputType = t.outputType), this.toolUseBehavior = t.toolUseBehavior ?? "run_llm_again", this.resetToolChoice = t.resetToolChoice ?? !0, (t.handoffOutputTypeWarningEnabled === void 0 || t.handoffOutputTypeWarningEnabled) && this.handoffs && this.outputType) {
      const r = /* @__PURE__ */ new Set([JSON.stringify(this.outputType)]);
      for (const s of this.handoffs)
        "outputType" in s && s.outputType ? r.add(JSON.stringify(s.outputType)) : "agent" in s && s.agent.outputType && r.add(JSON.stringify(s.agent.outputType));
      r.size > 1 && C.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`);
    }
  }
  /**
   * Create an Agent with handoffs and automatically infer the union type for TOutput from the handoff agents' output types.
   */
  static create(t) {
    return new mt({
      ...t,
      handoffs: t.handoffs,
      outputType: t.outputType,
      handoffOutputTypeWarningEnabled: !1
    });
  }
  /**
   * Output schema name.
   */
  get outputSchemaName() {
    if (this.outputType === "text")
      return "text";
    if (st(this.outputType))
      return "ZodOutput";
    if (typeof this.outputType == "object")
      return this.outputType.name;
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Makes a copy of the agent, with the given arguments changed. For example, you could do:
   *
   * ```
   * const newAgent = agent.clone({ instructions: 'New instructions' })
   * ```
   *
   * @param config - A partial configuration to change.
   * @returns A new agent with the given changes.
   */
  clone(t) {
    return new mt({
      ...this,
      ...t
    });
  }
  /**
   * Transform this agent into a tool, callable by other agents.
   *
   * This is different from handoffs in two ways:
   * 1. In handoffs, the new agent receives the conversation history. In this tool, the new agent
   *    receives generated input.
   * 2. In handoffs, the new agent takes over the conversation. In this tool, the new agent is
   *    called as a tool, and the conversation is continued by the original agent.
   *
   * @param options - Options for the tool.
   * @returns A tool that runs the agent and returns the output text.
   */
  asTool(t) {
    const { toolName: r, toolDescription: s, customOutputExtractor: a } = t;
    return sr({
      name: r ?? bn(this.name),
      description: s ?? "",
      parameters: {
        type: "object",
        properties: {
          input: {
            type: "string"
          }
        },
        required: ["input"],
        additionalProperties: !1
      },
      strict: !0,
      execute: async (i, o) => {
        if (!Oi(i))
          throw new fe("Agent tool called with invalid input");
        const c = await new Eu().run(this, i.input, {
          context: o == null ? void 0 : o.context
        });
        return typeof a == "function" ? a(c) : fu(c.rawResponses[c.rawResponses.length - 1]);
      }
    });
  }
  /**
   * Returns the system prompt for the agent.
   *
   * If the agent has a function as its instructions, this function will be called with the
   * runContext and the agent instance.
   */
  async getSystemPrompt(t) {
    return typeof this.instructions == "function" ? await this.instructions(t, this) : this.instructions;
  }
  /**
   * Returns the prompt template for the agent, if defined.
   *
   * If the agent has a function as its prompt, this function will be called with the
   * runContext and the agent instance.
   */
  async getPrompt(t) {
    return typeof this.prompt == "function" ? await this.prompt(t, this) : this.prompt;
  }
  /**
   * Fetches the available tools from the MCP servers.
   * @returns the MCP powered tools
   */
  async getMcpTools(t) {
    return this.mcpServers.length > 0 ? go(this.mcpServers, t, this, !1) : [];
  }
  /**
   * ALl agent tools, including the MCPl and function tools.
   *
   * @returns all configured tools
   */
  async getAllTools(t) {
    return [...await this.getMcpTools(t), ...this.tools];
  }
  /**
   * Processes the final output of the agent.
   *
   * @param output - The output of the agent.
   * @returns The parsed out.
   */
  processFinalOutput(t) {
    if (this.outputType === "text")
      return t;
    if (typeof this.outputType == "object") {
      const r = JSON.parse(t);
      return st(this.outputType) ? this.outputType.parse(r) : r;
    }
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Returns a JSON representation of the agent, which is serializable.
   *
   * @returns A JSON object containing the agent's name.
   */
  toJSON() {
    return {
      name: this.name
    };
  }
};
_(mt, "DEFAULT_MODEL_PLACEHOLDER", "");
let dt = mt;
Jo(ta());
class Rc extends dt {
  constructor(t) {
    super(t);
    /**
     * The voice intended to be used by the agent. If another agent already spoke during the
     * RealtimeSession, changing the voice during a handoff will fail.
     */
    _(this, "voice");
    this.voice = t.voice ?? "ash";
  }
}
function Ou(n) {
  return {
    debounceTextLength: n.debounceTextLength ?? 100
  };
}
function Nu({ policyHint: n, ...e }) {
  const t = mr(e), r = n ?? t.name;
  return {
    ...t,
    policyHint: r,
    run: async (s) => {
      const a = await t.run(s);
      return {
        ...a,
        guardrail: { ...a.guardrail, policyHint: r }
      };
    }
  };
}
function Ru(n) {
  return `
⚠️ Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo ?? {})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim();
}
const Ce = zs("openai-agents:realtime");
g({
  itemId: l()
});
const Ps = pe("role", [
  g({
    itemId: l(),
    previousItemId: l().nullable().optional(),
    type: m("message"),
    role: m("system"),
    content: B(g({ type: m("input_text"), text: l() }))
  }),
  g({
    itemId: l(),
    previousItemId: l().nullable().optional(),
    type: m("message"),
    role: m("user"),
    status: se(["in_progress", "completed"]),
    content: B(g({ type: m("input_text"), text: l() }).or(g({
      type: m("input_audio"),
      audio: l().nullable().optional(),
      transcript: l().nullable()
    })))
  }),
  g({
    itemId: l(),
    previousItemId: l().nullable().optional(),
    type: m("message"),
    role: m("assistant"),
    status: se(["in_progress", "completed", "incomplete"]),
    content: B(g({ type: m("text"), text: l() }).or(g({
      type: m("audio"),
      audio: l().nullable().optional(),
      transcript: l().nullable().optional()
    })))
  })
]), js = g({
  itemId: l(),
  previousItemId: l().nullable().optional(),
  type: m("function_call"),
  status: se(["in_progress", "completed"]),
  arguments: l(),
  name: l(),
  output: l().nullable()
}), Ta = g({
  id: l().optional().nullable(),
  conversation_id: l().optional().nullable(),
  max_output_tokens: A().or(m("inf")).optional().nullable(),
  metadata: K(l(), L()).optional().nullable(),
  modalities: B(l()).optional().nullable(),
  object: m("realtime.response").optional().nullable(),
  output: B(L()).optional().nullable(),
  output_audio_format: l().optional().nullable(),
  status: se(["completed", "incomplete", "failed", "cancelled", "in_progress"]).optional().nullable(),
  status_details: K(l(), L()).optional().nullable(),
  usage: g({
    input_tokens: A().optional(),
    input_tokens_details: K(l(), L()).optional().nullable(),
    output_tokens: A().optional(),
    output_tokens_details: K(l(), L()).optional().nullable()
  }).optional().nullable(),
  voice: l().optional().nullable()
}), Du = g({
  id: l().optional(),
  audio: l().nullable().optional(),
  text: l().nullable().optional(),
  transcript: l().nullable().optional(),
  type: Qs([
    m("input_text"),
    m("input_audio"),
    m("item_reference"),
    m("text"),
    m("audio")
  ])
}), pn = g({
  id: l().optional(),
  arguments: l().optional(),
  call_id: l().optional(),
  content: B(Du).optional(),
  name: l().optional(),
  object: m("realtime.item").optional(),
  output: l().optional(),
  role: se(["user", "assistant", "system"]).optional(),
  status: se(["completed", "incomplete", "in_progress"]).optional(),
  type: se(["message", "function_call", "function_call_output"]).optional()
}), Pu = g({
  type: m("conversation.created"),
  event_id: l(),
  conversation: g({
    id: l().optional(),
    object: m("realtime.conversation").optional()
  })
}), ju = g({
  type: m("conversation.item.created"),
  event_id: l(),
  item: pn,
  previous_item_id: l().nullable().optional()
}), Mu = g({
  type: m("conversation.item.deleted"),
  event_id: l(),
  item_id: l()
}), Zu = g({
  type: m("conversation.item.input_audio_transcription.completed"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  transcript: l(),
  logprobs: B(L()).nullable().optional()
}), $u = g({
  type: m("conversation.item.input_audio_transcription.delta"),
  event_id: l(),
  item_id: l(),
  content_index: A().optional(),
  delta: l().optional(),
  logprobs: B(L()).nullable().optional()
}), Lu = g({
  type: m("conversation.item.input_audio_transcription.failed"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  error: g({
    code: l().optional(),
    message: l().optional(),
    param: l().optional(),
    type: l().optional()
  })
}), Fu = g({
  type: m("conversation.item.retrieved"),
  event_id: l(),
  item: pn
}), Uu = g({
  type: m("conversation.item.truncated"),
  event_id: l(),
  item_id: l(),
  audio_end_ms: A(),
  content_index: A()
}), Ju = g({
  type: m("conversation.item.create"),
  item: pn,
  event_id: l().optional(),
  previous_item_id: l().nullable().optional()
}), Bu = g({
  type: m("conversation.item.delete"),
  item_id: l(),
  event_id: l().optional()
}), qu = g({
  type: m("conversation.item.retrieve"),
  item_id: l(),
  event_id: l().optional()
}), Gu = g({
  type: m("conversation.item.truncate"),
  item_id: l(),
  audio_end_ms: A(),
  content_index: A(),
  event_id: l().optional()
}), Vu = g({
  type: m("error"),
  event_id: l().optional(),
  error: L().optional()
}), zu = g({
  type: m("input_audio_buffer.cleared"),
  event_id: l()
}), Hu = g({
  type: m("input_audio_buffer.append"),
  audio: l(),
  event_id: l().optional()
}), Wu = g({
  type: m("input_audio_buffer.clear"),
  event_id: l().optional()
}), Yu = g({
  type: m("input_audio_buffer.commit"),
  event_id: l().optional()
}), Xu = g({
  type: m("input_audio_buffer.committed"),
  event_id: l(),
  item_id: l(),
  previous_item_id: l().nullable().optional()
}), Qu = g({
  type: m("input_audio_buffer.speech_started"),
  event_id: l(),
  item_id: l(),
  audio_start_ms: A()
}), Ku = g({
  type: m("input_audio_buffer.speech_stopped"),
  event_id: l(),
  item_id: l(),
  audio_end_ms: A()
}), ec = g({
  type: m("output_audio_buffer.started"),
  event_id: l()
}).passthrough(), tc = g({
  type: m("output_audio_buffer.stopped"),
  event_id: l()
}).passthrough(), nc = g({
  type: m("output_audio_buffer.cleared"),
  event_id: l()
}), rc = g({
  type: m("rate_limits.updated"),
  event_id: l(),
  rate_limits: B(g({
    limit: A().optional(),
    name: se(["requests", "tokens"]).optional(),
    remaining: A().optional(),
    reset_seconds: A().optional()
  }))
}), sc = g({
  type: m("response.audio.delta"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  delta: l(),
  output_index: A(),
  response_id: l()
}), ac = g({
  type: m("response.audio.done"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  output_index: A(),
  response_id: l()
}), ic = g({
  type: m("response.audio_transcript.delta"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  delta: l(),
  output_index: A(),
  response_id: l()
}), oc = g({
  type: m("response.audio_transcript.done"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  transcript: l(),
  output_index: A(),
  response_id: l()
}), uc = g({
  type: m("response.content_part.added"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  output_index: A(),
  response_id: l(),
  part: g({
    audio: l().optional(),
    text: l().optional(),
    transcript: l().optional(),
    type: se(["text", "audio"]).optional()
  })
}), cc = g({
  type: m("response.content_part.done"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  output_index: A(),
  response_id: l(),
  part: g({
    audio: l().optional(),
    text: l().optional(),
    transcript: l().optional(),
    type: se(["text", "audio"]).optional()
  })
}), dc = g({
  type: m("response.created"),
  event_id: l(),
  response: Ta
}), ka = g({
  type: m("response.done"),
  event_id: l(),
  response: Ta
}), lc = g({
  type: m("response.function_call_arguments.delta"),
  event_id: l(),
  item_id: l(),
  call_id: l(),
  delta: l(),
  output_index: A(),
  response_id: l()
}), pc = g({
  type: m("response.function_call_arguments.done"),
  event_id: l(),
  item_id: l(),
  call_id: l(),
  arguments: l(),
  output_index: A(),
  response_id: l()
}), fc = g({
  type: m("response.output_item.added"),
  event_id: l(),
  item: pn,
  output_index: A(),
  response_id: l()
}), hc = g({
  type: m("response.output_item.done"),
  event_id: l(),
  item: pn,
  output_index: A(),
  response_id: l()
}), mc = g({
  type: m("response.text.delta"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  delta: l(),
  output_index: A(),
  response_id: l()
}), gc = g({
  type: m("response.text.done"),
  event_id: l(),
  item_id: l(),
  content_index: A(),
  text: l(),
  output_index: A(),
  response_id: l()
}), _c = g({
  type: m("session.created"),
  event_id: l(),
  session: L()
}), yc = g({
  type: m("session.updated"),
  event_id: l(),
  session: L()
}), vc = g({
  type: m("response.cancel"),
  event_id: l().optional(),
  response_id: l().optional()
}), wc = g({
  type: m("response.create"),
  event_id: l().optional(),
  response: L().optional()
}), bc = g({
  type: m("session.update"),
  event_id: l().optional(),
  session: L()
}), xc = g({
  type: m("transcription_session.update"),
  event_id: l().optional(),
  session: L()
}), Sc = g({
  type: m("transcription_session.updated"),
  event_id: l(),
  session: L()
}), Tc = g({
  type: l(),
  event_id: l().optional().nullable()
}).passthrough(), kc = pe("type", [
  Pu,
  ju,
  Mu,
  Zu,
  $u,
  Lu,
  Fu,
  Uu,
  Vu,
  zu,
  Xu,
  Qu,
  Ku,
  ec,
  tc,
  nc,
  rc,
  sc,
  ac,
  ic,
  oc,
  uc,
  cc,
  dc,
  ka,
  lc,
  pc,
  fc,
  hc,
  mc,
  gc,
  _c,
  yc,
  Sc
]);
pe("type", [
  Ju,
  Bu,
  qu,
  Gu,
  Hu,
  Wu,
  Yu,
  vc,
  wc,
  bc,
  xc
]);
function jr(n) {
  const e = JSON.parse(n.data.toString()), t = kc.safeParse(e);
  if (!t.success) {
    const r = Tc.safeParse(e);
    return r.success ? { data: r.data, isGeneric: !0 } : { data: null, isGeneric: !0 };
  }
  return { data: t.data, isGeneric: !1 };
}
const Ic = "gpt-4o-realtime-preview", ve = {
  voice: "ash",
  modalities: ["text", "audio"],
  inputAudioFormat: "pcm16",
  outputAudioFormat: "pcm16",
  inputAudioTranscription: {
    model: "gpt-4o-mini-transcribe"
  },
  turnDetection: {
    type: "semantic_vad"
  },
  inputAudioNoiseReduction: null,
  speed: 1
};
var Ye, rn, le, sn;
const $r = class $r extends Ir {
  constructor(t = {}) {
    super();
    T(this, Ye);
    T(this, rn);
    T(this, le, null);
    T(this, sn, null);
    _(this, "eventEmitter", new $n());
    y(this, Ye, t.model ?? Ic), y(this, rn, t.apiKey);
  }
  /**
   * The current model that is being used by the transport layer.
   */
  get currentModel() {
    return u(this, Ye);
  }
  /**
   * The current model that is being used by the transport layer.
   * **Note**: The model cannot be changed mid conversation.
   */
  set currentModel(t) {
    y(this, Ye, t);
  }
  get _rawSessionConfig() {
    return u(this, sn) ?? null;
  }
  async _getApiKey(t) {
    const r = t.apiKey ?? u(this, rn);
    return typeof r == "function" ? await r() : r;
  }
  _onMessage(t) {
    var a, i, o, d, c, p;
    const { data: r, isGeneric: s } = jr(t);
    if (r !== null && (this.emit("*", r), !s)) {
      if (r.type === "error" ? this.emit("error", { type: "error", error: r }) : this.emit(r.type, r), r.type === "response.created") {
        this.emit("turn_started", {
          type: "response_started",
          providerData: {
            ...r
          }
        });
        return;
      }
      if (r.type === "session.updated" && y(this, sn, r.session), r.type === "response.done") {
        const f = ka.safeParse(r);
        if (!f.success) {
          Ce.error("Error parsing response done event", f.error);
          return;
        }
        const h = ((a = f.data.response.usage) == null ? void 0 : a.input_tokens) ?? 0, x = ((i = f.data.response.usage) == null ? void 0 : i.output_tokens) ?? 0, w = h + x, b = new Un({
          inputTokens: h,
          inputTokensDetails: ((o = f.data.response.usage) == null ? void 0 : o.input_tokens_details) ?? {},
          outputTokens: x,
          outputTokensDetails: ((d = f.data.response.usage) == null ? void 0 : d.output_tokens_details) ?? {},
          totalTokens: w
        });
        this.emit("usage_update", b), this.emit("turn_done", {
          type: "response_done",
          response: {
            id: f.data.response.id ?? "",
            output: f.data.response.output ?? [],
            usage: {
              inputTokens: h,
              inputTokensDetails: ((c = f.data.response.usage) == null ? void 0 : c.input_tokens_details) ?? {},
              outputTokens: x,
              outputTokensDetails: ((p = f.data.response.usage) == null ? void 0 : p.output_tokens_details) ?? {},
              totalTokens: w
            }
          }
        });
        return;
      }
      if (r.type === "response.audio.done") {
        this.emit("audio_done");
        return;
      }
      if (r.type === "conversation.item.deleted") {
        this.emit("item_deleted", {
          itemId: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.completed" || r.type === "conversation.item.truncated") {
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.delta" || r.type === "response.text.delta" || r.type === "response.audio_transcript.delta" || r.type === "response.function_call_arguments.delta") {
        r.type === "response.audio_transcript.delta" && this.emit("audio_transcript_delta", {
          type: "transcript_delta",
          delta: r.delta,
          itemId: r.item_id,
          responseId: r.response_id
        });
        return;
      }
      if ((r.type === "conversation.item.created" || r.type === "conversation.item.retrieved") && r.item.type === "message") {
        const f = r.type === "conversation.item.created" ? r.previous_item_id : null, h = Ps.parse({
          itemId: r.item.id,
          previousItemId: f,
          type: r.item.type,
          role: r.item.role,
          content: r.item.content,
          status: r.item.status
        });
        this.emit("item_update", h);
        return;
      }
      if (r.type === "response.output_item.done" || r.type === "response.output_item.added") {
        const f = r.item;
        if (f.type === "function_call" && f.status === "completed") {
          const h = js.parse({
            itemId: f.id,
            type: f.type,
            status: "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: f.arguments,
            name: f.name,
            output: null
          });
          this.emit("item_update", h), this.emit("function_call", {
            id: f.id,
            type: "function_call",
            callId: f.call_id ?? "",
            arguments: f.arguments ?? "",
            name: f.name ?? ""
          });
          return;
        }
        if (f.type === "message") {
          const h = Ps.parse({
            itemId: r.item.id,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: "in_progress"
          });
          this.emit("item_update", h);
          return;
        }
      }
    }
  }
  _onError(t) {
    this.emit("error", {
      type: "error",
      error: t
    });
  }
  _onOpen() {
    this.emit("connected");
  }
  _onClose() {
    this.emit("disconnected");
  }
  /**
   * Send a message to the Realtime API. This will create a new item in the conversation and
   * trigger a response.
   *
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r) {
    this.sendEvent({
      type: "conversation.item.create",
      item: typeof t == "string" ? {
        type: "message",
        role: "user",
        content: [
          {
            type: "input_text",
            text: t
          }
        ]
      } : t,
      ...r
    }), this.sendEvent({
      type: "response.create"
    });
  }
  _getMergedSessionConfig(t) {
    var s;
    return {
      instructions: t.instructions,
      model: t.model ?? u(this, Ye) ?? ve.model,
      voice: t.voice ?? ve.voice,
      speed: t.speed ?? ve.speed,
      modalities: t.modalities ?? ve.modalities,
      input_audio_format: t.inputAudioFormat ?? ve.inputAudioFormat,
      output_audio_format: t.outputAudioFormat ?? ve.outputAudioFormat,
      input_audio_transcription: t.inputAudioTranscription ?? ve.inputAudioTranscription,
      input_audio_noise_reduction: t.inputAudioNoiseReduction ?? ve.inputAudioNoiseReduction,
      turn_detection: $r.buildTurnDetectionConfig(t.turnDetection) ?? ve.turnDetection,
      tool_choice: t.toolChoice ?? ve.toolChoice,
      tools: (s = t.tools) == null ? void 0 : s.map((a) => ({
        ...a,
        strict: void 0
      })),
      // We don't set tracing here to make sure that we don't try to override it on every
      // session.update as it might lead to errors
      ...t.providerData ?? {}
    };
  }
  static buildTurnDetectionConfig(t) {
    if (typeof t > "u")
      return;
    const { type: r, createResponse: s, create_response: a, eagerness: i, interruptResponse: o, interrupt_response: d, prefixPaddingMs: c, prefix_padding_ms: p, silenceDurationMs: f, silence_duration_ms: h, threshold: x, ...w } = t, b = {
      type: r,
      create_response: s || a,
      eagerness: i,
      interrupt_response: o || d,
      prefix_padding_ms: c || p,
      silence_duration_ms: f || h,
      threshold: x,
      ...w
    };
    return Object.keys(b).forEach((E) => {
      b[E] === void 0 && delete b[E];
    }), Object.keys(b).length > 0 ? b : void 0;
  }
  /**
   * Sets the internal tracing config. This is used to track the tracing config that has been set
   * during the session.create event.
   */
  set _tracingConfig(t) {
    y(this, le, t);
  }
  /**
   * Sets the tracing config for the session. This will send the tracing config to the Realtime API.
   *
   * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists
   */
  _updateTracingConfig(t) {
    var r, s, a;
    if (typeof u(this, le) > "u" && y(this, le, null), t === "auto") {
      this.sendEvent({
        type: "session.update",
        session: {
          tracing: "auto"
        }
      });
      return;
    }
    if (typeof u(this, le) != "string" && typeof t != "string") {
      Ce.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");
      return;
    }
    if (t === null) {
      Ce.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."), this.sendEvent({
        type: "session.update",
        session: {
          tracing: null
        }
      });
      return;
    }
    if (u(this, le) === null || typeof u(this, le) == "string") {
      this.sendEvent({
        type: "session.update",
        session: {
          tracing: t
        }
      });
      return;
    }
    if ((t == null ? void 0 : t.group_id) !== ((r = u(this, le)) == null ? void 0 : r.group_id) || (t == null ? void 0 : t.metadata) !== ((s = u(this, le)) == null ? void 0 : s.metadata) || (t == null ? void 0 : t.workflow_name) !== ((a = u(this, le)) == null ? void 0 : a.workflow_name)) {
      Ce.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s", JSON.stringify(u(this, le)), JSON.stringify(t));
      return;
    }
    this.sendEvent({
      type: "session.update",
      session: {
        tracing: t
      }
    });
  }
  /**
   * Updates the session config. This will merge it with the current session config with the default
   * values and send it to the Realtime API.
   *
   * @param config - The session config to update.
   */
  updateSessionConfig(t) {
    const r = this._getMergedSessionConfig(t);
    this.sendEvent({
      type: "session.update",
      session: r
    });
  }
  /**
   * Send the output of a function call to the Realtime API.
   *
   * @param toolCall - The tool call to send the output for.
   * @param output - The output of the function call.
   * @param startResponse - Whether to start a new response after sending the output.
   */
  sendFunctionCallOutput(t, r, s = !0) {
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "function_call_output",
        output: r,
        call_id: t.callId
      }
    });
    try {
      const a = js.parse({
        itemId: t.id,
        previousItemId: t.previousItemId,
        type: "function_call",
        status: "completed",
        arguments: t.arguments,
        name: t.name,
        output: r
      });
      this.emit("item_update", a);
    } catch (a) {
      Ce.error("Error parsing tool call item", a, t);
    }
    s && this.sendEvent({
      type: "response.create"
    });
  }
  /**
   * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer
   * will be committed and the model will start processing it. This is necessary if you have
   * disabled turn detection / voice activity detection (VAD).
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, { commit: r = !1 } = {}) {
    this.sendEvent({
      type: "input_audio_buffer.append",
      audio: Zs(t)
    }), r && this.sendEvent({
      type: "input_audio_buffer.commit"
    });
  }
  /**
   * Reset the history of the conversation. This will create a diff between the old and new history
   * and send the necessary events to the Realtime API to update the history.
   *
   * @param oldHistory - The old history of the conversation.
   * @param newHistory - The new history of the conversation.
   */
  resetHistory(t, r) {
    const { removals: s, additions: a, updates: i } = Pa(t, r), o = new Set(s.map((c) => c.itemId));
    for (const c of i)
      o.add(c.itemId);
    if (o.size > 0)
      for (const c of o)
        this.sendEvent({
          type: "conversation.item.delete",
          item_id: c
        });
    const d = [...a, ...i];
    for (const c of d)
      if (c.type === "message") {
        const p = {
          type: "message",
          role: c.role,
          content: c.content,
          id: c.itemId
        };
        c.role !== "system" && c.status && (p.status = c.status), this.sendEvent({
          type: "conversation.item.create",
          item: p
        });
      } else c.type === "function_call" && Ce.warn("Function calls cannot be manually added or updated at the moment. Ignoring.");
  }
};
Ye = new WeakMap(), rn = new WeakMap(), le = new WeakMap(), sn = new WeakMap();
let jn = $r;
var an, G, on, Xe, un;
class Ac extends jn {
  constructor(t = {}) {
    if (typeof RTCPeerConnection > "u")
      throw new Error("WebRTC is not supported in this environment");
    super(t);
    _(this, "options");
    T(this, an);
    T(this, G, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0
    });
    T(this, on);
    T(this, Xe, !1);
    T(this, un, !1);
    this.options = t, y(this, an, t.baseUrl ?? "https://api.openai.com/v1/realtime"), y(this, on, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current status of the WebRTC connection.
   */
  get status() {
    return u(this, G).status;
  }
  /**
   * The current connection state of the WebRTC connection including the peer connection and data
   * channel.
   */
  get connectionState() {
    return u(this, G);
  }
  /**
   * Whether the session is muted.
   */
  get muted() {
    return u(this, un);
  }
  /**
   * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API
   * via WebRTC.
   *
   * If you are using a browser, the transport layer will also automatically configure the
   * microphone and audio output to be used by the session.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    if (u(this, G).status === "connected")
      return;
    u(this, G).status === "connecting" && Ce.warn("Realtime connection already in progress. Please await original promise");
    const r = t.model ?? this.currentModel;
    this.currentModel = r;
    const s = t.url ?? u(this, an), a = await this._getApiKey(t), i = typeof a == "string" && a.startsWith("ek_");
    if (!u(this, on) && !i)
      throw new Q("Using the WebRTC connection in a browser environment requires an insecure API key. Please use a WebSocket connection instead or set the useInsecureApiKey option to true.");
    return new Promise(async (o, d) => {
      try {
        const c = {
          ...t.initialSessionConfig || {},
          model: this.currentModel
        }, p = new URL(s);
        let f = new RTCPeerConnection();
        const h = f.createDataChannel("oai-events");
        y(this, G, {
          status: "connecting",
          peerConnection: f,
          dataChannel: h
        }), this.emit("connection_change", u(this, G).status), h.addEventListener("open", () => {
          y(this, G, {
            status: "connected",
            peerConnection: f,
            dataChannel: h
          }), this.updateSessionConfig(c), this.emit("connection_change", u(this, G).status), this._onOpen(), o();
        }), h.addEventListener("error", (oe) => {
          this.close(), this._onError(oe), d(oe);
        }), h.addEventListener("message", (oe) => {
          this._onMessage(oe);
          const { data: ue, isGeneric: Nt } = jr(oe);
          !ue || Nt || (ue.type === "response.created" ? y(this, Xe, !0) : ue.type === "response.done" && y(this, Xe, !1), ue.type === "session.created" && (this._tracingConfig = ue.session.tracing, this._updateTracingConfig(c.tracing ?? "auto")));
        });
        const x = this.options.audioElement ?? document.createElement("audio");
        x.autoplay = !0, f.ontrack = (oe) => {
          x.srcObject = oe.streams[0];
        };
        const w = this.options.mediaStream ?? await navigator.mediaDevices.getUserMedia({
          audio: !0
        });
        f.addTrack(w.getAudioTracks()[0]), this.options.changePeerConnection && (f = await this.options.changePeerConnection(f), y(this, G, { ...u(this, G), peerConnection: f }));
        const b = await f.createOffer();
        if (await f.setLocalDescription(b), !b.sdp)
          throw new Error("Failed to create offer");
        const E = {
          ...this._getMergedSessionConfig(c),
          model: this.currentModel
        }, R = new FormData();
        R.append("sdp", b.sdp), R.append("session", JSON.stringify(E));
        const Y = {
          type: "answer",
          sdp: await (await fetch(p, {
            method: "POST",
            body: R,
            headers: {
              Authorization: `Bearer ${a}`,
              "X-OpenAI-Agents-SDK": Ma["X-OpenAI-Agents-SDK"]
            }
          })).text()
        };
        await f.setRemoteDescription(Y);
      } catch (c) {
        this.close(), this._onError(c), d(c);
      }
    });
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, G).dataChannel || u(this, G).dataChannel.readyState !== "open")
      throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");
    u(this, G).dataChannel.send(JSON.stringify(t));
  }
  /**
   * Mute or unmute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    y(this, un, t), u(this, G).peerConnection && u(this, G).peerConnection.getSenders().forEach((s) => {
      s.track && (s.track.enabled = !t);
    });
  }
  /**
   * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.
   */
  close() {
    if (u(this, G).dataChannel && u(this, G).dataChannel.close(), u(this, G).peerConnection) {
      const t = u(this, G).peerConnection;
      t.getSenders().forEach((r) => {
        var s;
        (s = r.track) == null || s.stop();
      }), t.close();
    }
    u(this, G).status !== "disconnected" && (y(this, G, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0
    }), this.emit("connection_change", u(this, G).status), this._onClose());
  }
  /**
   * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent
   * stops talking.
   */
  interrupt() {
    u(this, Xe) && (this.sendEvent({
      type: "response.cancel"
    }), y(this, Xe, !1)), this.sendEvent({
      type: "output_audio_buffer.clear"
    });
  }
}
an = new WeakMap(), G = new WeakMap(), on = new WeakMap(), Xe = new WeakMap(), un = new WeakMap();
const Cc = globalThis.WebSocket;
var Qe, Ke, X, cn, Ne, et, tt, Zn, Ia;
class Ec extends jn {
  constructor(t = {}) {
    super(t);
    T(this, Zn);
    T(this, Qe);
    T(this, Ke);
    T(this, X, {
      status: "disconnected",
      websocket: void 0
    });
    T(this, cn);
    T(this, Ne);
    T(this, et);
    /**
     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time
     * since the response started to compute the right interruption time.
     *
     * Mostly internal but might be used by extended transport layers for their interruption
     * calculation.
     */
    _(this, "_firstAudioTimestamp");
    _(this, "_audioLengthMs", 0);
    T(this, tt, !1);
    y(this, Ke, t.url), y(this, cn, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current status of the WebSocket connection.
   */
  get status() {
    return u(this, X).status;
  }
  /**
   * The current connection state of the WebSocket connection.
   */
  get connectionState() {
    return u(this, X);
  }
  /**
   * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,
   * this should be handled by the client by not triggering the `sendAudio` method.
   */
  get muted() {
    return null;
  }
  /**
   * The current item ID of the ongoing response.
   */
  get currentItemId() {
    return u(this, Ne);
  }
  /**
   * Triggers the `audio` event that a client might listen to to receive the audio buffer.
   * Protected for you to be able to override and disable emitting this event in case your extended
   * transport layer handles audio internally.
   *
   * @param audioEvent - The audio event to emit.
   */
  _onAudio(t) {
    this.emit("audio", t);
  }
  async connect(t) {
    const r = t.model ?? this.currentModel;
    this.currentModel = r, y(this, Qe, await this._getApiKey(t));
    const s = t.url ?? u(this, Ke) ?? `wss://api.openai.com/v1/realtime?model=${this.currentModel}`;
    y(this, Ke, s);
    const a = {
      ...t.initialSessionConfig || {},
      model: this.currentModel
    };
    await new Promise((i, o) => {
      try {
        $(this, Zn, Ia).call(this, i, o, a);
      } catch (d) {
        o(d);
      }
    }), await this.updateSessionConfig(a);
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, X).websocket)
      throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");
    u(this, X).websocket.send(JSON.stringify(t));
  }
  /**
   * Close the WebSocket connection.
   *
   * This will also reset any internal connection tracking used for interruption handling.
   */
  close() {
    var t;
    (t = u(this, X).websocket) == null || t.close(), y(this, Ne, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, y(this, et, void 0);
  }
  /**
   * Will throw an error as the WebSocket transport layer does not support muting.
   */
  mute(t) {
    throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.");
  }
  /**
   * Send an audio buffer to the Realtime API. This is used for your client to send audio to the
   * model to respond.
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, r = {}) {
    u(this, X).status === "connected" && super.sendAudio(t, r);
  }
  /**
   * Send a cancel response event to the Realtime API. This is used to cancel an ongoing
   *  response that the model is currently generating.
   */
  _cancelResponse() {
    u(this, tt) && (this.sendEvent({
      type: "response.cancel"
    }), y(this, tt, !1));
  }
  /**
   * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.
   *
   * This method is used to send the right events to the API to inform the model that the user has
   * interrupted the response. It might be overridden/extended by an extended transport layer. See
   * the `TwilioRealtimeTransportLayer` for an example.
   *
   * @param elapsedTime - The elapsed time since the response started.
   */
  _interrupt(t, r = !0) {
    t < 0 || t > this._audioLengthMs || (r && this._cancelResponse(), this.emit("audio_interrupted"), this.sendEvent({
      type: "conversation.item.truncate",
      item_id: u(this, Ne),
      content_index: u(this, et),
      audio_end_ms: t
    }));
  }
  /**
   * Interrupt the ongoing response. This method is triggered automatically by the client when
   * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got
   * triggered.
   *
   * You can also call this method directly if you want to interrupt the conversation for example
   * based on an event in the client.
   */
  interrupt(t = !0) {
    if (!u(this, Ne) || typeof this._firstAudioTimestamp != "number")
      return;
    const r = Date.now() - this._firstAudioTimestamp;
    r >= 0 && this._interrupt(r, t), y(this, Ne, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, y(this, et, void 0);
  }
}
Qe = new WeakMap(), Ke = new WeakMap(), X = new WeakMap(), cn = new WeakMap(), Ne = new WeakMap(), et = new WeakMap(), tt = new WeakMap(), Zn = new WeakSet(), Ia = function(t, r, s) {
  if (u(this, X).websocket) {
    t();
    return;
  }
  if (!u(this, Qe))
    throw new Q("API key is not set. Please call `connect()` with an API key first.");
  if (!u(this, Qe).startsWith("ek_") && !u(this, cn))
    throw new Q("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");
  const a = [
    "realtime",
    // Auth
    "openai-insecure-api-key." + u(this, Qe),
    // Beta protocol, required
    "openai-beta.realtime-v1",
    // Version header
    Za
  ], i = new Cc(u(this, Ke), a);
  y(this, X, {
    status: "connecting",
    websocket: i
  }), this.emit("connection_change", u(this, X).status), i.addEventListener("open", () => {
    y(this, X, {
      status: "connected",
      websocket: i
    }), this.emit("connection_change", u(this, X).status), this._onOpen(), t();
  }), i.addEventListener("error", (o) => {
    this._onError(o), y(this, X, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, X).status), r(o);
  }), i.addEventListener("message", (o) => {
    var p, f, h;
    this._onMessage(o);
    const { data: d, isGeneric: c } = jr(o);
    if (!(!d || c))
      if (d.type === "response.audio.delta") {
        y(this, et, d.content_index), y(this, Ne, d.item_id), this._firstAudioTimestamp === void 0 && (this._firstAudioTimestamp = Date.now(), this._audioLengthMs = 0);
        const x = Ms(d.delta);
        (((p = this._rawSessionConfig) == null ? void 0 : p.output_audio_format) ?? "pcm16").startsWith("g711_") ? this._audioLengthMs += x.byteLength / 8 : this._audioLengthMs += x.byteLength / 24 / 2;
        const b = {
          type: "audio",
          data: x,
          responseId: d.response_id
        };
        this._onAudio(b);
      } else if (d.type === "input_audio_buffer.speech_started") {
        const x = ((h = (f = this._rawSessionConfig) == null ? void 0 : f.turn_detection) == null ? void 0 : h.interrupt_response) ?? !1;
        this.interrupt(!x);
      } else d.type === "response.created" ? y(this, tt, !0) : d.type === "response.done" ? y(this, tt, !1) : d.type === "session.created" && (this._tracingConfig = d.session.tracing, this._updateTracingConfig(s.tracing ?? "auto"));
  }), i.addEventListener("close", () => {
    y(this, X, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, X).status), this._onClose();
  });
};
var U, M, dn, D, kt, It, ln, V, At, Ct, be, H, _n, yn, Aa, vn, Ca, br, Ea;
class Dc extends $n {
  constructor(t, r = {}) {
    super();
    T(this, H);
    _(this, "initialAgent");
    _(this, "options");
    T(this, U);
    T(this, M);
    T(this, dn, []);
    T(this, D);
    T(this, kt, []);
    T(this, It);
    T(this, ln, {});
    T(this, V, []);
    T(this, At);
    T(this, Ct, {});
    T(this, be, !1);
    this.initialAgent = t, this.options = r, typeof r.transport > "u" && ja() || r.transport === "webrtc" ? y(this, U, new Ac()) : r.transport === "websocket" || typeof r.transport > "u" ? y(this, U, new Ec()) : y(this, U, r.transport), y(this, M, t), y(this, D, new ht({
      ...r.context ?? {},
      history: u(this, V)
    })), y(this, kt, (r.outputGuardrails ?? []).map(Nu)), y(this, It, Ou(r.outputGuardrailSettings ?? {})), y(this, At, r.historyStoreAudio ?? !1);
  }
  /**
   * The transport layer used by the session.
   */
  get transport() {
    return u(this, U);
  }
  /**
   * The current agent in the session.
   */
  get currentAgent() {
    return u(this, M);
  }
  /**
   * The current usage of the session.
   */
  get usage() {
    return u(this, D).usage;
  }
  /**
   * The current context of the session.
   */
  get context() {
    return u(this, D);
  }
  /**
   * Whether the session is muted. Might be `null` if the underlying transport layer does not
   * support muting.
   */
  get muted() {
    return u(this, U).muted;
  }
  /**
   * The history of the session.
   */
  get history() {
    return u(this, V);
  }
  async updateAgent(t) {
    return u(this, M).emit("agent_handoff", u(this, D), t), this.emit("agent_handoff", u(this, D), u(this, M), t), await $(this, H, _n).call(this, t), await u(this, U).updateSessionConfig(await $(this, H, yn).call(this)), t;
  }
  /**
   * Connect to the session. This will establish the connection to the underlying transport layer
   * and start the session.
   *
   * After connecting, the session will also emit a `history_updated` event with an empty history.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    await $(this, H, _n).call(this, this.initialAgent), $(this, H, Ea).call(this), await u(this, U).connect({
      apiKey: t.apiKey ?? this.options.apiKey,
      model: this.options.model,
      url: t.url,
      initialSessionConfig: await $(this, H, yn).call(this, this.options.config)
    }), y(this, V, []), this.emit("history_updated", u(this, V));
  }
  /**
   * Update the history of the session.
   * @param newHistory - The new history to set.
   */
  updateHistory(t) {
    let r;
    typeof t == "function" ? r = t(u(this, V)) : r = t, u(this, U).resetHistory(u(this, V), r);
  }
  /**
   * Send a message to the session.
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r = {}) {
    u(this, U).sendMessage(t, r);
  }
  /**
   * Mute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    u(this, U).mute(t);
  }
  /**
   * Disconnect from the session.
   */
  close() {
    y(this, Ct, {}), u(this, U).close();
  }
  /**
   * Send audio to the session.
   * @param audio - The audio to send.
   * @param options - Additional options.
   * @param options.commit - Whether to finish the turn with this audio.
   */
  sendAudio(t, r = {}) {
    u(this, U).sendAudio(t, r);
  }
  /**
   * Interrupt the session artificially for example if you want to build a "stop talking"
   * button.
   */
  interrupt() {
    u(this, U).interrupt();
  }
  /**
   * Approve a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to approve.
   * @param options - Additional options.
   * @param options.alwaysApprove - Whether to always approve the tool call.
   */
  async approve(t, r = { alwaysApprove: !1 }) {
    u(this, D).approveTool(t, r);
    const s = u(this, M).tools.find((a) => a.name === t.rawItem.name);
    if (s && s.type === "function" && t.rawItem.type === "function_call")
      await $(this, H, vn).call(this, t.rawItem, s);
    else
      throw new fe(`Tool ${t.rawItem.name} not found`);
  }
  /**
   * Reject a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to reject.
   * @param options - Additional options.
   * @param options.alwaysReject - Whether to always reject the tool call.
   */
  async reject(t, r = { alwaysReject: !1 }) {
    u(this, D).rejectTool(t, r);
    const s = u(this, M).tools.find((a) => a.name === t.rawItem.name);
    if (s && s.type === "function" && t.rawItem.type === "function_call")
      await $(this, H, vn).call(this, t.rawItem, s);
    else
      throw new fe(`Tool ${t.rawItem.name} not found`);
  }
}
U = new WeakMap(), M = new WeakMap(), dn = new WeakMap(), D = new WeakMap(), kt = new WeakMap(), It = new WeakMap(), ln = new WeakMap(), V = new WeakMap(), At = new WeakMap(), Ct = new WeakMap(), be = new WeakMap(), H = new WeakSet(), _n = async function(t) {
  y(this, M, t);
  const s = u(this, M).handoffs.map(Dn).map((i) => i.getHandoffAsFunctionTool()), a = await u(this, M).getAllTools(u(this, D));
  y(this, dn, [
    ...a.filter((i) => i.type === "function"),
    ...s
  ]);
}, yn = async function(t = {}) {
  const r = await u(this, M).getSystemPrompt(u(this, D)), s = this.options.tracingDisabled ? null : this.options.workflowName ? {
    workflow_name: this.options.workflowName
  } : "auto";
  return s !== null && s !== "auto" ? (this.options.groupId && (s.group_id = this.options.groupId), this.options.traceMetadata && (s.metadata = this.options.traceMetadata)) : (this.options.groupId || this.options.traceMetadata) && Ce.warn("In order to set traceMetadata or a groupId you need to specify a workflowName."), {
    instructions: r,
    voice: u(this, M).voice,
    model: this.options.model,
    tools: u(this, dn),
    tracing: s,
    ...t
  };
}, Aa = async function(t, r) {
  const s = await r.onInvokeHandoff(u(this, D), t.arguments);
  u(this, M).emit("agent_handoff", u(this, D), s), this.emit("agent_handoff", u(this, D), u(this, M), s), await $(this, H, _n).call(this, s), await u(this, U).updateSessionConfig(await $(this, H, yn).call(this));
  const a = sa(s);
  return u(this, U).sendFunctionCallOutput(t, a, !0), s;
}, vn = async function(t, r) {
  u(this, D).context.history = JSON.parse(JSON.stringify(u(this, V)));
  let s = t.arguments;
  if (r.parameters && (st(r.parameters) ? s = r.parameters.parse(s) : s = JSON.parse(s)), await r.needsApproval(u(this, D), s, t.callId)) {
    const d = this.context.isToolApproved({
      toolName: r.name,
      callId: t.callId
    });
    if (d === !1) {
      this.emit("agent_tool_start", u(this, D), u(this, M), r, {
        toolCall: t
      }), u(this, M).emit("agent_tool_start", u(this, D), r, {
        toolCall: t
      });
      const c = "Tool execution was not approved.";
      u(this, U).sendFunctionCallOutput(t, c, !0), this.emit("agent_tool_end", u(this, D), u(this, M), r, c, { toolCall: t }), u(this, M).emit("agent_tool_end", u(this, D), r, c, {
        toolCall: t
      });
      return;
    } else if (typeof d > "u") {
      this.emit("tool_approval_requested", u(this, D), u(this, M), {
        type: "function_approval",
        tool: r,
        approvalItem: new ke(t, u(this, M))
      });
      return;
    }
  }
  this.emit("agent_tool_start", u(this, D), u(this, M), r, {
    toolCall: t
  }), u(this, M).emit("agent_tool_start", u(this, D), r, {
    toolCall: t
  }), u(this, D).context.history = JSON.parse(JSON.stringify(u(this, V)));
  const i = await r.invoke(u(this, D), t.arguments), o = at(i);
  u(this, U).sendFunctionCallOutput(t, o, !0), this.emit("agent_tool_end", u(this, D), u(this, M), r, o, { toolCall: t }), u(this, M).emit("agent_tool_end", u(this, D), r, o, { toolCall: t });
}, Ca = async function(t) {
  const r = new Map(u(this, M).handoffs.map(Dn).map((o) => [o.toolName, o])), s = await u(this, M).getAllTools(u(this, D)), a = new Map(s.map((o) => [o.name, o])), i = r.get(t.name);
  if (i)
    await $(this, H, Aa).call(this, t, i);
  else {
    const o = a.get(t.name);
    if (o && o.type === "function")
      await $(this, H, vn).call(this, t, o);
    else
      throw new fe(`Tool ${t.name} not found`);
  }
}, br = async function(t, r, s) {
  if (u(this, kt).length === 0)
    return;
  const a = {
    agent: u(this, M),
    agentOutput: t,
    context: u(this, D)
  }, o = (await Promise.all(u(this, kt).map((d) => d.run(a)))).find((d) => d.output.tripwireTriggered);
  if (o) {
    if (u(this, Ct)[r])
      return;
    u(this, Ct)[r] = !0;
    const d = new rr(`Output guardrail triggered: ${JSON.stringify(o.output.outputInfo)}`, o);
    this.emit("guardrail_tripped", u(this, D), u(this, M), d, {
      itemId: s
    }), this.interrupt();
    const c = Ru(o);
    this.sendMessage(c);
    return;
  }
}, Ea = function() {
  u(this, U).on("*", (s) => {
    if (this.emit("transport_event", s), s.type === "conversation.item.input_audio_transcription.completed")
      try {
        const a = s;
        y(this, V, Jr(u(this, V), a, u(this, At))), u(this, D).context.history = u(this, V), this.emit("history_updated", u(this, V));
      } catch (a) {
        this.emit("error", {
          type: "error",
          error: a
        });
      }
  }), u(this, U).on("audio", (s) => {
    u(this, be) || (y(this, be, !0), this.emit("audio_start", u(this, D), u(this, M))), this.emit("audio", s);
  }), u(this, U).on("turn_started", () => {
    y(this, be, !1), this.emit("agent_start", u(this, D), u(this, M)), u(this, M).emit("agent_start", u(this, D), u(this, M));
  }), u(this, U).on("turn_done", (s) => {
    const a = s.response.output[s.response.output.length - 1], i = $s(a) ?? "", o = (a == null ? void 0 : a.id) ?? "";
    this.emit("agent_end", u(this, D), u(this, M), i), u(this, M).emit("agent_end", u(this, D), i), $(this, H, br).call(this, i, s.response.id, o);
  }), u(this, U).on("audio_done", () => {
    u(this, be) && y(this, be, !1), this.emit("audio_stopped", u(this, D), u(this, M));
  });
  let t = 0, r;
  u(this, U).on("audio_transcript_delta", (s) => {
    try {
      const a = s.delta, i = s.itemId, o = s.responseId;
      r !== i && (r = i, t = 0);
      const c = (u(this, ln)[i] ?? "") + a;
      if (u(this, ln)[i] = c, u(this, It).debounceTextLength < 0)
        return;
      const p = Math.floor(c.length / u(this, It).debounceTextLength);
      p > t && (t = p, $(this, H, br).call(this, c, o, i));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("item_update", (s) => {
    try {
      const a = !u(this, V).some((i) => i.itemId === s.itemId);
      if (y(this, V, Jr(u(this, V), s, u(this, At))), u(this, D).context.history = u(this, V), a) {
        const i = u(this, V).find((o) => o.itemId === s.itemId);
        i && this.emit("history_added", i);
      }
      this.emit("history_updated", u(this, V));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("item_deleted", (s) => {
    try {
      y(this, V, u(this, V).filter((a) => a.itemId !== s.itemId)), u(this, D).context.history = u(this, V), this.emit("history_updated", u(this, V));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("function_call", async (s) => {
    try {
      await $(this, H, Ca).call(this, s);
    } catch (a) {
      Ce.error("Error handling function call", a), this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("usage_update", (s) => {
    u(this, D).usage.add(s);
  }), u(this, U).on("audio_interrupted", () => {
    u(this, be) && y(this, be, !1), this.emit("audio_interrupted", u(this, D), u(this, M));
  }), u(this, U).on("error", (s) => {
    this.emit("error", s);
  });
};
const Pc = {
  base64ToArrayBuffer: Ms,
  arrayBufferToBase64: Zs,
  getLastTextFromAudioOutputMessage: $s
};
export {
  Ic as DEFAULT_OPENAI_REALTIME_MODEL,
  ve as DEFAULT_OPENAI_REALTIME_SESSION_CONFIG,
  fe as ModelBehaviorError,
  jn as OpenAIRealtimeBase,
  Ac as OpenAIRealtimeWebRTC,
  Ec as OpenAIRealtimeWebSocket,
  rr as OutputGuardrailTripwireTriggered,
  Rc as RealtimeAgent,
  Dc as RealtimeSession,
  Q as UserError,
  sr as tool,
  Pc as utils
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy5tanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvcGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvT3B0aW9ucy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3V0aWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9SZWZzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvZXJyb3JNZXNzYWdlcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvZXJyb3JVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC9kaXN0L2VzbS92My90eXBlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hbnkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FycmF5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9iaWdpbnQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2Jvb2xlYW4ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2JyYW5kZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2NhdGNoLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kYXRlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kZWZhdWx0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lZmZlY3RzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2xpdGVyYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3N0cmluZy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVjb3JkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9tYXAubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25hdGl2ZUVudW0ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25ldmVyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udWxsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmlvbi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbGFibGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bWJlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb2JqZWN0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vcHRpb25hbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcGlwZWxpbmUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Byb21pc2UubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3NldC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3VuZGVmaW5lZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5rbm93bi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVhZG9ubHkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZURlZi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3pvZFRvSnNvblNjaGVtYS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9oZWxwZXJzL3pvZC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2Vycm9ycy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3R5cGVHdWFyZHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvbG9jYWxlcy9lbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9wYXJzZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9lcnJvclV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvdHlwZXMuanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L21jcC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jcmVhdGVTcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvaW5kZXgubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9saWZlY3ljbGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ndWFyZHJhaWwubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9oYW5kb2ZmLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL21lc3NhZ2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXZlbnRzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuSW1wbGVtZW50YXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5TdGF0ZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwiLi4vcmVhbHRpbWVBZ2VudC5tanMiLCIuLi9ndWFyZHJhaWwubWpzIiwiLi4vbG9nZ2VyLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lQmFzZS5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMiLCIuLi9zaGltcy9zaGltcy1icm93c2VyLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjAuMTRcIixcbiAgICBcInZlcnNpb25zXCI6IHtcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiOiBcIjAuMC4xNFwiLFxuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLWNvcmVcIjogXCJ3b3Jrc3BhY2U6KlwiLFxuICAgICAgICBcIkBvcGVuYWkvem9kXCI6IFwibnBtOnpvZEAzLjI1LjQwIC0gMy4yNS42N1wiXG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IE1FVEFEQVRBO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0YWRhdGEubWpzLm1hcCIsImltcG9ydCBNRVRBREFUQSBmcm9tIFwiLi9tZXRhZGF0YS5tanNcIjtcbi8qKlxuICogQ29udmVydHMgYSBiYXNlNjQgc3RyaW5nIHRvIGFuIEFycmF5QnVmZmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0XG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcy5idWZmZXI7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIEFycmF5QnVmZmVyIHRvIGEgYmFzZTY0IHN0cmluZ1xuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyKSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcikpO1xuICAgIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gYW4gYXVkaW8gb3V0cHV0IG1lc3NhZ2VcbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlKGl0ZW0pIHtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0gPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnIHx8XG4gICAgICAgICEoJ3R5cGUnIGluIGl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtLnR5cGUgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICFpdGVtLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghKCdjb250ZW50JyBpbiBpdGVtKSB8fFxuICAgICAgICAhQXJyYXkuaXNBcnJheShpdGVtLmNvbnRlbnQpIHx8XG4gICAgICAgIGl0ZW0uY29udGVudC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RDb250ZW50SXRlbSA9IGl0ZW0uY29udGVudFtpdGVtLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKCEoJ3R5cGUnIGluIGxhc3RDb250ZW50SXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGxhc3RDb250ZW50SXRlbS50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50ZXh0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udGV4dFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50cmFuc2NyaXB0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENvbXBhcmUgdHdvIGNvbnZlcnNhdGlvbiBoaXN0b3JpZXMgdG8gZGV0ZXJtaW5lIHRoZSByZW1vdmFscywgYWRkaXRpb25zLCBhbmQgdXBkYXRlcy5cbiAqIEBwYXJhbSBvbGRIaXN0b3J5IC0gVGhlIG9sZCBoaXN0b3J5LlxuICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkuXG4gKiBAcmV0dXJucyBBIGRpZmYgb2YgdGhlIHR3byBoaXN0b3JpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICBjb25zdCByZW1vdmFscyA9IG9sZEhpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiAhbmV3SGlzdG9yeS5zb21lKChuZXdJdGVtKSA9PiBuZXdJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQpKTtcbiAgICBjb25zdCBhZGRpdGlvbnMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW9sZEhpc3Rvcnkuc29tZSgob2xkSXRlbSkgPT4gb2xkSXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgdXBkYXRlcyA9IG5ld0hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCAmJlxuICAgICAgICBKU09OLnN0cmluZ2lmeShvbGRJdGVtKSAhPT0gSlNPTi5zdHJpbmdpZnkoaXRlbSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmFscyxcbiAgICAgICAgYWRkaXRpb25zLFxuICAgICAgICB1cGRhdGVzLFxuICAgIH07XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIFdlYlJUQy5cbiAqIEByZXR1cm5zIFRydWUgaWYgV2ViUlRDIGlzIHN1cHBvcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzV2ViUlRDU3VwcG9ydCgpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvd1snUlRDUGVlckNvbm5lY3Rpb24nXSAhPT0gJ3VuZGVmaW5lZCc7XG59XG4vKipcbiAqIFJlbW92ZXMgdGhlIGF1ZGlvIGRhdGEgZnJvbSBhbGwgY29udGVudCBpbiBhIG1lc3NhZ2UgYnkgc2V0dGluZyBpdCB0byBudWxsLlxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBdWRpb0Zyb21Db250ZW50KGl0ZW0pIHtcbiAgICBpZiAoaXRlbS5yb2xlID09PSAnc3lzdGVtJykge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSByZWFsdGltZSBoaXN0b3J5IGFycmF5IGJhc2VkIG9uIHRoZSBpbmNvbWluZyBldmVudCBhbmQgb3B0aW9ucy5cbiAqIEBwYXJhbSBoaXN0b3J5IC0gVGhlIGN1cnJlbnQgaGlzdG9yeSBhcnJheS5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwcm9jZXNzIChSZWFsdGltZUl0ZW0pLlxuICogQHBhcmFtIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEgLSBXaGV0aGVyIHRvIGluY2x1ZGUgYXVkaW8gZGF0YSBpbiBtZXNzYWdlIGl0ZW1zLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgaGlzdG9yeSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeShoaXN0b3J5LCBldmVudCwgc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSkge1xuICAgIC8vIE1lcmdlIHRyYW5zY3JpcHQgaW50byBwbGFjZWhvbGRlciBpbnB1dF9hdWRpbyBtZXNzYWdlXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1faWQgJiZcbiAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJyAmJlxuICAgICAgICAgICAgICAgICdyb2xlJyBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IGV2ZW50LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB1cGRhdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGl0ZW1cbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChpZHggPT09IGV4aXN0aW5nSW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNob3VsZEluY2x1ZGVBdWRpb0RhdGEgJiYgaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnQucHJldmlvdXNJdGVtSWQpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGFmdGVyIHByZXZpb3VzSXRlbUlkIGlmIGZvdW5kLCBlbHNlIGF0IGVuZFxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50LnByZXZpb3VzSXRlbUlkKTtcbiAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZSgwLCBwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBoZWFkZXJzIHRvIHVzZSBmb3IgdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IEhFQURFUlMgPSB7XG4gICAgJ1VzZXItQWdlbnQnOiBgQWdlbnRzL0phdmFTY3JpcHQgJHtNRVRBREFUQS52ZXJzaW9ufWAsXG4gICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWAsXG59O1xuLyoqXG4gKiBCcm93c2VyIHdlYnNvY2tldCBoZWFkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFdFQlNPQ0tFVF9NRVRBID0gYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRXhlY3V0ZShmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgYXdhaXQgZm4oKV07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gW2Vycm9yLCBudWxsXTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYWZlRXhlY3V0ZS5tanMubWFwIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0Py5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbXBsZXRpb24sXG4gICAgICAgICAgICBjaG9pY2VzOiBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIC4uLnRvb2xDYWxsLmZ1bmN0aW9uLFxuICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0ID8gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZXIubWpzLm1hcCIsImV4cG9ydCBjb25zdCBpZ25vcmVPdmVycmlkZSA9IFN5bWJvbCgnTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZScpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogJ3Jvb3QnLFxuICAgIGVmZmVjdFN0cmF0ZWd5OiAnaW5wdXQnLFxuICAgIHBpcGVTdHJhdGVneTogJ2FsbCcsXG4gICAgZGF0ZVN0cmF0ZWd5OiAnZm9ybWF0OmRhdGUtdGltZScsXG4gICAgbWFwU3RyYXRlZ3k6ICdlbnRyaWVzJyxcbiAgICBudWxsYWJsZVN0cmF0ZWd5OiAnZnJvbS10YXJnZXQnLFxuICAgIHJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneTogJ3Bhc3N0aHJvdWdoJyxcbiAgICBkZWZpbml0aW9uUGF0aDogJ2RlZmluaXRpb25zJyxcbiAgICB0YXJnZXQ6ICdqc29uU2NoZW1hNycsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICBtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcbiAgICBwYXR0ZXJuU3RyYXRlZ3k6ICdlc2NhcGUnLFxuICAgIGFwcGx5UmVnZXhGbGFnczogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogJ2Zvcm1hdDplbWFpbCcsXG4gICAgYmFzZTY0U3RyYXRlZ3k6ICdjb250ZW50RW5jb2Rpbmc6YmFzZTY0JyxcbiAgICBuYW1lU3RyYXRlZ3k6ICdyZWYnLFxufTtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgYGRlZmluaXRpb25zYCBoZXJlIGFzIHdlIG1heSBtdXRhdGUgaXRcbiAgICByZXR1cm4gKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9ucy5tanMubWFwIiwiZXhwb3J0IGNvbnN0IHpvZERlZiA9ICh6b2RTY2hlbWEpID0+IHtcbiAgICByZXR1cm4gJ19kZWYnIGluIHpvZFNjaGVtYSA/IHpvZFNjaGVtYS5fZGVmIDogem9kU2NoZW1hO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgIGlmICghb2JqKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IF9rIGluIG9iailcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmV4cG9ydCBjb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gX29wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgX29wdGlvbnMubmFtZV1cbiAgICAgICAgOiBfb3B0aW9ucy5iYXNlUGF0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5fb3B0aW9ucyxcbiAgICAgICAgY3VycmVudFBhdGg6IGN1cnJlbnRQYXRoLFxuICAgICAgICBwcm9wZXJ0eVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VlblJlZnM6IG5ldyBTZXQoKSxcbiAgICAgICAgc2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW1xuICAgICAgICAgICAgem9kRGVmKGRlZiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVmOiB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHV0aW9uIG9mIHJlZmVyZW5jZXMgd2lsbCBiZSBmb3JjZWQgZXZlbiB0aG91Z2ggc2Vlbiwgc28gaXQncyBvayB0aGF0IHRoZSBzY2hlbWEgaXMgdW5kZWZpbmVkIGhlcmUgZm9yIG5vdy5cbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWZzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5yZXMuZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgW2tleV06IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIGtleSwgdmFsdWUsIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5tanMubWFwIiwiZXhwb3J0IHZhciB1dGlsO1xuKGZ1bmN0aW9uICh1dGlsKSB7XG4gICAgdXRpbC5hc3NlcnRFcXVhbCA9IChfKSA9PiB7IH07XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKSkuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG5leHBvcnQgdmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBab2RQYXJzZWRUeXBlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJzdHJpbmdcIixcbiAgICBcIm5hblwiLFxuICAgIFwibnVtYmVyXCIsXG4gICAgXCJpbnRlZ2VyXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiYm9vbGVhblwiLFxuICAgIFwiZGF0ZVwiLFxuICAgIFwiYmlnaW50XCIsXG4gICAgXCJzeW1ib2xcIixcbiAgICBcImZ1bmN0aW9uXCIsXG4gICAgXCJ1bmRlZmluZWRcIixcbiAgICBcIm51bGxcIixcbiAgICBcImFycmF5XCIsXG4gICAgXCJvYmplY3RcIixcbiAgICBcInVua25vd25cIixcbiAgICBcInByb21pc2VcIixcbiAgICBcInZvaWRcIixcbiAgICBcIm5ldmVyXCIsXG4gICAgXCJtYXBcIixcbiAgICBcInNldFwiLFxuXSk7XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuZXhwb3J0IGNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGZvcm1hdChfbWFwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWUudW5pb25FcnJvcnMubWFwKHByb2Nlc3NFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfYXJndW1lbnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLmFyZ3VtZW50c0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRFcnJvcnMuX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlLnBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGlzc3VlLnBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc3QgZXJyb3JBcnJheTogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlcnJvckFycmF5Ll9lcnJvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgZXJyb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3VycltlbF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRXJyb3JzO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgWm9kRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBhIFpvZEVycm9yOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMuY3VycmVudFBhdGgudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGg/LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0LCBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCwgbWFrZVBhcnNlYWJsZVRvb2wsIH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgYXMgX3pvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wgfSBmcm9tIFwiLi4vbGliL1Jlc3BvbnNlc1BhcnNlci5tanNcIjtcbmZ1bmN0aW9uIHpvZFRvSnNvblNjaGVtYShzY2hlbWEsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX3pvZFRvSnNvblNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgb3BlbmFpU3RyaWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBuYW1lU3RyYXRlZ3k6ICdkdXBsaWNhdGUtcmVmJyxcbiAgICAgICAgJHJlZlN0cmF0ZWd5OiAnZXh0cmFjdC10by1yb290JyxcbiAgICAgICAgbnVsbGFibGVTdHJhdGVneTogJ3Byb3BlcnR5JyxcbiAgICB9KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgSlNPTlNjaGVtYWAgcmVzcG9uc2UgZm9ybWF0IG9iamVjdCBmcm9tXG4gKiB0aGUgZ2l2ZW4gWm9kIHNjaGVtYS5cbiAqXG4gKiBJZiB0aGlzIGlzIHBhc3NlZCB0byB0aGUgYC5wYXJzZSgpYCwgYC5zdHJlYW0oKWAgb3IgYC5ydW5Ub29scygpYFxuICogY2hhdCBjb21wbGV0aW9uIG1ldGhvZHMgdGhlbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSB3aWxsIGNvbnRhaW4gYVxuICogYC5wYXJzZWRgIHByb3BlcnR5IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSBjb250ZW50IHdpdGhcbiAqIHRoZSBnaXZlbiBab2Qgb2JqZWN0LlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMucGFyc2Uoe1xuICogICAgbW9kZWw6ICdncHQtNG8tMjAyNC0wOC0wNicsXG4gKiAgICBtZXNzYWdlczogW1xuICogICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgbWF0aCB0dXRvci4nIH0sXG4gKiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnc29sdmUgOHggKyAzMSA9IDInIH0sXG4gKiAgICBdLFxuICogICAgcmVzcG9uc2VfZm9ybWF0OiB6b2RSZXNwb25zZUZvcm1hdChcbiAqICAgICAgei5vYmplY3Qoe1xuICogICAgICAgIHN0ZXBzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAqICAgICAgICAgIGV4cGxhbmF0aW9uOiB6LnN0cmluZygpLFxuICogICAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICAgIH0pKSxcbiAqICAgICAgICBmaW5hbF9hbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgIH0pLFxuICogICAgICAnbWF0aF9hbnN3ZXInLFxuICogICAgKSxcbiAqICB9KTtcbiAqICBjb25zdCBtZXNzYWdlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlO1xuICogIGlmIChtZXNzYWdlPy5wYXJzZWQpIHtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkKTtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkLmZpbmFsX2Fuc3dlcik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIGAuY3JlYXRlKClgIG1ldGhvZCBidXQgd2lsbCBub3RcbiAqIHJlc3VsdCBpbiBhbnkgYXV0b21hdGljIHBhcnNpbmcsIHlvdSdsbCBoYXZlIHRvIHBhcnNlIHRoZSByZXNwb25zZSB5b3Vyc2VsZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlRm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgICAgICB9LFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFRleHRGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBuYW1lLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBmdW5jdGlvbmAgdG9vbCB0aGF0IGNhbiBiZSBpbnZva2VkXG4gKiBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjaGF0IGNvbXBsZXRpb24gYC5ydW5Ub29scygpYCBtZXRob2Qgb3IgYXV0b21hdGljYWxseVxuICogcGFyc2VkIGJ5IGAucGFyc2UoKWAgLyBgLnN0cmVhbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZEZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE9cbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5kZXNjcmlwdGlvbiA/IHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgIH0sXG4gICAgfSwge1xuICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5mdW5jdGlvbixcbiAgICAgICAgcGFyc2VyOiAoYXJncykgPT4gb3B0aW9ucy5wYXJhbWV0ZXJzLnBhcnNlKEpTT04ucGFyc2UoYXJncykpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlc0Z1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZC5tanMubWFwIiwiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgZXJyb3JzIHRocm93biBieSB0aGUgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCIvKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdfZGVmJyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuX2RlZiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQuX2RlZiAhPT0gbnVsbCAmJlxuICAgICAgICAndHlwZU5hbWUnIGluIGlucHV0Ll9kZWYgJiZcbiAgICAgICAgaW5wdXQuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE9iamVjdCcpO1xufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGFuIG9iamVjdCB3aXRoIGFuIGBpbnB1dGAgcHJvcGVydHkuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FnZW50VG9vbElucHV0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdpbnB1dCcgaW4gaW5wdXQgJiZcbiAgICAgICAgdHlwZW9mIGlucHV0LmlucHV0ID09PSAnc3RyaW5nJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlR3VhcmRzLm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgZnVuY3Rpb24gdG9vbCBuYW1lIGJ5IHJlcGxhY2luZyBzcGFjZXMgd2l0aCB1bmRlcnNjb3JlcyBhbmRcbiAqIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBmdW5jdGlvbiB0b29sIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Z1bmN0aW9uVG9vbE5hbWUobmFtZSkge1xuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbiAgICAvLyBSZXBsYWNlIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldL2csICdfJyk7XG4gICAgLy8gRW5zdXJlIHRoZSBuYW1lIGlzIG5vdCBlbXB0eVxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rvb2wgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWU7XG59XG4vKipcbiAqIEdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbSBhbiBpbnB1dCB0eXBlLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIFpvZE9iamVjdCwgd2Ugd2lsbCBjb252ZXJ0XG4gKiBpdCBpbnRvIGEgSlNPTiBTY2hlbWEgYW5kIHVzZSBab2QgYXMgcGFyc2VyLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIEpTT04gc2NoZW1hLCB3ZSB1c2UgdGhlXG4gKiBKU09OLnBhcnNlIGZ1bmN0aW9uIHRvIGdldCB0aGUgcGFyc2VyLlxuICogQHBhcmFtIGlucHV0VHlwZSAtIFRoZSBpbnB1dCB0eXBlIHRvIGdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgc2NoZW1hIGFuZCBwYXJzZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGlucHV0VHlwZSwgbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlciA9IChpbnB1dCkgPT4gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgaWYgKGlzWm9kT2JqZWN0KGlucHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRnVuY3Rpb24gPSB6b2RSZXNwb25zZXNGdW5jdGlvbih7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogaW5wdXRUeXBlLFxuICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcGFyc2VyOiBmb3JtYXR0ZWRGdW5jdGlvbi4kcGFyc2VSYXcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gem9kVGV4dEZvcm1hdChvdXRwdXRUeXBlLCAnb3V0cHV0Jyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0VHlwZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xzLm1qcy5tYXAiLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblx0XHRsZXQgbmFtZXNwYWNlc0NhY2hlO1xuXHRcdGxldCBlbmFibGVkQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG5cdFx0XHQvLyBEaXNhYmxlZD9cblx0XHRcdGlmICghZGVidWcuZW5hYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNlbGYgPSBkZWJ1ZztcblxuXHRcdFx0Ly8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0XHRcdGNvbnN0IGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjb25zdCBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG5cdFx0XHRzZWxmLmRpZmYgPSBtcztcblx0XHRcdHNlbGYucHJldiA9IHByZXZUaW1lO1xuXHRcdFx0c2VsZi5jdXJyID0gY3Vycjtcblx0XHRcdHByZXZUaW1lID0gY3VycjtcblxuXHRcdFx0YXJnc1swXSA9IGNyZWF0ZURlYnVnLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlT1xuXHRcdFx0XHRhcmdzLnVuc2hpZnQoJyVPJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IGFueSBgZm9ybWF0dGVyc2AgdHJhbnNmb3JtYXRpb25zXG5cdFx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdFx0YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG5cdFx0XHRcdC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcblx0XHRcdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICclJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsID0gYXJnc1tpbmRleF07XG5cdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG5cdFx0XHRcdFx0Ly8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKVxuXHRcdFx0Y3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuXG5cdFx0XHRjb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcblx0XHRcdGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRkZWJ1Zy51c2VDb2xvcnMgPSBjcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKTtcblx0XHRkZWJ1Zy5jb2xvciA9IGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG5cdFx0ZGVidWcuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcdGRlYnVnLmRlc3Ryb3kgPSBjcmVhdGVEZWJ1Zy5kZXN0cm95OyAvLyBYWFggVGVtcG9yYXJ5LiBXaWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuXHRcdFx0XHRcdG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG5cdFx0XHRcdFx0ZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVuYWJsZWRDYWNoZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cdFx0Y3JlYXRlRGVidWcubmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCAnLCcpXG5cdFx0XHQuc3BsaXQoJywnKVxuXHRcdFx0LmZpbHRlcihCb29sZWFuKTtcblxuXHRcdGZvciAoY29uc3QgbnMgb2Ygc3BsaXQpIHtcblx0XHRcdGlmIChuc1swXSA9PT0gJy0nKSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLnNraXBzLnB1c2gobnMuc2xpY2UoMSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcubmFtZXMucHVzaChucyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBuYW1lc3BhY2UgdGVtcGxhdGUsIGhvbm9yaW5nXG5cdCAqIGFzdGVyaXNrcyBhcyB3aWxkY2FyZHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRjaGVzVGVtcGxhdGUoc2VhcmNoLCB0ZW1wbGF0ZSkge1xuXHRcdGxldCBzZWFyY2hJbmRleCA9IDA7XG5cdFx0bGV0IHRlbXBsYXRlSW5kZXggPSAwO1xuXHRcdGxldCBzdGFySW5kZXggPSAtMTtcblx0XHRsZXQgbWF0Y2hJbmRleCA9IDA7XG5cblx0XHR3aGlsZSAoc2VhcmNoSW5kZXggPCBzZWFyY2gubGVuZ3RoKSB7XG5cdFx0XHRpZiAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09IHNlYXJjaFtzZWFyY2hJbmRleF0gfHwgdGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykpIHtcblx0XHRcdFx0Ly8gTWF0Y2ggY2hhcmFjdGVyIG9yIHByb2NlZWQgd2l0aCB3aWxkY2FyZFxuXHRcdFx0XHRpZiAodGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykge1xuXHRcdFx0XHRcdHN0YXJJbmRleCA9IHRlbXBsYXRlSW5kZXg7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleCA9IHNlYXJjaEluZGV4O1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKzsgLy8gU2tpcCB0aGUgJyonXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VhcmNoSW5kZXgrKztcblx0XHRcdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc3RhckluZGV4ICE9PSAtMSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5lZ2F0ZWQtY29uZGl0aW9uXG5cdFx0XHRcdC8vIEJhY2t0cmFjayB0byB0aGUgbGFzdCAnKicgYW5kIHRyeSB0byBtYXRjaCBtb3JlIGNoYXJhY3RlcnNcblx0XHRcdFx0dGVtcGxhdGVJbmRleCA9IHN0YXJJbmRleCArIDE7XG5cdFx0XHRcdG1hdGNoSW5kZXgrKztcblx0XHRcdFx0c2VhcmNoSW5kZXggPSBtYXRjaEluZGV4O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBtYXRjaFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSB0cmFpbGluZyAnKicgaW4gdGVtcGxhdGVcblx0XHR3aGlsZSAodGVtcGxhdGVJbmRleCA8IHRlbXBsYXRlLmxlbmd0aCAmJiB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHR0ZW1wbGF0ZUluZGV4Kys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRlbXBsYXRlSW5kZXggPT09IHRlbXBsYXRlLmxlbmd0aDtcblx0fVxuXG5cdC8qKlxuXHQqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuXHQqXG5cdCogQHJldHVybiB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZGlzYWJsZSgpIHtcblx0XHRjb25zdCBuYW1lc3BhY2VzID0gW1xuXHRcdFx0Li4uY3JlYXRlRGVidWcubmFtZXMsXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5za2lwcy5tYXAobmFtZXNwYWNlID0+ICctJyArIG5hbWVzcGFjZSlcblx0XHRdLmpvaW4oJywnKTtcblx0XHRjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuXHRcdHJldHVybiBuYW1lc3BhY2VzO1xuXHR9XG5cblx0LyoqXG5cdCogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBtb2RlIG5hbWUgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0KiBAcmV0dXJuIHtCb29sZWFufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuXHRcdGZvciAoY29uc3Qgc2tpcCBvZiBjcmVhdGVEZWJ1Zy5za2lwcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBza2lwKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBjcmVhdGVEZWJ1Zy5uYW1lcykge1xuXHRcdFx0aWYgKG1hdGNoZXNUZW1wbGF0ZShuYW1lLCBucykpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCogQ29lcmNlIGB2YWxgLlxuXHQqXG5cdCogQHBhcmFtIHtNaXhlZH0gdmFsXG5cdCogQHJldHVybiB7TWl4ZWR9XG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcblx0XHRpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cblxuXHQvKipcblx0KiBYWFggRE8gTk9UIFVTRS4gVGhpcyBpcyBhIHRlbXBvcmFyeSBzdHViIGZ1bmN0aW9uLlxuXHQqIFhYWCBJdCBXSUxMIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblx0Ki9cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0fVxuXG5cdGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuXG5cdHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcbiIsIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuZXhwb3J0cy5kZXN0cm95ID0gKCgpID0+IHtcblx0bGV0IHdhcm5lZCA9IGZhbHNlO1xuXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKCF3YXJuZWQpIHtcblx0XHRcdHdhcm5lZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0luc3RhbmNlIG1ldGhvZCBgZGVidWcuZGVzdHJveSgpYCBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgZG9lcyBhbnl0aGluZy4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgYGRlYnVnYC4nKTtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcblx0JyMwMDAwQ0MnLFxuXHQnIzAwMDBGRicsXG5cdCcjMDAzM0NDJyxcblx0JyMwMDMzRkYnLFxuXHQnIzAwNjZDQycsXG5cdCcjMDA2NkZGJyxcblx0JyMwMDk5Q0MnLFxuXHQnIzAwOTlGRicsXG5cdCcjMDBDQzAwJyxcblx0JyMwMENDMzMnLFxuXHQnIzAwQ0M2NicsXG5cdCcjMDBDQzk5Jyxcblx0JyMwMENDQ0MnLFxuXHQnIzAwQ0NGRicsXG5cdCcjMzMwMENDJyxcblx0JyMzMzAwRkYnLFxuXHQnIzMzMzNDQycsXG5cdCcjMzMzM0ZGJyxcblx0JyMzMzY2Q0MnLFxuXHQnIzMzNjZGRicsXG5cdCcjMzM5OUNDJyxcblx0JyMzMzk5RkYnLFxuXHQnIzMzQ0MwMCcsXG5cdCcjMzNDQzMzJyxcblx0JyMzM0NDNjYnLFxuXHQnIzMzQ0M5OScsXG5cdCcjMzNDQ0NDJyxcblx0JyMzM0NDRkYnLFxuXHQnIzY2MDBDQycsXG5cdCcjNjYwMEZGJyxcblx0JyM2NjMzQ0MnLFxuXHQnIzY2MzNGRicsXG5cdCcjNjZDQzAwJyxcblx0JyM2NkNDMzMnLFxuXHQnIzk5MDBDQycsXG5cdCcjOTkwMEZGJyxcblx0JyM5OTMzQ0MnLFxuXHQnIzk5MzNGRicsXG5cdCcjOTlDQzAwJyxcblx0JyM5OUNDMzMnLFxuXHQnI0NDMDAwMCcsXG5cdCcjQ0MwMDMzJyxcblx0JyNDQzAwNjYnLFxuXHQnI0NDMDA5OScsXG5cdCcjQ0MwMENDJyxcblx0JyNDQzAwRkYnLFxuXHQnI0NDMzMwMCcsXG5cdCcjQ0MzMzMzJyxcblx0JyNDQzMzNjYnLFxuXHQnI0NDMzM5OScsXG5cdCcjQ0MzM0NDJyxcblx0JyNDQzMzRkYnLFxuXHQnI0NDNjYwMCcsXG5cdCcjQ0M2NjMzJyxcblx0JyNDQzk5MDAnLFxuXHQnI0NDOTkzMycsXG5cdCcjQ0NDQzAwJyxcblx0JyNDQ0NDMzMnLFxuXHQnI0ZGMDAwMCcsXG5cdCcjRkYwMDMzJyxcblx0JyNGRjAwNjYnLFxuXHQnI0ZGMDA5OScsXG5cdCcjRkYwMENDJyxcblx0JyNGRjAwRkYnLFxuXHQnI0ZGMzMwMCcsXG5cdCcjRkYzMzMzJyxcblx0JyNGRjMzNjYnLFxuXHQnI0ZGMzM5OScsXG5cdCcjRkYzM0NDJyxcblx0JyNGRjMzRkYnLFxuXHQnI0ZGNjYwMCcsXG5cdCcjRkY2NjMzJyxcblx0JyNGRjk5MDAnLFxuXHQnI0ZGOTkzMycsXG5cdCcjRkZDQzAwJyxcblx0JyNGRkNDMzMnXG5dO1xuXG4vKipcbiAqIEN1cnJlbnRseSBvbmx5IFdlYktpdC1iYXNlZCBXZWIgSW5zcGVjdG9ycywgRmlyZWZveCA+PSB2MzEsXG4gKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cbiAqIHRvIHN1cHBvcnQgXCIlY1wiIENTUyBjdXN0b21pemF0aW9ucy5cbiAqXG4gKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuICovXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG5cdC8vIE5COiBJbiBhbiBFbGVjdHJvbiBwcmVsb2FkIHNjcmlwdCwgZG9jdW1lbnQgd2lsbCBiZSBkZWZpbmVkIGJ1dCBub3QgZnVsbHlcblx0Ly8gaW5pdGlhbGl6ZWQuIFNpbmNlIHdlIGtub3cgd2UncmUgaW4gQ2hyb21lLCB3ZSdsbCBqdXN0IGRldGVjdCB0aGlzIGNhc2Vcblx0Ly8gZXhwbGljaXRseVxuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3MgJiYgKHdpbmRvdy5wcm9jZXNzLnR5cGUgPT09ICdyZW5kZXJlcicgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXHRpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRsZXQgbTtcblxuXHQvLyBJcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQvLyBkb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gcmVhY3QtbmF0aXZlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL3B1bGwvMTYzMlxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmV0dXJuLWFzc2lnblxuXHRyZXR1cm4gKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSkgfHxcblx0XHQvLyBJcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG5cdFx0KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8ICh3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpKSkgfHxcblx0XHQvLyBJcyBmaXJlZm94ID49IHYzMT9cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiAobSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pKSAmJiBwYXJzZUludChtWzFdLCAxMCkgPj0gMzEpIHx8XG5cdFx0Ly8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKSk7XG59XG5cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG5cdGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyAnJWMnIDogJycpICtcblx0XHR0aGlzLm5hbWVzcGFjZSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICtcblx0XHRhcmdzWzBdICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgK1xuXHRcdCcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cblx0aWYgKCF0aGlzLnVzZUNvbG9ycykge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuXHRhcmdzLnNwbGljZSgxLCAwLCBjLCAnY29sb3I6IGluaGVyaXQnKTtcblxuXHQvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG5cdC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXHRsZXQgaW5kZXggPSAwO1xuXHRsZXQgbGFzdEMgPSAwO1xuXHRhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgbWF0Y2ggPT4ge1xuXHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpbmRleCsrO1xuXHRcdGlmIChtYXRjaCA9PT0gJyVjJykge1xuXHRcdFx0Ly8gV2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdFx0XHQvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuXHRcdFx0bGFzdEMgPSBpbmRleDtcblx0XHR9XG5cdH0pO1xuXG5cdGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cblxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmRlYnVnKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICogSWYgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhdmFpbGFibGUsIGZhbGxzIGJhY2tcbiAqIHRvIGBjb25zb2xlLmxvZ2AuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7fSk7XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpIHtcblx0dHJ5IHtcblx0XHRpZiAobmFtZXNwYWNlcykge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnNldEl0ZW0oJ2RlYnVnJywgbmFtZXNwYWNlcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbG9hZCgpIHtcblx0bGV0IHI7XG5cdHRyeSB7XG5cdFx0ciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpIHx8IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdERUJVRycpIDtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cblxuXHQvLyBJZiBkZWJ1ZyBpc24ndCBzZXQgaW4gTFMsIGFuZCB3ZSdyZSBpbiBFbGVjdHJvbiwgdHJ5IHRvIGxvYWQgJERFQlVHXG5cdGlmICghciAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2VudicgaW4gcHJvY2Vzcykge1xuXHRcdHIgPSBwcm9jZXNzLmVudi5ERUJVRztcblx0fVxuXG5cdHJldHVybiByO1xufVxuXG4vKipcbiAqIExvY2Fsc3RvcmFnZSBhdHRlbXB0cyB0byByZXR1cm4gdGhlIGxvY2Fsc3RvcmFnZS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNhZmFyaSB0aHJvd3NcbiAqIHdoZW4gYSB1c2VyIGRpc2FibGVzIGNvb2tpZXMvbG9jYWxzdG9yYWdlXG4gKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuICpcbiAqIEByZXR1cm4ge0xvY2FsU3RvcmFnZX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHtcblx0dHJ5IHtcblx0XHQvLyBUVk1MS2l0IChBcHBsZSBUViBKUyBSdW50aW1lKSBkb2VzIG5vdCBoYXZlIGEgd2luZG93IG9iamVjdCwganVzdCBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0XG5cdFx0Ly8gVGhlIEJyb3dzZXIgYWxzbyBoYXMgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dC5cblx0XHRyZXR1cm4gbG9jYWxTdG9yYWdlO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY29tbW9uJykoZXhwb3J0cyk7XG5cbmNvbnN0IHtmb3JtYXR0ZXJzfSA9IG1vZHVsZS5leHBvcnRzO1xuXG4vKipcbiAqIE1hcCAlaiB0byBgSlNPTi5zdHJpbmdpZnkoKWAsIHNpbmNlIG5vIFdlYiBJbnNwZWN0b3JzIGRvIHRoYXQgYnkgZGVmYXVsdC5cbiAqL1xuXG5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbiAodikge1xuXHR0cnkge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRyZXR1cm4gJ1tVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiAnICsgZXJyb3IubWVzc2FnZTtcblx0fVxufTtcbiIsImltcG9ydCB7IGxvYWRFbnYgYXMgX2xvYWRFbnYsIGlzQnJvd3NlckVudmlyb25tZW50LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbi8qKlxuICogTG9hZHMgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gdGhlIHByb2Nlc3MgZW52aXJvbm1lbnQuXG4gKlxuICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIF9sb2FkRW52KCk7XG59XG4vKipcbiAqIENoZWNrcyBpZiBhIGZsYWcgaXMgZW5hYmxlZCBpbiB0aGUgZW52aXJvbm1lbnQuXG4gKlxuICogQHBhcmFtIGZsYWdOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZsYWcgdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZsYWcgaXMgZW5hYmxlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzRW5hYmxlZChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGVudiA9IGxvYWRFbnYoKTtcbiAgICByZXR1cm4gKHR5cGVvZiBlbnYgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIChlbnZbZmxhZ05hbWVdID09PSAndHJ1ZScgfHwgZW52W2ZsYWdOYW1lXSA9PT0gJzEnKSk7XG59XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciB0cmFjaW5nLlxuICovXG5leHBvcnQgY29uc3QgdHJhY2luZyA9IHtcbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsb2FkRW52KCkuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgLy8gZGlzYWJsaW5nIGJ5IGRlZmF1bHQgaW4gdGVzdHNcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRElTQUJMRV9UUkFDSU5HJyk7XG4gICAgfSxcbn07XG4vKipcbiAqIEdsb2JhbCBjb25maWd1cmF0aW9uIGZvciBsb2dnaW5nLlxuICovXG5leHBvcnQgY29uc3QgbG9nZ2luZyA9IHtcbiAgICBnZXQgZG9udExvZ01vZGVsRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19NT0RFTF9EQVRBJyk7XG4gICAgfSxcbiAgICBnZXQgZG9udExvZ1Rvb2xEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX1RPT0xfREFUQScpO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLm1qcy5tYXAiLCJpbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgbG9nZ2luZyB9IGZyb20gXCIuL2NvbmZpZy5tanNcIjtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgTExNIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nTW9kZWxEYXRhID0gbG9nZ2luZy5kb250TG9nTW9kZWxEYXRhO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyB0b29sIGlucHV0cy9vdXRwdXRzLCB0byBwcmV2ZW50IGV4cG9zaW5nIHNlbnNpdGl2ZSBkYXRhLiBTZXQgdGhpcyBmbGFnXG4gKiB0byBlbmFibGUgbG9nZ2luZyB0aGVtLlxuICovXG5jb25zdCBkb250TG9nVG9vbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dUb29sRGF0YTtcbi8qKlxuICogR2V0IGEgbG9nZ2VyIGZvciBhIGdpdmVuIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIG5hbWVzcGFjZSAtIHRoZSBuYW1lc3BhY2UgdG8gdXNlIGZvciB0aGUgbG9nZ2VyLlxuICogQHJldHVybnMgQSBsb2dnZXIgb2JqZWN0IHdpdGggYGRlYnVnYCBhbmQgYGVycm9yYCBtZXRob2RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWVzcGFjZSA9ICdvcGVuYWktYWdlbnRzJykge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgZGVidWc6IGRlYnVnKG5hbWVzcGFjZSksXG4gICAgICAgIGVycm9yOiBjb25zb2xlLmVycm9yLFxuICAgICAgICB3YXJuOiBjb25zb2xlLndhcm4sXG4gICAgICAgIGRvbnRMb2dNb2RlbERhdGEsXG4gICAgICAgIGRvbnRMb2dUb29sRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpjb3JlJyk7XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiB0b1NtYXJ0U3RyaW5nKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZSkge1xuICAgICAgICAgICAgcmV0dXJuICdbb2JqZWN0IHdpdGggY2lyY3VsYXIgcmVmZXJlbmNlc10nO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c21hcnRTdHJpbmcubWpzLm1hcCIsImltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG4vKipcbiAqIEV4cG9zZXMgYSBjb21wdXRlciB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZFxuICpcbiAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbXB1dGVyIHRvb2wgbGlrZSBzcGVjaWZ5aW5nIHRoZSBsb2NhdGlvbiBvZiB5b3VyIGFnZW50XG4gKiBAcmV0dXJucyBhIGNvbXB1dGVyIHRvb2wgZGVmaW5pdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZXJUb29sKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2NvbXB1dGVyX3VzZV9wcmV2aWV3JyxcbiAgICAgICAgY29tcHV0ZXI6IG9wdGlvbnMuY29tcHV0ZXIsXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhvc3RlZCBNQ1AgdG9vbCBkZWZpbml0aW9uLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJMYWJlbCAtIFRoZSBsYWJlbCBpZGVudGlmeWluZyB0aGUgTUNQIHNlcnZlci5cbiAqIEBwYXJhbSBzZXJ2ZXJVcmwgLSBUaGUgVVJMIG9mIHRoZSBNQ1Agc2VydmVyLlxuICogQHBhcmFtIHJlcXVpcmVBcHByb3ZhbCAtIFdoZXRoZXIgdG9vbCBjYWxscyByZXF1aXJlIGFwcHJvdmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdGVkTWNwVG9vbChvcHRpb25zKSB7XG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ25ldmVyJ1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgc2VydmVyX3VybDogb3B0aW9ucy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgOiBidWlsZFJlcXVpcmVBcHByb3ZhbChvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCksXG4gICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIGFuIGVycm9yIG9jY3VycyB3aGlsZSBydW5uaW5nIHRoZSB0b29sLlxuICpcbiAqIEFsd2F5cyByZXR1cm5zIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBydW5uaW5nIHRoZSB0b29sLiBQbGVhc2UgdHJ5IGFnYWluLiBFcnJvcjogPGVycm9yIGRldGFpbHM+YFxuICpcbiAqIEBwYXJhbSBjb250ZXh0IEFuIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IFJ1bkNvbnRleHRcbiAqIEBwYXJhbSBlcnJvciBUaGUgZXJyb3IgdGhhdCBvY2N1cnJlZFxuICovXG5mdW5jdGlvbiBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24oY29udGV4dCwgZXJyb3IpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnRvU3RyaW5nKCkgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6ICR7ZGV0YWlsc31gO1xufVxuLyoqXG4gKiBFeHBvc2VzIGEgZnVuY3Rpb24gdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIHRvb2xcbiAqIEByZXR1cm5zIEEgbmV3IHRvb2xcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICAgICAgPyB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5uYW1lKVxuICAgICAgICA6IHRvRnVuY3Rpb25Ub29sTmFtZShvcHRpb25zLmV4ZWN1dGUubmFtZSk7XG4gICAgY29uc3QgdG9vbEVycm9yRnVuY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5lcnJvckZ1bmN0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGRlZmF1bHRUb29sRXJyb3JGdW5jdGlvblxuICAgICAgICA6IG9wdGlvbnMuZXJyb3JGdW5jdGlvbjtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5LiBFaXRoZXIgbmFtZSB5b3VyIGZ1bmN0aW9uIG9yIHByb3ZpZGUgYSBuYW1lIGluIHRoZSBvcHRpb25zLicpO1xuICAgIH1cbiAgICBjb25zdCBzdHJpY3RNb2RlID0gb3B0aW9ucy5zdHJpY3QgPz8gdHJ1ZTtcbiAgICBpZiAoIXN0cmljdE1vZGUgJiYgaXNab2RPYmplY3Qob3B0aW9ucy5wYXJhbWV0ZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdTdHJpY3QgbW9kZSBpcyByZXF1aXJlZCBmb3IgWm9kIHBhcmFtZXRlcnMnKTtcbiAgICB9XG4gICAgY29uc3QgeyBwYXJzZXIsIHNjaGVtYTogcGFyYW1ldGVycyB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShvcHRpb25zLnBhcmFtZXRlcnMsIG5hbWUpO1xuICAgIGFzeW5jIGZ1bmN0aW9uIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQpIHtcbiAgICAgICAgY29uc3QgW2Vycm9yLCBwYXJzZWRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKGlucHV0KSk7XG4gICAgICAgIGlmIChlcnJvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9OiAke2lucHV0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52b2tpbmcgdG9vbCAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfSB3aXRoIGlucHV0ICR7aW5wdXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW9ucy5leGVjdXRlKHBhcnNlZCwgcnVuQ29udGV4dCk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IGNvbXBsZXRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUb29sICR7bmFtZX0gcmV0dXJuZWQ6ICR7c3RyaW5nUmVzdWx0fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShydW5Db250ZXh0LCBpbnB1dCkge1xuICAgICAgICByZXR1cm4gX2ludm9rZShydW5Db250ZXh0LCBpbnB1dCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAodG9vbEVycm9yRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCAobm9uLWZhdGFsKScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sRXJyb3JGdW5jdGlvbihydW5Db250ZXh0LCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgc3RyaWN0OiBzdHJpY3RNb2RlLFxuICAgICAgICBpbnZva2UsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVxdWlyZUFwcHJvdmFsKHJlcXVpcmVBcHByb3ZhbCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChyZXF1aXJlQXBwcm92YWwuYWx3YXlzKSB7XG4gICAgICAgIHJlc3VsdC5hbHdheXMgPSB7IHRvb2xfbmFtZXM6IHJlcXVpcmVBcHByb3ZhbC5hbHdheXMudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIGlmIChyZXF1aXJlQXBwcm92YWwubmV2ZXIpIHtcbiAgICAgICAgcmVzdWx0Lm5ldmVyID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwubmV2ZXIudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihhbGxvd2VkVG9vbHMpIHtcbiAgICBpZiAodHlwZW9mIGFsbG93ZWRUb29scyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsb3dlZFRvb2xzKSkge1xuICAgICAgICByZXR1cm4geyB0b29sX25hbWVzOiBhbGxvd2VkVG9vbHMgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzPy50b29sTmFtZXMgPz8gW10gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2wubWpzLm1hcCIsImV4cG9ydCB2YXIgdXRpbDtcbihmdW5jdGlvbiAodXRpbCkge1xuICAgIHV0aWwuYXNzZXJ0RXF1YWwgPSAoXykgPT4geyB9O1xuICAgIGZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsgfVxuICAgIHV0aWwuYXNzZXJ0SXMgPSBhc3NlcnRJcztcbiAgICBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgdXRpbC5hc3NlcnROZXZlciA9IGFzc2VydE5ldmVyO1xuICAgIHV0aWwuYXJyYXlUb0VudW0gPSAoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgb2JqW2l0ZW1dID0gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gICAgdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhvYmopLmZpbHRlcigoaykgPT4gdHlwZW9mIG9ialtvYmpba11dICE9PSBcIm51bWJlclwiKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIHZhbGlkS2V5cykge1xuICAgICAgICAgICAgZmlsdGVyZWRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKGZpbHRlcmVkKTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0VmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RLZXlzKG9iaikubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2VdO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0S2V5cyA9IHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gXCJmdW5jdGlvblwiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA/IChvYmopID0+IE9iamVjdC5rZXlzKG9iaikgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH07XG4gICAgdXRpbC5maW5kID0gKGFyciwgY2hlY2tlcikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tlcihpdGVtKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgdXRpbC5pc0ludGVnZXIgPSB0eXBlb2YgTnVtYmVyLmlzSW50ZWdlciA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gKHZhbCkgPT4gTnVtYmVyLmlzSW50ZWdlcih2YWwpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbCkgJiYgTWF0aC5mbG9vcih2YWwpID09PSB2YWw7XG4gICAgZnVuY3Rpb24gam9pblZhbHVlcyhhcnJheSwgc2VwYXJhdG9yID0gXCIgfCBcIikge1xuICAgICAgICByZXR1cm4gYXJyYXkubWFwKCh2YWwpID0+ICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiID8gYCcke3ZhbH0nYCA6IHZhbCkpLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9XG4gICAgdXRpbC5qb2luVmFsdWVzID0gam9pblZhbHVlcztcbiAgICB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciA9IChfLCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn0pKHV0aWwgfHwgKHV0aWwgPSB7fSkpO1xuZXhwb3J0IHZhciBvYmplY3RVdGlsO1xuKGZ1bmN0aW9uIChvYmplY3RVdGlsKSB7XG4gICAgb2JqZWN0VXRpbC5tZXJnZVNoYXBlcyA9IChmaXJzdCwgc2Vjb25kKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5maXJzdCxcbiAgICAgICAgICAgIC4uLnNlY29uZCwgLy8gc2Vjb25kIG92ZXJ3cml0ZXMgZmlyc3RcbiAgICAgICAgfTtcbiAgICB9O1xufSkob2JqZWN0VXRpbCB8fCAob2JqZWN0VXRpbCA9IHt9KSk7XG5leHBvcnQgY29uc3QgWm9kUGFyc2VkVHlwZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwic3RyaW5nXCIsXG4gICAgXCJuYW5cIixcbiAgICBcIm51bWJlclwiLFxuICAgIFwiaW50ZWdlclwiLFxuICAgIFwiZmxvYXRcIixcbiAgICBcImJvb2xlYW5cIixcbiAgICBcImRhdGVcIixcbiAgICBcImJpZ2ludFwiLFxuICAgIFwic3ltYm9sXCIsXG4gICAgXCJmdW5jdGlvblwiLFxuICAgIFwidW5kZWZpbmVkXCIsXG4gICAgXCJudWxsXCIsXG4gICAgXCJhcnJheVwiLFxuICAgIFwib2JqZWN0XCIsXG4gICAgXCJ1bmtub3duXCIsXG4gICAgXCJwcm9taXNlXCIsXG4gICAgXCJ2b2lkXCIsXG4gICAgXCJuZXZlclwiLFxuICAgIFwibWFwXCIsXG4gICAgXCJzZXRcIixcbl0pO1xuZXhwb3J0IGNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zdHJpbmc7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBab2RQYXJzZWRUeXBlLm5hbiA6IFpvZFBhcnNlZFR5cGUubnVtYmVyO1xuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYm9vbGVhbjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbjtcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYmlnaW50O1xuICAgICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zeW1ib2w7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50aGVuICYmIHR5cGVvZiBkYXRhLnRoZW4gPT09IFwiZnVuY3Rpb25cIiAmJiBkYXRhLmNhdGNoICYmIHR5cGVvZiBkYXRhLmNhdGNoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5wcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBNYXAgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm1hcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIERhdGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5kYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUub2JqZWN0O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5rbm93bjtcbiAgICB9XG59O1xuIiwiaW1wb3J0IHsgdXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0IFpvZElzc3VlQ29kZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwiaW52YWxpZF90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2xpdGVyYWxcIixcbiAgICBcImN1c3RvbVwiLFxuICAgIFwiaW52YWxpZF91bmlvblwiLFxuICAgIFwiaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yXCIsXG4gICAgXCJpbnZhbGlkX2VudW1fdmFsdWVcIixcbiAgICBcInVucmVjb2duaXplZF9rZXlzXCIsXG4gICAgXCJpbnZhbGlkX2FyZ3VtZW50c1wiLFxuICAgIFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiLFxuICAgIFwiaW52YWxpZF9kYXRlXCIsXG4gICAgXCJpbnZhbGlkX3N0cmluZ1wiLFxuICAgIFwidG9vX3NtYWxsXCIsXG4gICAgXCJ0b29fYmlnXCIsXG4gICAgXCJpbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlc1wiLFxuICAgIFwibm90X211bHRpcGxlX29mXCIsXG4gICAgXCJub3RfZmluaXRlXCIsXG5dKTtcbmV4cG9ydCBjb25zdCBxdW90ZWxlc3NKc29uID0gKG9iaikgPT4ge1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpO1xuICAgIHJldHVybiBqc29uLnJlcGxhY2UoL1wiKFteXCJdKylcIjovZywgXCIkMTpcIik7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGdldCBlcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaXNzdWVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gW107XG4gICAgICAgIHRoaXMuYWRkSXNzdWUgPSAoc3ViKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3Vlcywgc3ViXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZXMgPSAoc3VicyA9IFtdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3VlcywgLi4uc3Vic107XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFjdHVhbFByb3RvID0gbmV3LnRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgYWN0dWFsUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fX3Byb3RvX18gPSBhY3R1YWxQcm90bztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBcIlpvZEVycm9yXCI7XG4gICAgICAgIHRoaXMuaXNzdWVzID0gaXNzdWVzO1xuICAgIH1cbiAgICBmb3JtYXQoX21hcHBlcikge1xuICAgICAgICBjb25zdCBtYXBwZXIgPSBfbWFwcGVyIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoaXNzdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNzdWUubWVzc2FnZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0geyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICBjb25zdCBwcm9jZXNzRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF91bmlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlLnVuaW9uRXJyb3JzLm1hcChwcm9jZXNzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfcmV0dXJuX3R5cGVcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUucmV0dXJuVHlwZUVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2FyZ3VtZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5hcmd1bWVudHNFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyID0gZmllbGRFcnJvcnM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBpc3N1ZS5wYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBpc3N1ZS5wYXRoW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1pbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIGlmICh0eXBlb2YgZWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnN0IGVycm9yQXJyYXk6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZXJyb3JBcnJheS5fZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IGVycm9yQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0uX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnJbZWxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwcm9jZXNzRXJyb3IodGhpcyk7XG4gICAgICAgIHJldHVybiBmaWVsZEVycm9ycztcbiAgICB9XG4gICAgc3RhdGljIGFzc2VydCh2YWx1ZSkge1xuICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIFpvZEVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSBab2RFcnJvcjogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlzc3VlcywgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIsIDIpO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgZmxhdHRlbihtYXBwZXIgPSAoaXNzdWUpID0+IGlzc3VlLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7fTtcbiAgICAgICAgY29uc3QgZm9ybUVycm9ycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiB0aGlzLmlzc3Vlcykge1xuICAgICAgICAgICAgaWYgKHN1Yi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gPSBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUVycm9ycy5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmb3JtRXJyb3JzLCBmaWVsZEVycm9ycyB9O1xuICAgIH1cbiAgICBnZXQgZm9ybUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdHRlbigpO1xuICAgIH1cbn1cblpvZEVycm9yLmNyZWF0ZSA9IChpc3N1ZXMpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihpc3N1ZXMpO1xuICAgIHJldHVybiBlcnJvcjtcbn07XG4iLCJpbXBvcnQgeyBab2RJc3N1ZUNvZGUgfSBmcm9tIFwiLi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUgfSBmcm9tIFwiLi4vaGVscGVycy91dGlsLmpzXCI7XG5jb25zdCBlcnJvck1hcCA9IChpc3N1ZSwgX2N0eCkgPT4ge1xuICAgIGxldCBtZXNzYWdlO1xuICAgIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGU6XG4gICAgICAgICAgICBpZiAoaXNzdWUucmVjZWl2ZWQgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWw6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgbGl0ZXJhbCB2YWx1ZSwgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5leHBlY3RlZCwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYFVucmVjb2duaXplZCBrZXkocykgaW4gb2JqZWN0OiAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5rZXlzLCBcIiwgXCIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGVudW0gdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfSwgcmVjZWl2ZWQgJyR7aXNzdWUucmVjZWl2ZWR9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIHJldHVybiB0eXBlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGF0ZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbmNsdWRlc1wiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24ucG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBhdCBvbmUgb3IgbW9yZSBwb3NpdGlvbnMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7aXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IHN0YXJ0IHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uc3RhcnRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwiZW5kc1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlLnZhbGlkYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnZhbGlkYXRpb24gIT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCAke2lzc3VlLnZhbGlkYXRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fc21hbGw6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgbW9yZSB0aGFuYH0gJHtpc3N1ZS5taW5pbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1pbmltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fYmlnOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYHVuZGVyYH0gJHtpc3N1ZS5tYXhpbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0b2AgOiBgc21hbGxlciB0aGFuYH0gJHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWF4aW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmN1c3RvbTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlLm11bHRpcGxlT2Z9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfZmluaXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiTnVtYmVyIG11c3QgYmUgZmluaXRlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZXJyb3JNYXA7XG4iLCJpbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuL2xvY2FsZXMvZW4uanNcIjtcbmxldCBvdmVycmlkZUVycm9yTWFwID0gZGVmYXVsdEVycm9yTWFwO1xuZXhwb3J0IHsgZGVmYXVsdEVycm9yTWFwIH07XG5leHBvcnQgZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwKSB7XG4gICAgb3ZlcnJpZGVFcnJvck1hcCA9IG1hcDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1hcCgpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVFcnJvck1hcDtcbn1cbiIsImltcG9ydCB7IGdldEVycm9yTWFwIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi4vbG9jYWxlcy9lbi5qc1wiO1xuZXhwb3J0IGNvbnN0IG1ha2VJc3N1ZSA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZnVsbFBhdGggPSBbLi4ucGF0aCwgLi4uKGlzc3VlRGF0YS5wYXRoIHx8IFtdKV07XG4gICAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgIH07XG4gICAgaWYgKGlzc3VlRGF0YS5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgbWVzc2FnZTogaXNzdWVEYXRhLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIGNvbnN0IG1hcHMgPSBlcnJvck1hcHNcbiAgICAgICAgLmZpbHRlcigobSkgPT4gISFtKVxuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAucmV2ZXJzZSgpO1xuICAgIGZvciAoY29uc3QgbWFwIG9mIG1hcHMpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gbWFwKGZ1bGxJc3N1ZSwgeyBkYXRhLCBkZWZhdWx0RXJyb3I6IGVycm9yTWVzc2FnZSB9KS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVNYXAgPSBnZXRFcnJvck1hcCgpO1xuICAgIGNvbnN0IGlzc3VlID0gbWFrZUlzc3VlKHtcbiAgICAgICAgaXNzdWVEYXRhOiBpc3N1ZURhdGEsXG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgLy8gY29udGV4dHVhbCBlcnJvciBtYXAgaXMgZmlyc3QgcHJpb3JpdHlcbiAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCwgLy8gdGhlbiBzY2hlbWEtYm91bmQgbWFwIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAsIC8vIHRoZW4gZ2xvYmFsIG92ZXJyaWRlIG1hcFxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAgPT09IGRlZmF1bHRFcnJvck1hcCA/IHVuZGVmaW5lZCA6IGRlZmF1bHRFcnJvck1hcCwgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgfSk7XG4gICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG5leHBvcnQgY2xhc3MgUGFyc2VTdGF0dXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICAgIH1cbiAgICBkaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IFwidmFsaWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImRpcnR5XCI7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJhYm9ydGVkXCI7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cykge1xuICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBhcnJheVZhbHVlLnB1c2gocy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBhcnJheVZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBtZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiYgKHR5cGVvZiB2YWx1ZS52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiB8fCBwYWlyLmFsd2F5c1NldCkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbE9iamVjdFtrZXkudmFsdWVdID0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE9iamVjdCB9O1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJTlZBTElEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuZXhwb3J0IGNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgT0sgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBpc0Fib3J0ZWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmV4cG9ydCBjb25zdCBpc1ZhbGlkID0gKHgpID0+IHguc3RhdHVzID09PSBcInZhbGlkXCI7XG5leHBvcnQgY29uc3QgaXNBc3luYyA9ICh4KSA9PiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJpbXBvcnQgeyB0b29sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IE1DUFNlcnZlclN0ZGlvIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgYXMgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBsb2dnZXIgYXMgZ2xvYmFsTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUgPSAnb3BlbmFpLWFnZW50czpzdGRpby1tY3AtY2xpZW50JztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NUUkVBTUFCTEVfSFRUUF9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RyZWFtYWJsZS1odHRwLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIHRvb2xGaWx0ZXI7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSk7XG4gICAgICAgIHRoaXMuY2FjaGVUb29sc0xpc3QgPSBvcHRpb25zLmNhY2hlVG9vbHNMaXN0ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLnRvb2xGaWx0ZXIgPSBvcHRpb25zLnRvb2xGaWx0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZ3MgYSBkZWJ1ZyBtZXNzYWdlIHdoZW4gZGVidWcgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSBidWlsZE1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqL1xuICAgIGRlYnVnTG9nKGJ1aWxkTWVzc2FnZSkge1xuICAgICAgICBpZiAoZGVidWcuZW5hYmxlZCh0aGlzLmxvZ2dlci5uYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHdoZW4gdGhpcyBpcyB0cnVlLCB0aGUgZnVuY3Rpb24gdG8gYnVpbGQgdGhlIHN0cmluZyBpcyBjYWxsZWRcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGJ1aWxkTWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/XG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1pbmltdW0gTUNQIHRvb2wgZGF0YSBkZWZpbml0aW9uLlxuICogVGhpcyB0eXBlIGRlZmluaXRpb24gZG9lcyBub3QgaW50ZW5kIHRvIGNvdmVyIGFsbCBwb3NzaWJsZSBwcm9wZXJ0aWVzLlxuICogSXQgc3VwcG9ydHMgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgdXNlZCBpbiB0aGlzIFNESy5cbiAqL1xuZXhwb3J0IGNvbnN0IE1DUFRvb2wgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0U2NoZW1hOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb2JqZWN0JyksXG4gICAgICAgIHByb3BlcnRpZXM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICByZXF1aXJlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHouYm9vbGVhbigpLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIFB1YmxpYyBpbnRlcmZhY2Ugb2YgYW4gTUNQIHNlcnZlciB0aGF0IHByb3ZpZGVzIHRvb2xzLlxuICogWW91IGNhbiB1c2UgdGhpcyBjbGFzcyB0byBwYXNzIE1DUCBzZXJ2ZXIgc2V0dGluZ3MgdG8geW91ciBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0ZGlvIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0ZGlvIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RkaW8ob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBGZXRjaGVzIGFuZCBmbGF0dGVucyBhbGwgdG9vbHMgZnJvbSBtdWx0aXBsZSBNQ1Agc2VydmVycy5cbiAqIExvZ3MgYW5kIHNraXBzIGFueSBzZXJ2ZXJzIHRoYXQgZmFpbCB0byByZXNwb25kLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwRnVuY3Rpb25Ub29scyhtY3BTZXJ2ZXJzLCBydW5Db250ZXh0LCBhZ2VudCwgY29udmVydFNjaGVtYXNUb1N0cmljdCA9IGZhbHNlKSB7XG4gICAgY29uc3QgYWxsVG9vbHMgPSBbXTtcbiAgICBjb25zdCB0b29sTmFtZXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBzZXJ2ZXIgb2YgbWNwU2VydmVycykge1xuICAgICAgICBjb25zdCBzZXJ2ZXJUb29scyA9IGF3YWl0IGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHNlcnZlciwgcnVuQ29udGV4dCwgYWdlbnQsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJUb29sTmFtZXMgPSBuZXcgU2V0KHNlcnZlclRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSk7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IFsuLi5zZXJ2ZXJUb29sTmFtZXNdLmZpbHRlcigobikgPT4gdG9vbE5hbWVzLmhhcyhuKSk7XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgRHVwbGljYXRlIHRvb2wgbmFtZXMgZm91bmQgYWNyb3NzIE1DUCBzZXJ2ZXJzOiAke2ludGVyc2VjdGlvbi5qb2luKCcsICcpfWApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBzZXJ2ZXJUb29scykge1xuICAgICAgICAgICAgdG9vbE5hbWVzLmFkZCh0Lm5hbWUpO1xuICAgICAgICAgICAgYWxsVG9vbHMucHVzaCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWxsVG9vbHM7XG59XG5jb25zdCBfY2FjaGVkVG9vbHMgPSB7fTtcbi8qKlxuICogUmVtb3ZlIGNhY2hlZCB0b29scyBmb3IgdGhlIGdpdmVuIHNlcnZlciBzbyB0aGUgbmV4dCBsb29rdXAgZmV0Y2hlcyBmcmVzaCBkYXRhLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJOYW1lIC0gTmFtZSBvZiB0aGUgTUNQIHNlcnZlciB3aG9zZSBjYWNoZSBzaG91bGQgYmUgY2xlYXJlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlKHNlcnZlck5hbWUpIHtcbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xufVxuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHNlcnZlciwgcnVuQ29udGV4dCwgYWdlbnQsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpIHtcbiAgICBpZiAoc2VydmVyLmNhY2hlVG9vbHNMaXN0ICYmIF9jYWNoZWRUb29sc1tzZXJ2ZXIubmFtZV0pIHtcbiAgICAgICAgcmV0dXJuIF9jYWNoZWRUb29sc1tzZXJ2ZXIubmFtZV0ubWFwKCh0KSA9PiBtY3BUb0Z1bmN0aW9uVG9vbCh0LCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhNQ1BMaXN0VG9vbHNTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoZWRNY3BUb29scyA9IGF3YWl0IHNlcnZlci5saXN0VG9vbHMoKTtcbiAgICAgICAgY29uc3QgbWNwVG9vbHMgPSBbXTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIHNlcnZlck5hbWU6IHNlcnZlci5uYW1lLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IHRvb2wgb2YgZmV0Y2hlZE1jcFRvb2xzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBzZXJ2ZXIudG9vbEZpbHRlcjtcbiAgICAgICAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyICYmIHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBhd2FpdCBmaWx0ZXIoY29udGV4dCwgdG9vbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgY2FsbGFibGUgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyB0b29sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbG93ZWRUb29sTmFtZXMgPSBmaWx0ZXIuYWxsb3dlZFRvb2xOYW1lcyA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZFRvb2xOYW1lcyA9IGZpbHRlci5ibG9ja2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsb3dlZFRvb2xOYW1lcy5sZW5ndGggPiAwIHx8IGJsb2NrZWRUb29sTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGFsbG93ZWRUb29sTmFtZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWxsb3dlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZCA9IGJsb2NrZWRUb29sTmFtZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxvY2tlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxsb3dlZCB8fCBibG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBibG9ja2VkIGJ5IHRoZSBzdGF0aWMgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYWxsb3dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxMb2dnZXIuZGVidWcoYE1DUCBUb29sIChzZXJ2ZXI6ICR7c2VydmVyLm5hbWV9LCB0b29sOiAke3Rvb2wubmFtZX0pIGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSBzdGF0aWMgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIHRvb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1jcFRvb2xzLnB1c2godG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgc3Bhbi5zcGFuRGF0YS5yZXN1bHQgPSBtY3BUb29scy5tYXAoKHQpID0+IHQubmFtZSk7XG4gICAgICAgIGNvbnN0IHRvb2xzID0gbWNwVG9vbHMubWFwKCh0KSA9PiBtY3BUb0Z1bmN0aW9uVG9vbCh0LCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpKTtcbiAgICAgICAgaWYgKHNlcnZlci5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXSA9IG1jcFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9LCB7IGRhdGE6IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9IH0pO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFsbCBNQ1AgdG9vbHMgZnJvbSB0aGUgcHJvdmlkZWQgc2VydmVycywgdXNpbmcgdGhlIGZ1bmN0aW9uIHRvb2wgY29udmVyc2lvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbE1jcFRvb2xzKG1jcFNlcnZlcnMsIHJ1bkNvbnRleHQsIGFnZW50LCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gZ2V0QWxsTWNwRnVuY3Rpb25Ub29scyhtY3BTZXJ2ZXJzLCBydW5Db250ZXh0LCBhZ2VudCwgY29udmVydFNjaGVtYXNUb1N0cmljdCk7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIE1DUCB0b29sIGRlZmluaXRpb24gdG8gYSBmdW5jdGlvbiB0b29sIGZvciB0aGUgQWdlbnRzIFNESy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1jcFRvRnVuY3Rpb25Ub29sKG1jcFRvb2wsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkge1xuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShpbnB1dCwgX2NvbnRleHQpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgJiYgaW5wdXQpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBKU09OLnBhcnNlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmIGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGFyZ3MgPSBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgY3VycmVudFNwYW4uc3BhbkRhdGFbJ21jcF9kYXRhJ10gPSB7IHNlcnZlcjogc2VydmVyLm5hbWUgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgc2VydmVyLmNhbGxUb29sKG1jcFRvb2wubmFtZSwgYXJncyk7XG4gICAgICAgIHJldHVybiBjb250ZW50Lmxlbmd0aCA9PT0gMSA/IGNvbnRlbnRbMF0gOiBjb250ZW50O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIC4uLm1jcFRvb2wuaW5wdXRTY2hlbWEsXG4gICAgICAgIHR5cGU6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnR5cGUgPz8gJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnByb3BlcnRpZXMgPz8ge30sXG4gICAgICAgIHJlcXVpcmVkOiBtY3BUb29sLmlucHV0U2NoZW1hPy5yZXF1aXJlZCA/PyBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LmFkZGl0aW9uYWxQcm9wZXJ0aWVzID8/IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgfHwgc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSB0cnVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpY3RTY2hlbWEgPSBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYSk7XG4gICAgICAgICAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtY3BUb29sLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHN0cmljdFNjaGVtYSxcbiAgICAgICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0ZTogaW52b2tlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdsb2JhbExvZ2dlci53YXJuKGBFcnJvciBjb252ZXJ0aW5nIE1DUCBzY2hlbWEgdG8gc3RyaWN0IG1vZGU6ICR7ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBub25TdHJpY3RTY2hlbWEgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG4gICAgfTtcbiAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgIG5hbWU6IG1jcFRvb2wubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIHBhcmFtZXRlcnM6IG5vblN0cmljdFNjaGVtYSxcbiAgICAgICAgc3RyaWN0OiBmYWxzZSxcbiAgICAgICAgZXhlY3V0ZTogaW52b2tlLFxuICAgIH0pO1xufVxuLyoqXG4gKiBFbnN1cmVzIHRoZSBnaXZlbiBKU09OIHNjaGVtYSBpcyBzdHJpY3QgKG5vIGFkZGl0aW9uYWwgcHJvcGVydGllcywgcmVxdWlyZWQgZmllbGRzIHNldCkuXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgY29uc3Qgb3V0ID0ge1xuICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICB9O1xuICAgIGlmICghb3V0LnJlcXVpcmVkKVxuICAgICAgICBvdXQucmVxdWlyZWQgPSBbXTtcbiAgICByZXR1cm4gb3V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWNwLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuLy8gVXNlIGZ1bmN0aW9uIGluc3RlYWQgb2YgZXhwb3J0aW5nIHRoZSB2YWx1ZSB0byBwcmV2ZW50XG4vLyBjaXJjdWxhciBkZXBlbmRlbmN5IHJlc29sdXRpb24gaXNzdWVzIGNhdXNlZCBieSBvdGhlciBleHBvcnRzIGluICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcydcbmV4cG9ydCBmdW5jdGlvbiBsb2FkRW52KCkge1xuICAgIHJldHVybiB7fTtcbn1cbmV4cG9ydCBjbGFzcyBCcm93c2VyRXZlbnRFbWl0dGVyIHtcbiAgICAjdGFyZ2V0ID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvZmYodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlID0gY2xhc3MgUmVhZGFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgcGlwZVRvKF9kZXN0aW5hdGlvbiwgX29wdGlvbnMpIHsgfVxuICAgIHBpcGVUaHJvdWdoKF90cmFuc2Zvcm0sIF9vcHRpb25zKSB7IH1cbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW0gPSBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtO1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlU3RyZWFtQ29udHJvbGxlciA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW1EZWZhdWx0Q29udHJvbGxlcjtcbmV4cG9ydCBjb25zdCBUcmFuc2Zvcm1TdHJlYW0gPSBnbG9iYWxUaGlzLlRyYW5zZm9ybVN0cmVhbTtcbmV4cG9ydCBjbGFzcyBBc3luY0xvY2FsU3RvcmFnZSB7XG4gICAgY29udGV4dCA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBydW4oY29udGV4dCwgZm4pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGdldFN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0O1xuICAgIH1cbiAgICBlbnRlcldpdGgoY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1RyYWNpbmdMb29wUnVubmluZ0J5RGVmYXVsdCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgeyBNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgfSBmcm9tIFwiLi9tY3Atc2VydmVyL2Jyb3dzZXIubWpzXCI7XG5jbGFzcyBCcm93c2VyVGltZXIge1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgc2V0VGltZW91dChjYWxsYmFjaywgbXMpIHtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcbiAgICAgICAgdGltZW91dC5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5yZWYgOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0LnVucmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnVucmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC51bnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQuaGFzUmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0Lmhhc1JlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQuaGFzUmVmIDogKCkgPT4gdHJ1ZTtcbiAgICAgICAgdGltZW91dC5yZWZyZXNoID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnJlZnJlc2ggPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZnJlc2ggOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICByZXR1cm4gdGltZW91dDtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxufVxuY29uc3QgdGltZXIgPSBuZXcgQnJvd3NlclRpbWVyKCk7XG5leHBvcnQgeyB0aW1lciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hpbXMtYnJvd3Nlci5tanMubWFwIiwiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5sZXQgX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZTtcbmZ1bmN0aW9uIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpIHtcbiAgICBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlID8/PSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2UoKTtcbiAgICByZXR1cm4gX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCB0cmFjZSBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZSBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHRyYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFRyYWNlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGN1cnJlbnRUcmFjZT8udHJhY2UpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRUcmFjZS50cmFjZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGN1cnJlbnQgc3BhbiBmcm9tIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCBzcGFuIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRTcGFuKCkge1xuICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFNwYW4/LnNwYW4pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRTcGFuLnNwYW47XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUaGlzIGlzIGFuIEFzeW5jTG9jYWxTdG9yYWdlIGluc3RhbmNlIHRoYXQgc3RvcmVzIHRoZSBjdXJyZW50IHRyYWNlLlxuICogSXQgd2lsbCBhdXRvbWF0aWNhbGx5IGhhbmRsZSB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgZGlmZmVyZW50IGV2ZW50IGxvb3AgZXhlY3V0aW9ucy5cbiAqXG4gKiBUaGUgZnVuY3Rpb25zIGJlbG93IHNob3VsZCBiZSB0aGUgb25seSB3YXkgdGhhdCB0aGlzIGNvbnRleHQgZ2V0cyBpbnRlcmZhY2VkIHdpdGguXG4gKi9cbmZ1bmN0aW9uIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pIHtcbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICBpZiAoIXRyYWNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHRyYWNlIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdHJhY2Uuc3RhcnQoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4odHJhY2UpO1xuICAgICAgICBhd2FpdCB0cmFjZS5lbmQoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHRyYWNlIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvblxuICogcGFzc2VkIHRvIGl0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBydW4gYW5kIGFzc2lnbiB0aGUgdHJhY2UgY29udGV4dCB0by5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNyZWF0aW9uIG9mIHRoZSB0cmFjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2l0aFRyYWNlKHRyYWNlLCBmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbmV3VHJhY2UgPSB0eXBlb2YgdHJhY2UgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBuYW1lOiB0cmFjZSxcbiAgICAgICAgfSlcbiAgICAgICAgOiB0cmFjZTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIGFjdGl2ZSB0cmFjZSBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHQuIElmIHRoZXJlXG4gKiBpcywgaXQgd2lsbCBydW4gdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggdGhlIGV4aXN0aW5nIHRyYWNlLiBJZiB0aGVyZSBpcyBubyB0cmFjZSwgaXQgd2lsbCBjcmVhdGVcbiAqIGEgbmV3IG9uZSBhbmQgYXNzaWduIGl0IHRvIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ6dW5jdGlvbiB0byBydW4gYW5kIGFzc2lnbiB0aGUgdHJhY2UgY29udGV4dCB0by5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNyZWF0aW9uIG9mIHRoZSB0cmFjZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVUcmFjZShmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgaWYgKGN1cnJlbnRUcmFjZSkge1xuICAgICAgICAvLyBpZiB0aGlzIGV4ZWN1dGlvbiBjb250ZXh0IGFscmVhZHkgaGFzIGEgdHJhY2UgaW5zdGFuY2UgaW4gaXQgd2UganVzdCBjb250aW51ZVxuICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9XG4gICAgY29uc3QgbmV3VHJhY2UgPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uob3B0aW9ucyk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bih7IHRyYWNlOiBuZXdUcmFjZSB9LCBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuKSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBzZXQgdGhlIGN1cnJlbnQgc3BhbiBpbiB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHNwYW4gLSBUaGUgc3BhbiB0byBzZXQgYXMgdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEN1cnJlbnRTcGFuKHNwYW4pIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGluZyB0cmFjZSBmb3VuZCcpO1xuICAgIH1cbiAgICBpZiAoY29udGV4dC5zcGFuKSB7XG4gICAgICAgIGNvbnRleHQuc3Bhbi5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnNwYW47XG4gICAgfVxuICAgIGNvbnRleHQuc3BhbiA9IHNwYW47XG4gICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKGNvbnRleHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5zcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgICAgIGNvbnRleHQucHJldmlvdXNTcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW4/LnByZXZpb3VzU3BhbjtcbiAgICAgICAgZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZW50ZXJXaXRoKGNvbnRleHQpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGFkZCBhbiBlcnJvciB0byB0aGUgY3VycmVudCBzcGFuLlxuICpcbiAqIEBwYXJhbSBzcGFuRXJyb3IgLSBUaGUgZXJyb3IgdG8gYWRkIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvclRvQ3VycmVudFNwYW4oc3BhbkVycm9yKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICBjdXJyZW50U3Bhbi5zZXRFcnJvcihzcGFuRXJyb3IpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNsb25lIHRoZSBjdXJyZW50IGNvbnRleHQgYnkgY3JlYXRpbmcgbmV3IGluc3RhbmNlcyBvZiB0aGUgdHJhY2UsIHNwYW4sIGFuZFxuICogcHJldmlvdXMgc3Bhbi5cbiAqXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBjb250ZXh0IHRvIGNsb25lLlxuICogQHJldHVybnMgQSBjbG9uZSBvZiB0aGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lQ3VycmVudENvbnRleHQoY29udGV4dCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyYWNlOiBjb250ZXh0LnRyYWNlPy5jbG9uZSgpLFxuICAgICAgICBzcGFuOiBjb250ZXh0LnNwYW4/LmNsb25lKCksXG4gICAgICAgIHByZXZpb3VzU3BhbjogY29udGV4dC5wcmV2aW91c1NwYW4/LmNsb25lKCksXG4gICAgfTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCBhIG5ldyBzcGFuIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biB3aXRoIHRoZSBuZXcgc3BhbiBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aE5ld1NwYW5Db250ZXh0KGZuKSB7XG4gICAgY29uc3QgY3VycmVudENvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleGlzdGluZyB0cmFjZSBmb3VuZCcpO1xuICAgIH1cbiAgICBjb25zdCBjb3B5T2ZDb250ZXh0ID0gY2xvbmVDdXJyZW50Q29udGV4dChjdXJyZW50Q29udGV4dCk7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bihjb3B5T2ZDb250ZXh0LCBmbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyB0aW1lciBhcyBfdGltZXIsIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IHRyYWNpbmcgfSBmcm9tIFwiLi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBQcmludHMgdGhlIHRyYWNlcyBhbmQgc3BhbnMgdG8gdGhlIGNvbnNvbGVcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVTcGFuRXhwb3J0ZXIge1xuICAgIGFzeW5jIGV4cG9ydChpdGVtcykge1xuICAgICAgICBpZiAodHJhY2luZy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdUcmFjaW5nIGlzIGRpc2FibGVkLiBTa2lwcGluZyBleHBvcnQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0cmFjZScpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydGVyXSBFeHBvcnQgdHJhY2UgdHJhY2VJZD0ke2l0ZW0udHJhY2VJZH0gbmFtZT0ke2l0ZW0ubmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvciA/PyBkZWZhdWx0UHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBvcHRpb25zLnN0YXJ0ZWQgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VFbmQodGhpcyk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHRoaXMuI3N0YXJ0ZWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gYWN0aXZlIHRyYWNlLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50U3BhbiBpbnN0YW5jZW9mIE5vb3BTcGFuIHx8XG4gICAgICAgICAgICAgICAgY3VycmVudFRyYWNlIGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBQYXJlbnQgJHtjdXJyZW50U3Bhbn0gb3IgJHtjdXJyZW50VHJhY2V9IGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBjdXJyZW50VHJhY2UudHJhY2VJZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgcGFyZW50IHNwYW4gJXMnLCBjdXJyZW50U3Bhbi5zcGFuSWQpO1xuICAgICAgICAgICAgICAgIHBhcmVudElkID0gY3VycmVudFNwYW4uc3BhbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBwYXJlbnQgc3BhbiwgdXNpbmcgY3VycmVudCB0cmFjZSAlcycsIGN1cnJlbnRUcmFjZS50cmFjZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBUcmFjZSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHRyYWNlIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBTcGFuKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCBzcGFuIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LnNwYW5JZDtcbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gdHJhY2VJZCBmb3VuZC4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nIHNwYW4gJHtKU09OLnN0cmluZ2lmeShzcGFuT3B0aW9ucy5kYXRhKX0gd2l0aCBpZCAke3NwYW5PcHRpb25zLnNwYW5JZCA/PyB0cmFjZUlkfWApO1xuICAgICAgICByZXR1cm4gbmV3IFNwYW4oe1xuICAgICAgICAgICAgLi4uc3Bhbk9wdGlvbnMsXG4gICAgICAgICAgICB0cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgIH0sIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXInKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXIgJW8nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFkZHMgbGlzdGVuZXJzIHRvIGBwcm9jZXNzYCB0byBlbnN1cmUgYHNodXRkb3duYCBvY2N1cnMgYmVmb3JlIGV4aXQuICovXG4gICAgI2FkZENsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIE5vZGUuanMgcHJvY2VzcyB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB0aW1lb3V0LCBmb3JjaW5nIGV4aXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSGFuZGxlIG5vcm1hbCB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgcHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGNsZWFudXApO1xuICAgICAgICAgICAgLy8gSGFuZGxlIENUUkwrQyAoU0lHSU5UKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHSU5UJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMTMwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzKCdTSUdURVJNJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBhc3luYyAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcmVqZWN0aW9uJywgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cygndW5oYW5kbGVkUmVqZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKGV2ZW50KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGggPiAxO1xufVxubGV0IEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghR0xPQkFMX1RSQUNFX1BST1ZJREVSKSB7XG4gICAgICAgIEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBHTE9CQUxfVFJBQ0VfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhOZXdTcGFuQ29udGV4dCwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZnVuY3Rpb24gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGFuKSB7XG4gICAgcmV0dXJuIGFzeW5jIChmbiwgLi4uYXJncykgPT4ge1xuICAgICAgICAvLyBDcmVhdGluZyBhIG5ldyBzcGFuIGNvbnRleHQgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHByZXZpb3VzIHNwYW4gaXMgY29ycmVjdGx5IHJlc2V0XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGNyZWF0ZVNwYW4oLi4uYXJncyk7XG4gICAgICAgICAgICBzZXRDdXJyZW50U3BhbihzcGFuKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbihzcGFuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBlcnJvci5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyByZXNwb25zZSBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhSZXNwb25zZVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGNyZWF0ZUdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCByZXNwb25zZSBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzcG9uc2VTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyByZXNwb25zZSBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgcmVzcG9uc2UsIHByaW1hcmlseSB0aGUgcmVzcG9uc2UgaWRlbnRpZmllci5cbiAqIElmIHlvdSBuZWVkIHRvIGNhcHR1cmUgZGV0YWlsZWQgZ2VuZXJhdGlvbiBpbmZvcm1hdGlvbiBzdWNoIGFzIGlucHV0L291dHB1dCBtZXNzYWdlcyxcbiAqIG1vZGVsIGNvbmZpZ3VyYXRpb24sIG9yIHVzYWdlIGRhdGEsIHVzZSBgZ2VuZXJhdGlvblNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhSZXNwb25zZVNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVJlc3BvbnNlU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBhZ2VudCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhBZ2VudFNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgYWdlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFnZW50U3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnYWdlbnQnLFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucz8uZGF0YT8ubmFtZSA/PyAnQWdlbnQnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEFnZW50U3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlQWdlbnRTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGZ1bmN0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEZ1bmN0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBmdW5jdGlvbiBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBpbnB1dDogb3B0aW9ucz8uZGF0YT8uaW5wdXQgPz8gJycsXG4gICAgICAgICAgICBvdXRwdXQ6IG9wdGlvbnM/LmRhdGE/Lm91dHB1dCA/PyAnJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGZ1bmN0aW9uIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhGdW5jdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUZ1bmN0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEhhbmRvZmZTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGhhbmRvZmYgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhhbmRvZmZTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHsgdHlwZTogJ2hhbmRvZmYnLCAuLi5vcHRpb25zPy5kYXRhIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGhhbmRvZmYgc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEhhbmRvZmZTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVIYW5kb2ZmU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBnZW5lcmF0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEdlbmVyYXRpb25TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCBnZW5lcmF0aW9uLCBpbmNsdWRpbmcgaW5wdXQvb3V0cHV0IG1lc3NhZ2VcbiAqIHNlcXVlbmNlcywgbW9kZWwgaW5mb3JtYXRpb24sIGFuZCB1c2FnZSBkYXRhLiBJZiB5b3Ugb25seSBuZWVkIHRvIGNhcHR1cmUgYSBtb2RlbCByZXNwb25zZVxuICogaWRlbnRpZmllciwgY29uc2lkZXIgdXNpbmcgYGNyZWF0ZVJlc3BvbnNlU3BhbigpYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR2VuZXJhdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2dlbmVyYXRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqIEF1dG9tYXRpY2FsbHkgY3JlYXRlIGEgZ2VuZXJhdGlvbiBzcGFuLCBydW4gZm4gYW5kIGNsb3NlIHRoZSBzcGFuICovXG5leHBvcnQgY29uc3Qgd2l0aEdlbmVyYXRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHZW5lcmF0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBjdXN0b20gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlciB1c2VcbiAqIGB3aXRoQ3VzdG9tU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDdXN0b21TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdjdXN0b20nLFxuICAgICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aEN1c3RvbVNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUN1c3RvbVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ3VhcmRyYWlsIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEd1YXJkcmFpbFNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3VhcmRyYWlsU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZ3VhcmRyYWlsJyxcbiAgICAgICAgICAgIHRyaWdnZXJlZDogZmFsc2UsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aEd1YXJkcmFpbFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUd1YXJkcmFpbFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgdHJhbnNjcmlwdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2NyaXB0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdGlvbicsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoVHJhbnNjcmlwdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVRyYW5zY3JpcHRpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGVlY2gnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwZWVjaFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc3BlZWNoIGdyb3VwIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwZWVjaEdyb3VwU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoX2dyb3VwJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoU3BlZWNoR3JvdXBTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hHcm91cFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgTUNQIGxpc3QgdG9vbHMgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTUNQTGlzdFRvb2xzU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnbWNwX3Rvb2xzJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoTUNQTGlzdFRvb2xzU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlTUNQTGlzdFRvb2xzU3Bhbik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVTcGFucy5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8qKlxuICogU3RhcnQgdGhlIHRyYWNlIGV4cG9ydCBsb29wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRUcmFjZUV4cG9ydExvb3AoKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnN0YXJ0RXhwb3J0TG9vcCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgZW1pdCh0eXBlLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KHR5cGUsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9uY2UodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxufVxuLyoqXG4gKiBFdmVudCBlbWl0dGVyIHRoYXQgZXZlcnkgQWdlbnQgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50SG9va3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IFJ1bm5lciBpbnN0YW5jZSBpbmhlcml0cyBmcm9tIGFuZCB0aGF0IGVtaXRzIGV2ZW50cyBmb3IgdGhlIGxpZmVjeWNsZVxuICogb2YgdGhlIG92ZXJhbGwgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSG9va3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpZmVjeWNsZS5tanMubWFwIiwiLyoqXG4gKiBEZWZpbmVzIGFuIGlucHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lSW5wdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZ3VhcmRyYWlsRnVuY3Rpb246IGV4ZWN1dGUsXG4gICAgICAgIGFzeW5jIHJ1bihhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyB0eXBlOiAnaW5wdXQnLCBuYW1lIH0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBhd2FpdCBleGVjdXRlKGFyZ3MpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIG91dHB1dCBndWFyZHJhaWwgZGVmaW5pdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZU91dHB1dEd1YXJkcmFpbCh7IG5hbWUsIGV4ZWN1dGUsIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnb3V0cHV0JyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZ3VhcmRyYWlsRnVuY3Rpb246IGV4ZWN1dGUsXG4gICAgICAgIGFzeW5jIHJ1bihhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyB0eXBlOiAnb3V0cHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIGFnZW50OiBhcmdzLmFnZW50LFxuICAgICAgICAgICAgICAgIGFnZW50T3V0cHV0OiBhcmdzLmFnZW50T3V0cHV0LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWd1YXJkcmFpbC5tanMubWFwIiwiaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbWVzc2FnZSB0aGF0IHdpbGwgYmUgZ2l2ZW4gYXMgdG9vbCBvdXRwdXQgdG8gdGhlIG1vZGVsIHRoYXQgcmVxdWVzdGVkIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zlck1lc3NhZ2UoYWdlbnQpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoeyBhc3Npc3RhbnQ6IGFnZW50Lm5hbWUgfSk7XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICpcbiAqIEBwYXJhbSBhZ2VudCBUaGUgYWdlbnQgdG8gdHJhbnNmZXIgdG9cbiAqIEByZXR1cm5zIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KSB7XG4gICAgcmV0dXJuIGB0cmFuc2Zlcl90b18ke3RvRnVuY3Rpb25Ub29sTmFtZShhZ2VudC5uYW1lKX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KSB7XG4gICAgcmV0dXJuIGBIYW5kb2ZmIHRvIHRoZSAke2FnZW50Lm5hbWV9IGFnZW50IHRvIGhhbmRsZSB0aGUgcmVxdWVzdC4gJHthZ2VudC5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyd9YDtcbn1cbi8qKlxuICogQSBoYW5kb2ZmIGlzIHdoZW4gYW4gYWdlbnQgZGVsZWdhdGVzIGEgdGFzayB0byBhbm90aGVyIGFnZW50LlxuICogRm9yIGV4YW1wbGUsIGluIGEgY3VzdG9tZXIgc3VwcG9ydCBzY2VuYXJpbyB5b3UgbWlnaHQgaGF2ZSBhIFwidHJpYWdlIGFnZW50XCIgdGhhdCBkZXRlcm1pbmVzIHdoaWNoXG4gKiBhZ2VudCBzaG91bGQgaGFuZGxlIHRoZSB1c2VyJ3MgcmVxdWVzdCwgYW5kIHN1Yi1hZ2VudHMgdGhhdCBzcGVjaWFsaXplIGluIGRpZmZlcmVudCBhcmVhcyBsaWtlXG4gKiBiaWxsaW5nLCBhY2NvdW50IG1hbmFnZW1lbnQsIGV0Yy5cbiAqXG4gKiBAdGVtcGxhdGUgVENvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgY2xhc3MgSGFuZG9mZiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xOYW1lO1xuICAgIC8qKlxuICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbERlc2NyaXB0aW9uO1xuICAgIC8qKlxuICAgICAqIFRoZSBKU09OIHNjaGVtYSBmb3IgdGhlIGhhbmRvZmYgaW5wdXQuIENhbiBiZSBlbXB0eSBpZiB0aGUgaGFuZG9mZiBkb2VzIG5vdCB0YWtlIGFuIGlucHV0XG4gICAgICovXG4gICAgaW5wdXRKc29uU2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgIHJlcXVpcmVkOiBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgaW5wdXQgSlNPTiBzY2hlbWEgaXMgaW4gc3RyaWN0IG1vZGUuIFdlICoqc3Ryb25nbHkqKiByZWNvbW1lbmQgc2V0dGluZyB0aGlzIHRvXG4gICAgICogdHJ1ZSwgYXMgaXQgaW5jcmVhc2VzIHRoZSBsaWtlbGlob29kIG9mIGNvcnJlY3QgSlNPTiBpbnB1dC5cbiAgICAgKi9cbiAgICBzdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBoYW5kb2ZmLiBUaGUgcGFyYW1ldGVycyBwYXNzZWQgYXJlOlxuICAgICAqIDEuIFRoZSBoYW5kb2ZmIHJ1biBjb250ZXh0XG4gICAgICogMi4gVGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBMTE0sIGFzIGEgSlNPTiBzdHJpbmcuIEVtcHR5IHN0cmluZyBpZiBpbnB1dEpzb25TY2hlbWEgaXMgZW1wdHkuXG4gICAgICpcbiAgICAgKiBNdXN0IHJldHVybiBhbiBhZ2VudFxuICAgICAqL1xuICAgIG9uSW52b2tlSGFuZG9mZjtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50TmFtZTtcbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyB0aGUgaW5wdXRzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgbmV4dCBhZ2VudC4gQnkgZGVmYXVsdCwgdGhlIG5ldyBhZ2VudFxuICAgICAqIHNlZXMgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gc29tZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGZpbHRlciBpbnB1dHMgZS5nLiB0b1xuICAgICAqIHJlbW92ZSBvbGRlciBpbnB1dHMsIG9yIHJlbW92ZSB0b29scyBmcm9tIGV4aXN0aW5nIGlucHV0cy5cbiAgICAgKlxuICAgICAqIFRoZSBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzc3Rvcnkgc28gZmFyLCBpbmNsdWRpbmcgdGhlIGlucHV0IGl0ZW1cbiAgICAgKiB0aGF0IHRyaWdnZXJlZCB0aGUgaGFuZG9mZiBhbmQgYSB0b29sIGNhbGwgb3V0cHV0IGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBoYW5kb2ZmIHRvb2wncyBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBZb3UgYXJlIGZyZWUgdG8gbW9kaWZ5IHRoZSBpbnB1dCBoaXN0b3J5IG9yIG5ldyBpdGVtcyBhcyB5b3Ugc2VlIGZpdC4gVGhlIG5leHQgYWdlbnQgdGhhdCBydW5zXG4gICAgICogd2lsbCByZWNlaXZlIGBoYW5kb2ZmSW5wdXREYXRhLmFsbEl0ZW1zXG4gICAgICovXG4gICAgaW5wdXRGaWx0ZXI7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudDtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG9vbCBkZWZpbml0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW52b2tlIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIGdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdGhpcy5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgICAgICBzdHJpY3Q6IHRoaXMuc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoYWdlbnQsIG9uSW52b2tlSGFuZG9mZikge1xuICAgICAgICB0aGlzLmFnZW50TmFtZSA9IGFnZW50Lm5hbWU7XG4gICAgICAgIHRoaXMub25JbnZva2VIYW5kb2ZmID0gb25JbnZva2VIYW5kb2ZmO1xuICAgICAgICB0aGlzLnRvb2xOYW1lID0gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCk7XG4gICAgICAgIHRoaXMudG9vbERlc2NyaXB0aW9uID0gZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24oYWdlbnQpO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgaGFuZG9mZiBmcm9tIGFuIGFnZW50LiBIYW5kb2ZmcyBhcmUgYXV0b21hdGljYWxseSBjcmVhdGVkIHdoZW4geW91IHBhc3MgYW4gYWdlbnRcbiAqIGludG8gdGhlIGBoYW5kb2Zmc2Agb3B0aW9uIG9mIHRoZSBgQWdlbnRgIGNvbnN0cnVjdG9yLiBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHVzZSB0aGlzIGZ1bmN0aW9uXG4gKiB0byBjcmVhdGUgYSBoYW5kb2ZmIG1hbnVhbGx5LCBnaXZpbmcgeW91IG1vcmUgY29udHJvbCBvdmVyIGNvbmZpZ3VyYXRpb24uXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUSW5wdXRUeXBlIFRoZSBpbnB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kb2ZmKGFnZW50LCBjb25maWcgPSB7fSkge1xuICAgIGxldCBwYXJzZXIgPSB1bmRlZmluZWQ7XG4gICAgY29uc3QgaGFzT25IYW5kb2ZmID0gISFjb25maWcub25IYW5kb2ZmO1xuICAgIGNvbnN0IGhhc0lucHV0VHlwZSA9ICEhY29uZmlnLmlucHV0VHlwZTtcbiAgICBjb25zdCBoYXNCb3RoT3JOZWl0aGVySGFuZG9mZkFuZElucHV0VHlwZSA9IGhhc09uSGFuZG9mZiA9PT0gaGFzSW5wdXRUeXBlO1xuICAgIGlmICghaGFzQm90aE9yTmVpdGhlckhhbmRvZmZBbmRJbnB1dFR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignWW91IG11c3QgcHJvdmlkZSBlaXRoZXIgYm90aCBgb25IYW5kb2ZmYCBhbmQgYGlucHV0VHlwZWAgb3IgbmVpdGhlci4nKTtcbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24gb25JbnZva2VIYW5kb2ZmKGNvbnRleHQsIGlucHV0SnNvblN0cmluZykge1xuICAgICAgICBpZiAocGFyc2VyKSB7XG4gICAgICAgICAgICBpZiAoIWlucHV0SnNvblN0cmluZykge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBIYW5kb2ZmIGZ1bmN0aW9uIGV4cGVjdGVkIG5vbiBlbXB0eSBpbnB1dCBidXQgZ290OiAke2lucHV0SnNvblN0cmluZ31gLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiBgaW5wdXQgaXMgZW1wdHlgLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0hhbmRvZmYgZnVuY3Rpb24gZXhwZWN0ZWQgbm9uIGVtcHR5IGlucHV0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIHZlcmlmeSB0aGF0IGl0J3MgdmFsaWQgaW5wdXQgYnV0IHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIHJlc3VsdFxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHBhcnNlcihpbnB1dEpzb25TdHJpbmcpO1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcub25IYW5kb2ZmKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNvbmZpZy5vbkhhbmRvZmYoY29udGV4dCwgcGFyc2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSW52YWxpZCBKU09OIHByb3ZpZGVkYCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgSW52YWxpZCBKU09OIHdoZW4gcGFyc2luZzogJHtpbnB1dEpzb25TdHJpbmd9LiBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBKU09OIHByb3ZpZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCBjb25maWcub25IYW5kb2ZmPy4oY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFnZW50O1xuICAgIH1cbiAgICBjb25zdCBoYW5kb2ZmID0gbmV3IEhhbmRvZmYoYWdlbnQsIG9uSW52b2tlSGFuZG9mZik7XG4gICAgaWYgKGNvbmZpZy5pbnB1dFR5cGUpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShjb25maWcuaW5wdXRUeXBlLCBoYW5kb2ZmLnRvb2xOYW1lKTtcbiAgICAgICAgaGFuZG9mZi5pbnB1dEpzb25TY2hlbWEgPSByZXN1bHQuc2NoZW1hO1xuICAgICAgICBoYW5kb2ZmLnN0cmljdEpzb25TY2hlbWEgPSB0cnVlO1xuICAgICAgICBwYXJzZXIgPSByZXN1bHQucGFyc2VyO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnRvb2xOYW1lT3ZlcnJpZGUpIHtcbiAgICAgICAgaGFuZG9mZi50b29sTmFtZSA9IGNvbmZpZy50b29sTmFtZU92ZXJyaWRlO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnRvb2xEZXNjcmlwdGlvbk92ZXJyaWRlKSB7XG4gICAgICAgIGhhbmRvZmYudG9vbERlc2NyaXB0aW9uID0gY29uZmlnLnRvb2xEZXNjcmlwdGlvbk92ZXJyaWRlO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmlucHV0RmlsdGVyKSB7XG4gICAgICAgIGhhbmRvZmYuaW5wdXRGaWx0ZXIgPSBjb25maWcuaW5wdXRGaWx0ZXI7XG4gICAgfVxuICAgIHJldHVybiBoYW5kb2ZmO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgaGFuZG9mZiBmb3IgdGhlIGdpdmVuIGFnZW50LiBJZiB0aGUgYWdlbnQgaXMgYWxyZWFkeSB3cmFwcGVkIGludG8gYSBoYW5kb2ZmLFxuICogaXQgd2lsbCBiZSByZXR1cm5lZCBhcyBpcy4gT3RoZXJ3aXNlLCBhIG5ldyBoYW5kb2ZmIGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZC5cbiAqXG4gKiBAdGVtcGxhdGUgVENvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGFuZG9mZihhZ2VudCkge1xuICAgIGlmIChhZ2VudCBpbnN0YW5jZW9mIEhhbmRvZmYpIHtcbiAgICAgICAgcmV0dXJuIGFnZW50O1xuICAgIH1cbiAgICByZXR1cm4gaGFuZG9mZihhZ2VudCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYW5kb2ZmLm1qcy5tYXAiLCJsZXQgREVGQVVMVF9QUk9WSURFUjtcbi8qKlxuICogU2V0IHRoZSBtb2RlbCBwcm92aWRlciB1c2VkIHdoZW4gbm8gZXhwbGljaXQgcHJvdmlkZXIgaXMgc3VwcGxpZWQuXG4gKlxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIHVzZSBieSBkZWZhdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICBERUZBVUxUX1BST1ZJREVSID0gcHJvdmlkZXI7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIuXG4gKlxuICogQHJldHVybnMgVGhlIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWxQcm92aWRlcigpIHtcbiAgICBpZiAodHlwZW9mIERFRkFVTFRfUFJPVklERVIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGVmYXVsdCBtb2RlbCBwcm92aWRlciBzZXQuIE1ha2Ugc3VyZSB0byBzZXQgYSBwcm92aWRlciB1c2luZyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciBiZWZvcmUgY2FsbGluZyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciBvciBwYXNzIGFuIGV4cGxpY2l0IHByb3ZpZGVyLicpO1xuICAgIH1cbiAgICByZXR1cm4gREVGQVVMVF9QUk9WSURFUjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3ZpZGVycy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNoYXJlZCBiYXNlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaW4gdGhlIHByb3RvY29sIHByb3ZpZGVzIGEgYHByb3ZpZGVyRGF0YWAgZmllbGQgdG8gYWNjb21tb2RhdGUgY3VzdG9tIGZ1bmN0aW9uYWxpdHlcbiAqIG9yIG5ldyBmaWVsZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFNoYXJlZEJhc2UgPSB6Lm9iamVjdCh7XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBvcHRpb25hbCBwcm92aWRlciBzcGVjaWZpYyBkYXRhLiBVc2VkIGZvciBjdXN0b20gZnVuY3Rpb25hbGl0eSBvciBtb2RlbCBwcm92aWRlclxuICAgICAqIHNwZWNpZmljIGZpZWxkcy5cbiAgICAgKi9cbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogRXZlcnkgaXRlbSBoYXMgYSBzaGFyZWQgb2Ygc2hhcmVkIGl0ZW0gZGF0YSBpbmNsdWRpbmcgYW4gb3B0aW9uYWwgSUQuXG4gKi9cbmV4cG9ydCBjb25zdCBJdGVtQmFzZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbiBJRCB0byBpZGVudGlmeSB0aGUgaXRlbS4gVGhpcyBpcyBvcHRpb25hbCBieSBkZWZhdWx0LiBJZiBhIG1vZGVsIHByb3ZpZGVyIGFic29sdXRlbHlcbiAgICAgKiByZXF1aXJlcyB0aGlzIGZpZWxkLCBpdCB3aWxsIGJlIHZhbGlkYXRlZCBvbiB0aGUgbW9kZWwgbGV2ZWwuXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ29udGVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlZnVzYWwgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWZ1c2FsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlZnVzYWwgZXhwbGFuYXRpb24gZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVmdXNhbDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYSBVUkwsIGJhc2U2NCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgaW1hZ2U6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvdWxkIGJlIGEgVVJMLCBiYXNlNjQgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRGaWxlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfZmlsZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWxlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYSBVUkwsIGJhc2U2NCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgZmlsZTogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdFaXRoZXIgYmFzZTY0IGVuY29kZWQgZmlsZSBkYXRhIG9yIGEgcHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTCcpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpLFxuICAgIH0pKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICB1cmw6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgUERGIGZpbGUgVVJMJyksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQ29udGVudHMgb2YgdGhlIGZpbGUgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpLFxufSk7XG5leHBvcnQgY29uc3QgQXVkaW9Db250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXVkaW8gaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBhdWRpbzogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBmaWxlIGlkJyksXG4gICAgLyoqXG4gICAgICogVGhlIGZvcm1hdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgZm9ybWF0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNjcmlwdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbWFnZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGltYWdlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhJyksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGRhdGEuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGRhdGE6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbWVkaWEgdHlwZSBvZiB0aGUgaW1hZ2UuXG4gICAgICovXG4gICAgbWVkaWFUeXBlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdJQU5BIG1lZGlhIHR5cGUgb2YgdGhlIGltYWdlJyksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclRvb2xPdXRwdXQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9zY3JlZW5zaG90JyksXG4gICAgLyoqXG4gICAgICogQSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGEgVVJMIHJlcHJlc2VudGluZyB0aGUgc2NyZWVuc2hvdC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIFVSTCcpLFxufSk7XG5leHBvcnQgY29uc3QgY29tcHV0ZXJBY3Rpb25zID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3NjcmVlbnNob3QnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgYnV0dG9uOiB6LmVudW0oWydsZWZ0JywgJ3JpZ2h0JywgJ3doZWVsJywgJ2JhY2snLCAnZm9yd2FyZCddKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZG91YmxlX2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Njcm9sbCcpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeDogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3k6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3R5cGUnKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnd2FpdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtb3ZlJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2tleXByZXNzJyksXG4gICAgICAgIGtleXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RyYWcnKSxcbiAgICAgICAgcGF0aDogei5hcnJheSh6Lm9iamVjdCh7IHg6IHoubnVtYmVyKCksIHk6IHoubnVtYmVyKCkgfSkpLFxuICAgIH0pLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXNzYWdlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgQXNzaXN0YW50Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIE91dHB1dFRleHQsXG4gICAgUmVmdXNhbCxcbiAgICBJbnB1dFRleHQsXG4gICAgQXVkaW9Db250ZW50LFxuICAgIEltYWdlQ29udGVudCxcbl0pO1xuY29uc3QgTWVzc2FnZUJhc2UgPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEFueSBpdGVtIHdpdGhvdXQgYSB0eXBlIGlzIHRyZWF0ZWQgYXMgYSBtZXNzYWdlXG4gICAgICovXG4gICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJykub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFzc2lzdGFudE1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIGFzc2lzdGFudCAoaS5lLiB0aGUgbW9kZWwpXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdhc3Npc3RhbnQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShBc3Npc3RhbnRDb250ZW50KSxcbn0pO1xuZXhwb3J0IGNvbnN0IFVzZXJDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgSW5wdXRUZXh0LFxuICAgIElucHV0SW1hZ2UsXG4gICAgSW5wdXRGaWxlLFxuICAgIEF1ZGlvQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFVzZXJNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShVc2VyQ29udGVudCkub3Ioei5zdHJpbmcoKSksXG59KTtcbmNvbnN0IFN5c3RlbU1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBzeXN0ZW0gbWVzc2FnZSB0byB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnc3lzdGVtJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE1lc3NhZ2VJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3JvbGUnLCBbXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUb29sIGNhbGwgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBIb3N0ZWRUb29sQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2xfY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbC4gRm9yIGV4YW1wbGUgYHdlYl9zZWFyY2hfY2FsbGAgb3IgYGZpbGVfc2VhcmNoX2NhbGxgXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sJyksXG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbCcpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcHJpbWFyeSBvdXRwdXQgb2YgdGhlIHRvb2wgY2FsbC4gQWRkaXRpb25hbCBvdXRwdXQgbWlnaHQgYmUgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICAgICAqL1xuICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgRnVuY3Rpb25DYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSB0b29sIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIHRvb2wgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHdhcyBjYWxsZWRcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtUb29sT3V0cHV0VGV4dCwgVG9vbE91dHB1dEltYWdlXSksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclVzZUNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBhY3Rpb24gdG8gYmUgcGVyZm9ybWVkIGJ5IHRoZSBjb21wdXRlci5cbiAgICAgKi9cbiAgICBhY3Rpb246IGNvbXB1dGVyQWN0aW9ucyxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IENvbXB1dGVyVG9vbE91dHB1dCxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNwZWNpYWwgaXRlbSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlYXNvbmluZ0l0ZW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZycpLFxuICAgIC8qKlxuICAgICAqIFRoZSB1c2VyIGZhY2luZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVhc29uaW5nLiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIG1pZ2h0IGJlIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KElucHV0VGV4dCksXG59KTtcbi8qKlxuICogVGhpcyBpcyBhIGNhdGNoIGFsbCBmb3IgaXRlbXMgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sLlxuICpcbiAqIEZvciBleGFtcGxlLCBhIG1vZGVsIG1pZ2h0IHJldHVybiBhbiBpdGVtIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sIHVzaW5nIHRoaXMgdHlwZS5cbiAqXG4gKiBJbiB0aGF0IGNhc2UgZXZlcnl0aGluZyByZXR1cm5lZCBmcm9tIHRoZSBtb2RlbCBzaG91bGQgYmUgcGFzc2VkIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAqXG4gKiBUaGlzIGVuYWJsZXMgbmV3IGZlYXR1cmVzIHRvIGJlIGFkZGVkIHRvIGJlIGFkZGVkIGJ5IGEgbW9kZWwgcHJvdmlkZXIgd2l0aG91dCBicmVha2luZyB0aGUgcHJvdG9jb2wuXG4gKi9cbmV4cG9ydCBjb25zdCBVbmtub3duSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd1bmtub3duJyksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpvaW5lZCBpdGVtIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgT3V0cHV0TW9kZWxJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG5leHBvcnQgY29uc3QgTW9kZWxJdGVtID0gei51bmlvbihbXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIFN5c3RlbU1lc3NhZ2VJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICBDb21wdXRlckNhbGxSZXN1bHRJdGVtLFxuICAgIFJlYXNvbmluZ0l0ZW0sXG4gICAgVW5rbm93bkl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE1ldGEgZGF0YSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFVzYWdlRGF0YSA9IHoub2JqZWN0KHtcbiAgICByZXF1ZXN0czogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU3RyZWFtIGV2ZW50IHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIG5ldyBvdXRwdXQgdGV4dCBpcyBhdmFpbGFibGUgdG8gc3RyZWFtIHRvIHRoZSB1c2VyLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRUZXh0U3RyZWFtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHRfZGVsdGEnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZGVsdGEgdGV4dCB0aGF0IHdhcyBzdHJlYW1lZCBieSB0aGUgbW9kZWx0byB0aGUgdXNlci5cbiAgICAgKi9cbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIG5ldyByZXNwb25zZSBpcyBzdGFydGVkLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9zdGFydGVkJyksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gYSByZXNwb25zZSBpcyBjb21wbGV0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2VfZG9uZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXNwb25zZSBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICByZXNwb25zZTogU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIElEIG9mIHRoZSByZXNwb25zZS5cbiAgICAgICAgICovXG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHVzYWdlIGRhdGEgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICovXG4gICAgICAgIHVzYWdlOiBVc2FnZURhdGEsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAgICAgKi9cbiAgICAgICAgb3V0cHV0OiB6LmFycmF5KE91dHB1dE1vZGVsSXRlbSksXG4gICAgfSksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgZm9yIGV2ZXJ5IGl0ZW0gdGhhdCBnZXRzIHN0cmVhbWVkIHRvIHRoZSBtb2RlbC4gVXNlZCB0byBleHBvc2UgdGhlIHJhdyBldmVudHNcbiAqIGZyb20gdGhlIG1vZGVsLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRHZW5lcmljSXRlbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21vZGVsJyksXG4gICAgZXZlbnQ6IHouYW55KCkuZGVzY3JpYmUoJ1RoZSBldmVudCBmcm9tIHRoZSBtb2RlbCcpLFxufSk7XG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBTdHJlYW1FdmVudFRleHRTdHJlYW0sXG4gICAgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCxcbiAgICBTdHJlYW1FdmVudEdlbmVyaWNJdGVtLFxuXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm90b2NvbC5tanMubWFwIiwiaW1wb3J0IHsgVXNhZ2VEYXRhIH0gZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIFRyYWNrcyB0b2tlbiB1c2FnZSBhbmQgcmVxdWVzdCBjb3VudHMgZm9yIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzYWdlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHJlcXVlc3RzIG1hZGUgdG8gdGhlIExMTSBBUEkuXG4gICAgICovXG4gICAgcmVxdWVzdHM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYW5kIHJlY2VpdmVkLCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gaW5wdXQ/LnJlcXVlc3RzID8/IDE7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gaW5wdXQ/LmlucHV0VG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSBpbnB1dD8udG90YWxUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgID8gW2lucHV0LmlucHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICA/IFtpbnB1dC5vdXRwdXRUb2tlbnNEZXRhaWxzXVxuICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkKG5ld1VzYWdlKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdHMgKz0gbmV3VXNhZ2UucmVxdWVzdHM7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKz0gbmV3VXNhZ2UuaW5wdXRUb2tlbnM7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zICs9IG5ld1VzYWdlLm91dHB1dFRva2VucztcbiAgICAgICAgdGhpcy50b3RhbFRva2VucyArPSBuZXdVc2FnZS50b3RhbFRva2VucztcbiAgICAgICAgaWYgKG5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgVXNhZ2VEYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2FnZS5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuLyoqXG4gKiBBIGNvbnRleHQgb2JqZWN0IHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Db250ZXh0IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGV4dCBvYmplY3QgcGFzc2VkIGJ5IHlvdSB0byB0aGUgYFJ1bm5lci5ydW4oKWBcbiAgICAgKi9cbiAgICBjb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBvZiB0aGUgYWdlbnQgcnVuIHNvIGZhci4gRm9yIHN0cmVhbWVkIHJlc3BvbnNlcywgdGhlIHVzYWdlIHdpbGwgYmUgc3RhbGUgdW50aWwgdGhlXG4gICAgICogbGFzdCBjaHVuayBvZiB0aGUgc3RyZWFtIGlzIHByb2Nlc3NlZC5cbiAgICAgKi9cbiAgICB1c2FnZTtcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0b29sIG5hbWVzIHRvIHdoZXRoZXIgdGhleSBoYXZlIGJlZW4gYXBwcm92ZWQuXG4gICAgICovXG4gICAgI2FwcHJvdmFscztcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0ID0ge30pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy51c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgICAgICB0aGlzLiNhcHByb3ZhbHMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYnVpbGQgdGhlIGFwcHJvdmFscyBtYXAgZnJvbSBhIHNlcmlhbGl6ZWQgc3RhdGUuXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxzIC0gVGhlIGFwcHJvdmFscyBtYXAgdG8gcmVidWlsZC5cbiAgICAgKi9cbiAgICBfcmVidWlsZEFwcHJvdmFscyhhcHByb3ZhbHMpIHtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhhcHByb3ZhbHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAgICAgKiBAcGFyYW0gY2FsbElkIC0gVGhlIGNhbGwgSUQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZCwgYGZhbHNlYCBpZiBibG9ja2VkIGFuZCBgdW5kZWZpbmVkYCBpZiBub3QgeWV0IGFwcHJvdmVkIG9yIHJlamVjdGVkLlxuICAgICAqL1xuICAgIGlzVG9vbEFwcHJvdmVkKHsgdG9vbE5hbWUsIGNhbGxJZCB9KSB7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlICYmIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUb29sIGlzIHBlcm1hbmVudGx5IGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsQXBwcm92YWwgPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5yZWplY3RlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5yZWplY3RlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCAmJiBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRvb2wgY2FsbCAke2NhbGxJZH0gaXMgYm90aCBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAgICAgKiBAcGFyYW0gY2FsbElkIC0gVGhlIGNhbGwgSUQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIHsgYWx3YXlzQXBwcm92ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5hcHByb3ZlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqL1xuICAgIHJlamVjdFRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c1JlamVjdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNSZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSkgPz8ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IFtdLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5LnJlamVjdGVkKSkge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb24gdG9vbCBoYXMgY2FsbF9pZCwgaG9zdGVkIHRvb2wgY2FsbCBoYXMgaWRcbiAgICAgICAgICAgIGNvbnN0IGNhbGxJZCA9ICdjYWxsSWQnIGluIGFwcHJvdmFsSXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgPyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5jYWxsSWQgLy8gZnVuY3Rpb24gdG9vbHNcbiAgICAgICAgICAgICAgICA6IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmlkOyAvLyBob3N0ZWQgdG9vbHNcbiAgICAgICAgICAgIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQucHVzaChjYWxsSWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIGFwcHJvdmFsRW50cnkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICB1c2FnZTogdGhpcy51c2FnZSxcbiAgICAgICAgICAgIGFwcHJvdmFsczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuI2FwcHJvdmFscy5lbnRyaWVzKCkpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkNvbnRleHQubWpzLm1hcCIsImltcG9ydCB7IFJlYWRhYmxlU3RyZWFtIGFzIF9SZWFkYWJsZVN0cmVhbSwgVHJhbnNmb3JtU3RyZWFtLCBSZWFkYWJsZSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbUV2ZW50VGV4dFN0cmVhbSB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuY2xhc3MgUnVuUmVzdWx0QmFzZSB7XG4gICAgc3RhdGU7XG4gICAgY29uc3RydWN0b3Ioc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgYWdlbnQgcnVuLiBUaGlzIGluY2x1ZGVzIHRoZSBpbnB1dCBpdGVtcyBhbmQgdGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nXG4gICAgICogdGhlIGFnZW50IHJ1bi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQodGhpcy5pbnB1dCwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGVzZSBpbmNsdWRlIHRoaW5ncyBsaWtlIG5ldyBtZXNzYWdlcywgdG9vbFxuICAgICAqIGNhbGxzIGFuZCB0aGVpciBvdXRwdXRzLCBldGMuXG4gICAgICpcbiAgICAgKiBJdCBkb2VzIG5vdCBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhZ2VudHMgYW5kIGluc3RlYWQgcmVwcmVzZW50cyB0aGUgbW9kZWwgZGF0YS5cbiAgICAgKlxuICAgICAqIEZvciB0aGUgb3V0cHV0IGluY2x1ZGluZyB0aGUgYWdlbnRzLCB1c2UgdGhlIGBuZXdJdGVtc2AgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dChbXSwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgY29weSBvZiB0aGUgb3JpZ2luYWwgaW5wdXQgaXRlbXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3JpZ2luYWxJbnB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJ1biBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4uIFRoaXMgYXNzb2NpYXRlcyB0aGUgbW9kZWwgZGF0YSB3aXRoIHRoZSBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG1vZGVsIGRhdGEgdGhhdCBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1biwgdXNlIHRoZSBgb3V0cHV0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXQgbmV3SXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9nZW5lcmF0ZWRJdGVtcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJhdyBMTE0gcmVzcG9uc2VzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgZHVyaW5nIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IHJhd1Jlc3BvbnNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX21vZGVsUmVzcG9uc2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCByZXNwb25zZSBJRCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBsYXN0UmVzcG9uc2VJZCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gdGhpcy5yYXdSZXNwb25zZXM7XG4gICAgICAgIHJldHVybiByZXNwb25zZXMgJiYgcmVzcG9uc2VzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gcmVzcG9uc2VzW3Jlc3BvbnNlcy5sZW5ndGggLSAxXS5yZXNwb25zZUlkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgYWdlbnQgdGhhdCB3YXMgcnVuXG4gICAgICovXG4gICAgZ2V0IGxhc3RBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBpbnB1dCBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICBnZXQgaW5wdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dEd1YXJkcmFpbFJlc3VsdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbnkgaW50ZXJydXB0aW9ucyB0aGF0IG9jY3VycmVkIGR1cmluZyB0aGUgYWdlbnQgcnVuIGZvciBleGFtcGxlIGZvciB0b29sIGFwcHJvdmFscy5cbiAgICAgKi9cbiAgICBnZXQgaW50ZXJydXB0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC4gSWYgdGhlIG91dHB1dCB0eXBlIHdhcyBzZXQgdG8gYW55dGhpbmcgb3RoZXIgdGhhbiBgdGV4dGAsXG4gICAgICogdGhpcyB3aWxsIGJlIHBhcnNlZCBlaXRoZXIgYXMgSlNPTiBvciB1c2luZyB0aGUgWm9kIHNjaGVtYSB5b3UgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZ2V0IGZpbmFsT3V0cHV0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIud2FybignQWNjZXNzZWQgZmluYWxPdXRwdXQgYmVmb3JlIGFnZW50IHJ1biBpcyBjb21wbGV0ZWQuJyk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blJlc3VsdCBleHRlbmRzIFJ1blJlc3VsdEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKHN0YXRlKTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSByZXN1bHQgb2YgYW4gYWdlbnQgcnVuIGluIHN0cmVhbWluZyBtb2RlLlxuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtZWRSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhZ2VudCB0aGF0IGlzIHJ1bm5pbmdcbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXN0QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHR1cm4gbnVtYmVyXG4gICAgICovXG4gICAgY3VycmVudFR1cm4gPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0dXJucyB0aGF0IGNhbiBiZSBydW5cbiAgICAgKi9cbiAgICBtYXhUdXJucztcbiAgICAjZXJyb3IgPSBudWxsO1xuICAgICNzaWduYWw7XG4gICAgI3JlYWRhYmxlQ29udHJvbGxlcjtcbiAgICAjcmVhZGFibGVTdHJlYW07XG4gICAgI2NvbXBsZXRlZFByb21pc2U7XG4gICAgI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVqZWN0O1xuICAgICNjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQgPSB7fSkge1xuICAgICAgICBzdXBlcihyZXN1bHQuc3RhdGUpO1xuICAgICAgICB0aGlzLiNzaWduYWwgPSByZXN1bHQuc2lnbmFsO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcmVhZGFibGVTdHJlYW0uY2FuY2VsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyZWFkYWJsZVN0cmVhbSA9IG5ldyBfUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RhcnQ6IChjb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQWRkcyBhbiBpdGVtIHRvIHRoZSBzdHJlYW0gb2Ygb3V0cHV0IGl0ZW1zXG4gICAgICovXG4gICAgX2FkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAoIXRoaXMuY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXI/LmVucXVldWUoaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHN0cmVhbSBoYXMgYmVlbiBjb21wbGV0ZWRcbiAgICAgKi9cbiAgICBfZG9uZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEhhbmRsZXMgYW4gZXJyb3IgaW4gdGhlIHN0cmVhbSBsb29wLlxuICAgICAqL1xuICAgIF9yYWlzZUVycm9yKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuY2FuY2VsbGVkICYmIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyLmVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jZXJyb3IgPSBlcnI7XG4gICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3Q/LihlcnIpO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJlc3VsdGVkIGluIGFuIGVycm9yOiAke2V9YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmVhbSBoYXMgYmVlbiBjYW5jZWxsZWQuXG4gICAgICovXG4gICAgZ2V0IGNhbmNlbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NhbmNlbGxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyByZWFkYWJsZSBzdHJlYW0uXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gb2YgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICB0b1N0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3JlYWRhYmxlU3RyZWFtO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBd2FpdCB0aGlzIHByb21pc2UgdG8gZW5zdXJlIHRoYXQgdGhlIHN0cmVhbSBoYXMgYmVlbiBjb21wbGV0ZWQgaWYgeW91IGFyZSBub3QgY29uc3VtaW5nIHRoZVxuICAgICAqIHN0cmVhbSBkaXJlY3RseS5cbiAgICAgKi9cbiAgICBnZXQgY29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29tcGxldGVkUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXJyb3IgdGhyb3duIGR1cmluZyB0aGUgcnVuLCBpZiBhbnkuXG4gICAgICovXG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXJyb3I7XG4gICAgfVxuICAgIHRvVGV4dFN0cmVhbShvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy4jcmVhZGFibGVTdHJlYW0ucGlwZVRocm91Z2gobmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgICB0cmFuc2Zvcm0oZXZlbnQsIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnICYmXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudHlwZSA9PT0gJ291dHB1dF90ZXh0X2RlbHRhJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gU3RyZWFtRXZlbnRUZXh0U3RyZWFtLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoaXRlbS5kZWx0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAob3B0aW9ucy5jb21wYXRpYmxlV2l0aE5vZGVTdHJlYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhZGFibGUuZnJvbVdlYihzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXN1bHQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVUb29sKHRvb2wpIHtcbiAgICBpZiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICBzdHJpY3Q6IHRvb2wuc3RyaWN0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAodG9vbC50eXBlID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRvb2wuY29tcHV0ZXIuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBkaW1lbnNpb25zOiB0b29sLmNvbXB1dGVyLmRpbWVuc2lvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiB0b29sLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUhhbmRvZmYoaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xOYW1lOiBoLnRvb2xOYW1lLFxuICAgICAgICB0b29sRGVzY3JpcHRpb246IGgudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICBpbnB1dEpzb25TY2hlbWE6IGguaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICBzdHJpY3RKc29uU2NoZW1hOiBoLnN0cmljdEpzb25TY2hlbWEsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZS5tanMubWFwIiwiaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1CYXNlIHtcbiAgICB0eXBlID0gJ2Jhc2VfaXRlbSc7XG4gICAgcmF3SXRlbTtcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICByYXdJdGVtOiB0aGlzLnJhd0l0ZW0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdtZXNzYWdlX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjb250ZW50KCkge1xuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5yYXdJdGVtLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICBvdXRwdXQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIG91dHB1dDogdG9TbWFydFN0cmluZyh0aGlzLm91dHB1dCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blJlYXNvbmluZ0l0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3JlYXNvbmluZ19pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZk91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBzb3VyY2VBZ2VudDtcbiAgICB0YXJnZXRBZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIHNvdXJjZUFnZW50LCB0YXJnZXRBZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLnNvdXJjZUFnZW50ID0gc291cmNlQWdlbnQ7XG4gICAgICAgIHRoaXMudGFyZ2V0QWdlbnQgPSB0YXJnZXRBZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBzb3VyY2VBZ2VudDogdGhpcy5zb3VyY2VBZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRhcmdldEFnZW50OiB0aGlzLnRhcmdldEFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQXBwcm92YWxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2FwcHJvdmFsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSW5qZWN0ZWRNZXNzYWdlSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnaW5qZWN0ZWRfbWVzc2FnZV9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IGFsbCB0ZXh0IG91dHB1dCBmcm9tIGEgbGlzdCBvZiBydW4gaXRlbXMgYnkgY29uY2F0ZW5hdGluZyB0aGUgY29udGVudCBvZiBhbGxcbiAqIG1lc3NhZ2Ugb3V0cHV0IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIFRoZSBsaXN0IG9mIHJ1biBpdGVtcyB0byBleHRyYWN0IHRleHQgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIG9mIGFsbCB0aGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgcnVuIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEFsbFRleHRPdXRwdXQoaXRlbXMpIHtcbiAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSAnbWVzc2FnZV9vdXRwdXRfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uY29udGVudClcbiAgICAgICAgLmpvaW4oJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsIi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0TWVzc2FnZVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0TWVzc2FnZSkge1xuICAgIGlmIChvdXRwdXRNZXNzYWdlLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAob3V0cHV0TWVzc2FnZS5yb2xlICE9PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0SXRlbSA9IG91dHB1dE1lc3NhZ2UuY29udGVudFtvdXRwdXRNZXNzYWdlLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RJdGVtLnR5cGUgIT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RJdGVtLnRleHQ7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gdGhlIG91dHB1dCBtZXNzYWdlLlxuICogQHBhcmFtIG91dHB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE91dHB1dFRleHQob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC5vdXRwdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIChnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG91dHB1dC5vdXRwdXRbb3V0cHV0Lm91dHB1dC5sZW5ndGggLSAxXSkgfHwgJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXMubWpzLm1hcCIsIi8qKlxuICogU3RyZWFtaW5nIGV2ZW50IGZyb20gdGhlIExMTS4gVGhlc2UgYXJlIGByYXdgIGV2ZW50cywgaS5lLiB0aGV5IGFyZSBkaXJlY3RseSBwYXNzZWQgdGhyb3VnaCBmcm9tXG4gKiB0aGUgTExNLlxuICovXG5leHBvcnQgY2xhc3MgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCB7XG4gICAgZGF0YTtcbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgdHlwZSA9ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgcmF3IHJlc3BvbnNlcyBzdHJlYW0gZXZlbnRzIGZyb20gdGhlIExMTS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgfVxufVxuLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnRzIHRoYXQgd3JhcCBhIGBSdW5JdGVtYC4gQXMgdGhlIGFnZW50IHByb2Nlc3NlcyB0aGUgTExNIHJlc3BvbnNlLCBpdCB3aWxsIGdlbmVyYXRlXG4gKiB0aGVzZSBldmVudHMgZnJvbSBuZXcgbWVzc2FnZXMsIHRvb2wgY2FsbHMsIHRvb2wgb3V0cHV0cywgaGFuZG9mZnMsIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1TdHJlYW1FdmVudCB7XG4gICAgbmFtZTtcbiAgICBpdGVtO1xuICAgIHR5cGUgPSAncnVuX2l0ZW1fc3RyZWFtX2V2ZW50JztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICogQHBhcmFtIGl0ZW0gVGhlIGl0ZW0gdGhhdCB3YXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpdGVtKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuaXRlbSA9IGl0ZW07XG4gICAgfVxufVxuLyoqXG4gKiBFdmVudCB0aGF0IG5vdGlmaWVzIHRoYXQgdGhlcmUgaXMgYSBuZXcgYWdlbnQgcnVubmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50IHtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ2FnZW50X3VwZGF0ZWRfc3RyZWFtX2V2ZW50JztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYWdlbnQgVGhlIG5ldyBhZ2VudFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFnZW50KSB7XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudHMubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgUnVuSW5qZWN0ZWRNZXNzYWdlSXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZSB9IGZyb20gXCIuL3V0aWxzL21lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgd2l0aEZ1bmN0aW9uU3Bhbiwgd2l0aEhhbmRvZmZTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jcmVhdGVTcGFucy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBSdW5JdGVtU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy9pbmRleC5tanNcIjtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzTW9kZWxSZXNwb25zZShtb2RlbFJlc3BvbnNlLCBhZ2VudCwgdG9vbHMsIGhhbmRvZmZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBjb25zdCBydW5IYW5kb2ZmcyA9IFtdO1xuICAgIGNvbnN0IHJ1bkZ1bmN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bkNvbXB1dGVyQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29scy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJykubWFwKCh0KSA9PiBbdC5uYW1lLCB0XSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgY29uc3QgbWNwVG9vbE1hcCA9IG5ldyBNYXAodG9vbHNcbiAgICAgICAgLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwJylcbiAgICAgICAgLm1hcCgodCkgPT4gdClcbiAgICAgICAgLm1hcCgodCkgPT4gW3QucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCwgdF0pKTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBtb2RlbFJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgaWYgKG91dHB1dC5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBvdXRwdXQubmFtZTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKHRvb2xOYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnIHx8XG4gICAgICAgICAgICAgICAgb3V0cHV0Lm5hbWUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBIb3N0ZWQgcmVtb3RlIE1DUCBzZXJ2ZXIncyBhcHByb3ZhbCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJMYWJlbCA9IHByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWw7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwU2VydmVyVG9vbCA9IG1jcFRvb2xNYXAuZ2V0KG1jcFNlcnZlckxhYmVsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1jcFNlcnZlclRvb2wgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTUNQIHNlcnZlciAoJHttY3BTZXJ2ZXJMYWJlbH0pIG5vdCBmb3VuZCBpbiBBZ2VudCAoJHthZ2VudC5uYW1lfSlgO1xuICAgICAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWNwX3NlcnZlcl9sYWJlbDogbWNwU2VydmVyTGFiZWwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERvIHRoaXMgYXBwcm92YWwgbGF0ZXI6XG4gICAgICAgICAgICAgICAgLy8gV2Ugc3VwcG9ydCBib3RoIG9uQXBwcm92YWwgY2FsbGJhY2sgKGxpa2UgdGhlIFB5dGhvbiBTREsgZG9lcykgYW5kIEhJVEwgcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXNlIHRoaXMgbmFtZSB0byBhbGlnbiB3aXRoIHRoZSBuYW1lIHNlbnQgZnJvbSB0aGUgc2VydmVyc1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm92aWRlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHByb3ZpZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpO1xuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBhcHByb3ZhbEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIG1jcFRvb2w6IG1jcFNlcnZlclRvb2wsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFtY3BTZXJ2ZXJUb29sLnByb3ZpZGVyRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG9uQXBwcm92YWwgZnVuY3Rpb24gZXhpc3RzLCBpdCBjb25maXJtcyB0aGUgYXBwcm92YWwgcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGh1cywgdGhpcyBhcHByb3ZhbCBpdGVtIG11c3QgYmUgYXBwZW5kZWQgb25seSBmb3IgdGhlIG5leHQgdHVybiBpbnRlcnJ1cHRpb24gcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdyZWFzb25pbmcnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5SZWFzb25pbmdJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2NvbXB1dGVyX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2NvbXB1dGVyX3VzZScpO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b29sc1VzZWQucHVzaChvdXRwdXQubmFtZSk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgIGlmIChoYW5kb2ZmKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuSGFuZG9mZnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2ZmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvbk1hcC5nZXQob3V0cHV0Lm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFmdW5jdGlvblRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVG9vbCAke291dHB1dC5uYW1lfSBub3QgZm91bmQgaW4gYWdlbnQgJHthZ2VudC5uYW1lfS5gLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHRvb2w6IGZ1bmN0aW9uVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBpdGVtcyxcbiAgICAgICAgaGFuZG9mZnM6IHJ1bkhhbmRvZmZzLFxuICAgICAgICBmdW5jdGlvbnM6IHJ1bkZ1bmN0aW9ucyxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBydW5Db21wdXRlckFjdGlvbnMsXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgIHRvb2xzVXNlZDogdG9vbHNVc2VkLFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5GdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG5jbGFzcyBTaW5nbGVTdGVwUmVzdWx0IHtcbiAgICBvcmlnaW5hbElucHV0O1xuICAgIG1vZGVsUmVzcG9uc2U7XG4gICAgcHJlU3RlcEl0ZW1zO1xuICAgIG5ld1N0ZXBJdGVtcztcbiAgICBuZXh0U3RlcDtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaW5wdXQgaXRlbXMgaS5lLiB0aGUgaXRlbXMgYmVmb3JlIHJ1bigpIHdhcyBjYWxsZWQuIE1heSBiZSBtdXRlZCBieSBoYW5kb2ZmIGlucHV0IGZpbHRlcnNcbiAgICAgKi9cbiAgICBvcmlnaW5hbElucHV0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBjdXJyZW50IHN0ZXBcbiAgICAgKi9cbiAgICBtb2RlbFJlc3BvbnNlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgYmVmb3JlIHRoZSBjdXJyZW50IHN0ZXAgd2FzIGV4ZWN1dGVkXG4gICAgICovXG4gICAgcHJlU3RlcEl0ZW1zLCBcbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgYWZ0ZXIgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBuZXdTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXh0IHN0ZXAgdG8gZXhlY3V0ZVxuICAgICAqL1xuICAgIG5leHRTdGVwKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxJbnB1dCA9IG9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHRoaXMubW9kZWxSZXNwb25zZSA9IG1vZGVsUmVzcG9uc2U7XG4gICAgICAgIHRoaXMucHJlU3RlcEl0ZW1zID0gcHJlU3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5ld1N0ZXBJdGVtcyA9IG5ld1N0ZXBJdGVtcztcbiAgICAgICAgdGhpcy5uZXh0U3RlcCA9IG5leHRTdGVwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuIChpLmUuIGV2ZXJ5dGhpbmcgZ2VuZXJhdGVkIGFmdGVyIG9yaWdpbmFsSW5wdXQpXG4gICAgICovXG4gICAgZ2V0IGdlbmVyYXRlZEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVTdGVwSXRlbXMuY29uY2F0KHRoaXMubmV3U3RlcEl0ZW1zKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVSZXNldFRvb2xDaG9pY2UoYWdlbnQsIHRvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKSB7XG4gICAgaWYgKGFnZW50LnJlc2V0VG9vbENob2ljZSAmJiB0b29sVXNlVHJhY2tlci5oYXNVc2VkVG9vbHMoYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1vZGVsU2V0dGluZ3MsIHRvb2xDaG9pY2U6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxTZXR0aW5ncztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzKGFnZW50LCBvcmlnaW5hbElucHV0LCBvcmlnaW5hbFByZVN0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLCBydW5uZXIsIHN0YXRlKSB7XG4gICAgLy8gY2FsbF9pZHMgZm9yIGZ1bmN0aW9uIHRvb2xzXG4gICAgY29uc3QgZnVuY3Rpb25DYWxsSWRzID0gb3JpZ2luYWxQcmVTdGVwSXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0gJiZcbiAgICAgICAgJ2NhbGxJZCcgaW4gaXRlbS5yYXdJdGVtICYmXG4gICAgICAgIGl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbS5jYWxsSWQpO1xuICAgIC8vIFJ1biBmdW5jdGlvbiB0b29scyB0aGF0IHJlcXVpcmUgYXBwcm92YWwgYWZ0ZXIgdGhleSBnZXQgdGhlaXIgYXBwcm92YWwgcmVzdWx0c1xuICAgIGNvbnN0IGZ1bmN0aW9uVG9vbFJ1bnMgPSBwcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMuZmlsdGVyKChydW4pID0+IHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uQ2FsbElkcy5pbmNsdWRlcyhydW4udG9vbENhbGwuY2FsbElkKTtcbiAgICB9KTtcbiAgICBjb25zdCBmdW5jdGlvblJlc3VsdHMgPSBhd2FpdCBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIGZ1bmN0aW9uVG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpO1xuICAgIC8vIENyZWF0ZSB0aGUgaW5pdGlhbCBzZXQgb2YgdGhlIG91dHB1dCBpdGVtc1xuICAgIGNvbnN0IG5ld0l0ZW1zID0gZnVuY3Rpb25SZXN1bHRzLm1hcCgocikgPT4gci5ydW5JdGVtKTtcbiAgICAvLyBSdW4gTUNQIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgbWNwQXBwcm92YWxSdW5zID0gcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gKHJ1bi5yZXF1ZXN0SXRlbS50eXBlID09PSAndG9vbF9hcHByb3ZhbF9pdGVtJyAmJlxuICAgICAgICAgICAgcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgICAgICBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpO1xuICAgIH0pO1xuICAgIGZvciAoY29uc3QgcnVuIG9mIG1jcEFwcHJvdmFsUnVucykge1xuICAgICAgICAvLyB0aGUgYXBwcm92YWxfcmVxdWVzdF9pZCBcIm1jcHJfMTIzLi4uXCJcbiAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5pZDtcbiAgICAgICAgY29uc3QgYXBwcm92ZWQgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGl0ZW0gbmFtZSBtdXN0IGJlIHRoZSBzYW1lIHdpdGggdGhlIG9uZSBzZW50IGZyb20gUmVzcG9uc2VzIEFQSSBzZXJ2ZXJcbiAgICAgICAgICAgIHRvb2xOYW1lOiBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5uYW1lLFxuICAgICAgICAgICAgY2FsbElkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYXBwcm92ZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZTogYXBwcm92ZWQsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgcmVhc29uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gVGVsbCBSZXNwb25zZXMgQVBJIHNlcnZlciB0aGUgYXBwcm92YWwgcmVzdWx0IGluIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hlY2tUb29sT3V0cHV0ID0gYXdhaXQgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgZnVuY3Rpb25SZXN1bHRzLCBzdGF0ZSk7XG4gICAgLy8gRXhjbHVkZSB0aGUgdG9vbCBhcHByb3ZhbCBpdGVtcywgd2hpY2ggc2hvdWxkIG5vdCBiZSBzZW50IHRvIFJlc3BvbnNlcyBBUEksXG4gICAgLy8gZnJvbSB0aGUgU2luZ2xlU3RlcFJlc3VsdCdzIHByZVN0ZXBJdGVtc1xuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSk7XG4gICAgfSk7XG4gICAgaWYgKGNoZWNrVG9vbE91dHB1dC5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgIG91dHB1dDogY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hlY2tUb29sT3V0cHV0LmlzSW50ZXJydXB0ZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0aW9uczogY2hlY2tUb29sT3V0cHV0LmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gd2Ugb25seSByYW4gbmV3IHRvb2xzIGFuZCBzaWRlIGVmZmVjdHMuIFdlIG5lZWQgdG8gcnVuIHRoZSByZXN0IG9mIHRoZSBhZ2VudFxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBjb25zdCBwcmVTdGVwSXRlbXMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtcztcbiAgICBsZXQgbmV3SXRlbXMgPSBwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcztcbiAgICBjb25zdCBbZnVuY3Rpb25SZXN1bHRzLCBjb21wdXRlclJlc3VsdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucywgcnVubmVyLCBzdGF0ZSksXG4gICAgICAgIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgXSk7XG4gICAgbmV3SXRlbXMgPSBuZXdJdGVtcy5jb25jYXQoZnVuY3Rpb25SZXN1bHRzLm1hcCgocikgPT4gci5ydW5JdGVtKSk7XG4gICAgLy8gQWRkIGluamVjdGVkIG1lc3NhZ2UgaXRlbXMgZm9yIHRvb2xzIHRoYXQgcmV0dXJuZWQgbWVzc2FnZSBvYmplY3RzXG4gICAgZm9yIChjb25zdCBmdW5jdGlvblJlc3VsdCBvZiBmdW5jdGlvblJlc3VsdHMpIHtcbiAgICAgICAgaWYgKGZ1bmN0aW9uUmVzdWx0LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnICYmXG4gICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5vdXRwdXQgJiZcbiAgICAgICAgICAgIHR5cGVvZiBmdW5jdGlvblJlc3VsdC5vdXRwdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5vdXRwdXQudHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGFkZCB0aGUgaW5qZWN0ZWQgbWVzc2FnZSBpdGVtXG4gICAgICAgICAgICBjb25zdCBpbmplY3RlZE1lc3NhZ2VJdGVtID0gbmV3IFJ1bkluamVjdGVkTWVzc2FnZUl0ZW0oZnVuY3Rpb25SZXN1bHQub3V0cHV0LCBhZ2VudCk7XG4gICAgICAgICAgICBuZXdJdGVtcy5wdXNoKGluamVjdGVkTWVzc2FnZUl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5ld0l0ZW1zID0gbmV3SXRlbXMuY29uY2F0KGNvbXB1dGVyUmVzdWx0cyk7XG4gICAgLy8gcnVuIGhvc3RlZCBNQ1AgYXBwcm92YWwgcmVxdWVzdHNcbiAgICBpZiAocHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgYXBwcm92YWxSZXF1ZXN0IG9mIHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xEYXRhID0gYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2xcbiAgICAgICAgICAgICAgICAucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdERhdGEgPSBhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgIC5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICBpZiAodG9vbERhdGEub25fYXBwcm92YWwpIHtcbiAgICAgICAgICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGhhbmRsZSB0aGUgYXBwcm92YWwgcHJvY2VzcyBoZXJlXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXN1bHQgPSBhd2FpdCB0b29sRGF0YS5vbl9hcHByb3ZhbChzdGF0ZS5fY29udGV4dCwgYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92ZTogYXBwcm92YWxSZXN1bHQuYXBwcm92ZSxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogcmVxdWVzdERhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbjogYXBwcm92YWxSZXN1bHQucmVhc29uLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbmV3SXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbWNwX2FwcHJvdmFsX3Jlc3BvbnNlJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiBhcHByb3ZhbFJlc3BvbnNlRGF0YSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcmVjZWl2ZSBhIHVzZXIncyBhcHByb3ZhbCBvbiB0aGUgbmV4dCB0dXJuXG4gICAgICAgICAgICAgICAgbmV3SXRlbXMucHVzaChhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF9tY3BfdG9vbF9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sLFxuICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXF1ZXN0RGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3REYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiByZXF1ZXN0RGF0YS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHJlcXVlc3REYXRhLFxuICAgICAgICAgICAgICAgICAgICB9LCBhZ2VudCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdHMucHVzaChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIC8vIG5ld0l0ZW1zLnB1c2goYXBwcm92YWxJdGVtLnJ1bkl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIHByb2Nlc3MgaGFuZG9mZnNcbiAgICBpZiAocHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZUhhbmRvZmZDYWxscyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KTtcbiAgICB9XG4gICAgY29uc3QgY2hlY2tUb29sT3V0cHV0ID0gYXdhaXQgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgZnVuY3Rpb25SZXN1bHRzLCBzdGF0ZSk7XG4gICAgaWYgKGNoZWNrVG9vbE91dHB1dC5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgIG91dHB1dDogY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hlY2tUb29sT3V0cHV0LmlzSW50ZXJydXB0ZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0aW9uczogY2hlY2tUb29sT3V0cHV0LmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gY2hlY2sgaWYgdGhlIGFnZW50IHByb2R1Y2VkIGFueSBtZXNzYWdlc1xuICAgIGNvbnN0IG1lc3NhZ2VJdGVtcyA9IG5ld0l0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKTtcbiAgICAvLyB3ZSB3aWxsIHVzZSB0aGUgbGFzdCBjb250ZW50IG91dHB1dCBhcyB0aGUgZmluYWwgb3V0cHV0XG4gICAgY29uc3QgcG90ZW50aWFsRmluYWxPdXRwdXQgPSBtZXNzYWdlSXRlbXMubGVuZ3RoID4gMFxuICAgICAgICA/IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UobWVzc2FnZUl0ZW1zW21lc3NhZ2VJdGVtcy5sZW5ndGggLSAxXS5yYXdJdGVtKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyBvdXRwdXQgd2UganVzdCBydW4gYWdhaW5cbiAgICBpZiAoIXBvdGVudGlhbEZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIGlmIChhZ2VudC5vdXRwdXRUeXBlID09PSAndGV4dCcgJiZcbiAgICAgICAgIXByb2Nlc3NlZFJlc3BvbnNlLmhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiBwb3RlbnRpYWxGaW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFnZW50Lm91dHB1dFR5cGUgIT09ICd0ZXh0JyAmJiBwb3RlbnRpYWxGaW5hbE91dHB1dCkge1xuICAgICAgICAvLyBTdHJ1Y3R1cmVkIG91dHB1dCBzY2hlbWEgPT4gYWx3YXlzIGxlYWRzIHRvIGEgZmluYWwgb3V0cHV0IGlmIHdlIGhhdmUgdGV4dFxuICAgICAgICBjb25zdCB7IHBhcnNlciB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShhZ2VudC5vdXRwdXRUeXBlLCAnZmluYWxfb3V0cHV0Jyk7XG4gICAgICAgIGNvbnN0IFtlcnJvcl0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBwYXJzZXIocG90ZW50aWFsRmluYWxPdXRwdXQpKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIG91dHB1dCB0eXBlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgb3V0cHV0IHR5cGUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLCBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0IH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sQ2FsbCwgb3V0cHV0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGV4dDogdG9TbWFydFN0cmluZyhvdXRwdXQpLFxuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCB0b29sUnVucywgcnVubmVyLCBzdGF0ZSkge1xuICAgIGFzeW5jIGZ1bmN0aW9uIHJ1blNpbmdsZVRvb2wodG9vbFJ1bikge1xuICAgICAgICBsZXQgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0b29sUnVuLnRvb2wucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gdG9vbFJ1bi50b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbFJ1bi50b29sLm5lZWRzQXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xSdW4udG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xSdW4udG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVqZWN0ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYFRvb2wgZXhlY3V0aW9uIGZvciAke3Rvb2xSdW4udG9vbENhbGwuY2FsbElkfSB3YXMgbWFudWFsbHkgcmVqZWN0ZWQgYnkgdXNlci5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCByZXNwb25zZSksIGFnZW50LCByZXNwb25zZSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgYXBwcm92YWwgcHJvY2VzcyBuZWVkcyB0byBiZSBkb25lIGluIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xSdW4udG9vbENhbGwsIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5pbnB1dCA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2xSdW4udG9vbC5pbnZva2Uoc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdG9vbCByZXR1cm5lZCBhIGZ1bGwgTWVzc2FnZUl0ZW0sIGluamVjdCBpdCBkaXJlY3RseSBpbnRvIHRoZSBydW4gaGlzdG9yeVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGRhdGEgZm9yIHRyYWNpbmcgYW5kIGV2ZW50IGVtaXR0ZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gJ01lc3NhZ2Ugd2l0aCByaWNoIGNvbnRlbnQgaW5qZWN0ZWQgaW50byBjb252ZXJzYXRpb24nO1xuICAgICAgICAgICAgICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xSdW4udG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsIH0pO1xuICAgICAgICAgICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSBzdHJpbmdSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIGEgcHJvcGVyIHRvb2wgY2FsbCByZXNwb25zZSB0byBzYXRpc2Z5IE9wZW5BSSBBUEkgcmVxdWlyZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBtZXNzYWdlIGluamVjdGlvbiB3aWxsIGJlIGhhbmRsZWQgaW4gdGhlIHByb2Nlc3NpbmcgbG9naWNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXN1bHQsIC8vIEtlZXAgdGhlIG9yaWdpbmFsIG1lc3NhZ2Ugb2JqZWN0IGZvciBwcm9jZXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCBzdHJpbmdSZXN1bHQpLCBhZ2VudCwgcmVzdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBkYXRhIGZvciB0cmFjaW5nIGFuZCBldmVudCBlbWl0dGVyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHJlc3VsdCksIGFnZW50LCByZXN1bHQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0b29sUnVucy5tYXAocnVuU2luZ2xlVG9vbCkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRvb2xDYWxsRXJyb3IoYEZhaWxlZCB0byBydW4gZnVuY3Rpb24gdG9vbHM6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gSW50ZXJuYWwgaGVscGVyOiBkaXNwYXRjaCBhIGNvbXB1dGVyIGFjdGlvbiBhbmQgcmV0dXJuIGEgc2NyZWVuc2hvdCAoc3luYy9hc3luYylcbmFzeW5jIGZ1bmN0aW9uIF9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QoY29tcHV0ZXIsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgYWN0aW9uID0gdG9vbENhbGwuYWN0aW9uO1xuICAgIGxldCBzY3JlZW5zaG90O1xuICAgIC8vIERpc3BhdGNoIGJhc2VkIG9uIGFjdGlvbiB0eXBlIHN0cmluZyAoYXNzdW1lIGFjdGlvbi50eXBlIGV4aXN0cylcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSwgYWN0aW9uLmJ1dHRvbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG91YmxlX2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmRvdWJsZUNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZHJhZyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kcmFnKGFjdGlvbi5wYXRoLm1hcCgocCkgPT4gW3AueCwgcC55XSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2tleXByZXNzJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmtleXByZXNzKGFjdGlvbi5rZXlzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3ZlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLm1vdmUoYWN0aW9uLngsIGFjdGlvbi55KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JlZW5zaG90JzpcbiAgICAgICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2Nyb2xsJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnNjcm9sbChhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5zY3JvbGxfeCwgYWN0aW9uLnNjcm9sbF95KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnR5cGUoYWN0aW9uLnRleHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3dhaXQnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIud2FpdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBhY3Rpb247IC8vIGVuc3VyZXMgdGhhdCB3ZSBoYW5kbGUgZXZlcnkgYWN0aW9uIHdlIGtub3cgb2ZcbiAgICAgICAgICAgIC8vIFVua25vd24gYWN0aW9uLCBqdXN0IHRha2Ugc2NyZWVuc2hvdFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbnNob3Q7XG4gICAgfVxuICAgIC8vIEFsd2F5cyByZXR1cm4gc2NyZWVuc2hvdCBhcyBiYXNlNjQgc3RyaW5nXG4gICAgaWYgKHR5cGVvZiBjb21wdXRlci5zY3JlZW5zaG90ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignQ29tcHV0ZXIgZG9lcyBub3QgaW1wbGVtZW50IHNjcmVlbnNob3QoKScpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIGFjdGlvbnMsIHJ1bm5lciwgcnVuQ29udGV4dCwgY3VzdG9tTG9nZ2VyID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgX2xvZ2dlciA9IGN1c3RvbUxvZ2dlciA/PyBsb2dnZXI7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29tcHV0ZXIgPSBhY3Rpb24uY29tcHV0ZXIuY29tcHV0ZXI7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsID0gYWN0aW9uLnRvb2xDYWxsO1xuICAgICAgICAvLyBIb29rczogb25fdG9vbF9zdGFydCAoZ2xvYmFsICsgYWdlbnQpXG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUnVuIHRoZSBhY3Rpb24gYW5kIGdldCBzY3JlZW5zaG90XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgY29tcHV0ZXIgYWN0aW9uOicsIGVycik7XG4gICAgICAgICAgICBvdXRwdXQgPSAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBIb29rczogb25fdG9vbF9lbmQgKGdsb2JhbCArIGFnZW50KVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCBvdXRwdXQsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0LCB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgcmV0dXJuIGEgc2NyZWVuc2hvdCBhcyBhIGJhc2U2NCBkYXRhIFVSTFxuICAgICAgICBjb25zdCBpbWFnZVVybCA9IG91dHB1dCA/IGBkYXRhOmltYWdlL3BuZztiYXNlNjQsJHtvdXRwdXR9YCA6ICcnO1xuICAgICAgICBjb25zdCByYXdJdGVtID0ge1xuICAgICAgICAgICAgdHlwZTogJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgb3V0cHV0OiB7IHR5cGU6ICdjb21wdXRlcl9zY3JlZW5zaG90JywgZGF0YTogaW1hZ2VVcmwgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIGltYWdlVXJsKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcnVuSGFuZG9mZnMsIHJ1bm5lciwgcnVuQ29udGV4dCkge1xuICAgIG5ld1N0ZXBJdGVtcyA9IFsuLi5uZXdTdGVwSXRlbXNdO1xuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0luY29ycmVjdGx5IGNhbGxlZCBleGVjdXRlSGFuZG9mZkNhbGxzIHdpdGggbm8gaGFuZG9mZnMuIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4uIE1vdmluZyBvbi4nKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIG11bHRpcGxlIGhhbmRvZmZzLiBJZ25vcmluZyBhbGwgYnV0IHRoZSBmaXJzdCBvbmUgYnkgYWRkaW5nIHJlamVjdCByZXNwb25zZXMgZm9yIHRob3NlXG4gICAgICAgIGNvbnN0IG91dHB1dE1lc3NhZ2UgPSAnTXVsdGlwbGUgaGFuZG9mZnMgZGV0ZWN0ZWQsIGlnbm9yaW5nIHRoaXMgb25lLic7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcnVuSGFuZG9mZnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5ld1N0ZXBJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHJ1bkhhbmRvZmZzW2ldLnRvb2xDYWxsLCBvdXRwdXRNZXNzYWdlKSwgYWdlbnQsIG91dHB1dE1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3R1YWxIYW5kb2ZmID0gcnVuSGFuZG9mZnNbMF07XG4gICAgcmV0dXJuIHdpdGhIYW5kb2ZmU3Bhbihhc3luYyAoaGFuZG9mZlNwYW4pID0+IHtcbiAgICAgICAgY29uc3QgaGFuZG9mZiA9IGFjdHVhbEhhbmRvZmYuaGFuZG9mZjtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSBhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZihydW5Db250ZXh0LCBhY3R1YWxIYW5kb2ZmLnRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgIGhhbmRvZmZTcGFuLnNwYW5EYXRhLnRvX2FnZW50ID0gbmV3QWdlbnQubmFtZTtcbiAgICAgICAgaWYgKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZEFnZW50cyA9IHJ1bkhhbmRvZmZzLm1hcCgoaCkgPT4gaC5oYW5kb2ZmLmFnZW50TmFtZSk7XG4gICAgICAgICAgICBoYW5kb2ZmU3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ011bHRpcGxlIGhhbmRvZmZzIHJlcXVlc3RlZCcsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRfYWdlbnRzOiByZXF1ZXN0ZWRBZ2VudHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG5ld1N0ZXBJdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0oYWN0dWFsSGFuZG9mZi50b29sQ2FsbCwgZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KSksIGFnZW50LCBuZXdBZ2VudCkpO1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHJ1bkNvbnRleHQsIGFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIGNvbnN0IGlucHV0RmlsdGVyID0gaGFuZG9mZi5pbnB1dEZpbHRlciA/PyBydW5uZXIuY29uZmlnLmhhbmRvZmZJbnB1dEZpbHRlcjtcbiAgICAgICAgaWYgKGlucHV0RmlsdGVyKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0ZpbHRlcmluZyBpbnB1dHMgZm9yIGhhbmRvZmYnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXRGaWx0ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBoYW5kb2ZmU3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGlucHV0IGZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6ICdub3QgY2FsbGFibGUnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGFuZG9mZklucHV0RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBpbnB1dEhpc3Rvcnk6IEFycmF5LmlzQXJyYXkob3JpZ2luYWxJbnB1dClcbiAgICAgICAgICAgICAgICAgICAgPyBbLi4ub3JpZ2luYWxJbnB1dF1cbiAgICAgICAgICAgICAgICAgICAgOiBvcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIHByZUhhbmRvZmZJdGVtczogWy4uLnByZVN0ZXBJdGVtc10sXG4gICAgICAgICAgICAgICAgbmV3SXRlbXM6IFsuLi5uZXdTdGVwSXRlbXNdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gaW5wdXRGaWx0ZXIoaGFuZG9mZklucHV0RGF0YSk7XG4gICAgICAgICAgICBvcmlnaW5hbElucHV0ID0gZmlsdGVyZWQuaW5wdXRIaXN0b3J5O1xuICAgICAgICAgICAgcHJlU3RlcEl0ZW1zID0gZmlsdGVyZWQucHJlSGFuZG9mZkl0ZW1zO1xuICAgICAgICAgICAgbmV3U3RlcEl0ZW1zID0gZmlsdGVyZWQubmV3SXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLCBuZXdBZ2VudCB9KTtcbiAgICB9LCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGZyb21fYWdlbnQ6IGFnZW50Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5jb25zdCBOT1RfRklOQUxfT1VUUFVUID0ge1xuICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgdG9vbFJlc3VsdHMsIHN0YXRlKSB7XG4gICAgaWYgKHRvb2xSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgaW50ZXJydXB0aW9ucyA9IHRvb2xSZXN1bHRzXG4gICAgICAgIC5maWx0ZXIoKHIpID0+IHIucnVuSXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pXG4gICAgICAgIC5tYXAoKHIpID0+IHIucnVuSXRlbSk7XG4gICAgaWYgKGludGVycnVwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNGaW5hbE91dHB1dDogZmFsc2UsXG4gICAgICAgICAgICBpc0ludGVycnVwdGVkOiB0cnVlLFxuICAgICAgICAgICAgaW50ZXJydXB0aW9ucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3J1bl9sbG1fYWdhaW4nKSB7XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCBmaXJzdFRvb2xSZXN1bHQgPSB0b29sUmVzdWx0c1swXTtcbiAgICBpZiAoYWdlbnQudG9vbFVzZUJlaGF2aW9yID09PSAnc3RvcF9vbl9maXJzdF90b29sJykge1xuICAgICAgICBpZiAoZmlyc3RUb29sUmVzdWx0Py50eXBlID09PSAnZnVuY3Rpb25fb3V0cHV0Jykge1xuICAgICAgICAgICAgY29uc3Qgc3RyaW5nT3V0cHV0ID0gdG9TbWFydFN0cmluZyhmaXJzdFRvb2xSZXN1bHQub3V0cHV0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNGaW5hbE91dHB1dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZmluYWxPdXRwdXQ6IHN0cmluZ091dHB1dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IHRvb2xVc2VCZWhhdmlvciA9IGFnZW50LnRvb2xVc2VCZWhhdmlvcjtcbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29uc3Qgc3RvcHBpbmdUb29sID0gdG9vbFJlc3VsdHMuZmluZCgocikgPT4gdG9vbFVzZUJlaGF2aW9yLnN0b3BBdFRvb2xOYW1lcy5pbmNsdWRlcyhyLnRvb2wubmFtZSkpO1xuICAgICAgICBpZiAoc3RvcHBpbmdUb29sPy50eXBlID09PSAnZnVuY3Rpb25fb3V0cHV0Jykge1xuICAgICAgICAgICAgY29uc3Qgc3RyaW5nT3V0cHV0ID0gdG9TbWFydFN0cmluZyhzdG9wcGluZ1Rvb2wub3V0cHV0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNGaW5hbE91dHB1dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZmluYWxPdXRwdXQ6IHN0cmluZ091dHB1dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdG9vbFVzZUJlaGF2aW9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0b29sVXNlQmVoYXZpb3Ioc3RhdGUuX2NvbnRleHQsIHRvb2xSZXN1bHRzKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSW52YWxpZCB0b29sVXNlQmVoYXZpb3I6ICR7dG9vbFVzZUJlaGF2aW9yfWAsIHN0YXRlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCBzdGVwKSB7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHN0ZXAubmV3U3RlcEl0ZW1zKSB7XG4gICAgICAgIGxldCBpdGVtTmFtZTtcbiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSkge1xuICAgICAgICAgICAgaXRlbU5hbWUgPSAnbWVzc2FnZV9vdXRwdXRfY3JlYXRlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZDYWxsSXRlbSkge1xuICAgICAgICAgICAgaXRlbU5hbWUgPSAnaGFuZG9mZl9yZXF1ZXN0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmT3V0cHV0SXRlbSkge1xuICAgICAgICAgICAgaXRlbU5hbWUgPSAnaGFuZG9mZl9vY2N1cnJlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsSXRlbSkge1xuICAgICAgICAgICAgaXRlbU5hbWUgPSAndG9vbF9jYWxsZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3Rvb2xfb3V0cHV0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuUmVhc29uaW5nSXRlbSkge1xuICAgICAgICAgICAgaXRlbU5hbWUgPSAncmVhc29uaW5nX2l0ZW1fY3JlYXRlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdVbmtub3duIGl0ZW0gdHlwZTogJywgaXRlbSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkl0ZW1TdHJlYW1FdmVudChpdGVtTmFtZSwgaXRlbSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBZ2VudFRvb2xVc2VUcmFja2VyIHtcbiAgICAjYWdlbnRUb1Rvb2xzID0gbmV3IE1hcCgpO1xuICAgIGFkZFRvb2xVc2UoYWdlbnQsIHRvb2xOYW1lcykge1xuICAgICAgICB0aGlzLiNhZ2VudFRvVG9vbHMuc2V0KGFnZW50LCB0b29sTmFtZXMpO1xuICAgIH1cbiAgICBoYXNVc2VkVG9vbHMoYWdlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FnZW50VG9Ub29scy5oYXMoYWdlbnQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbSh0aGlzLiNhZ2VudFRvVG9vbHMuZW50cmllcygpKS5tYXAoKFthZ2VudCwgdG9vbE5hbWVzXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFthZ2VudC5uYW1lLCB0b29sTmFtZXNdO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuSW1wbGVtZW50YXRpb24ubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG5pbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5IYW5kb2ZmQ2FsbEl0ZW0sIFJ1bkhhbmRvZmZPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBBZ2VudFRvb2xVc2VUcmFja2VyLCBuZXh0U3RlcFNjaGVtYSwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IFN5c3RlbUVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBoYW5kb2ZmIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbi8qKlxuICogVGhlIHNjaGVtYSB2ZXJzaW9uIG9mIHRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJpYWxpemVkXG4gKiBydW4gc3RhdGUgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIFNESy5cbiAqIElmIGFueXRoaW5nIGluIHRoaXMgc2NoZW1hIGNoYW5nZXMsIHRoZSB2ZXJzaW9uIHdpbGwgaGF2ZSB0byBiZSBpbmNyZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04gPSAnMS4wJztcbmNvbnN0ICRzY2hlbWFWZXJzaW9uID0gei5saXRlcmFsKENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pO1xuY29uc3Qgc2VyaWFsaXplZEFnZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRTcGFuQmFzZSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2Uuc3BhbicpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHRyYWNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcmVudF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHN0YXJ0ZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlbmRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVycm9yOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHNwYW5fZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IFNlcmlhbGl6ZWRTcGFuID0gc2VyaWFsaXplZFNwYW5CYXNlLmV4dGVuZCh7XG4gICAgcHJldmlvdXNfc3Bhbjogei5sYXp5KCgpID0+IFNlcmlhbGl6ZWRTcGFuKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCB1c2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICByZXF1ZXN0czogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG59KTtcbmNvbnN0IG1vZGVsUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXNhZ2U6IHVzYWdlU2NoZW1hLFxuICAgIG91dHB1dDogei5hcnJheShwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0pLFxuICAgIHJlc3BvbnNlSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IGl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZV9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5Bc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9jYWxsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuVG9vbENhbGxJdGVtLm9yKHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZ19pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlJlYXNvbmluZ0l0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hhbmRvZmZfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICAgICAgc291cmNlQWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgdGFyZ2V0QWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9hcHByb3ZhbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0ub3IocHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbl0pO1xuY29uc3Qgc2VyaWFsaXplZFRyYWNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG9iamVjdDogei5saXRlcmFsKCd0cmFjZScpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHdvcmtmbG93X25hbWU6IHouc3RyaW5nKCksXG4gICAgZ3JvdXBfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBuZXdJdGVtczogei5hcnJheShpdGVtU2NoZW1hKSxcbiAgICB0b29sc1VzZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgaGFuZG9mZnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgaGFuZG9mZjogei5hbnkoKSxcbiAgICB9KSksXG4gICAgZnVuY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIHRvb2w6IHouYW55KCksXG4gICAgfSkpLFxuICAgIGNvbXB1dGVyQWN0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBjb21wdXRlcjogei5hbnkoKSxcbiAgICB9KSksXG4gICAgbWNwQXBwcm92YWxSZXF1ZXN0czogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICByZXF1ZXN0SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgLy8gcHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtXG4gICAgICAgICAgICByYXdJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgICAgICAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFsd2F5cyBleGlzdHMgYnV0IG1hcmtlZCBhcyBvcHRpb25hbCBmb3IgZWFybHkgdmVyc2lvbiBjb21wYXRpYmlsaXR5OyB3aGVuIHJlbGVhc2luZyAxLjAsIHdlIGNhbiByZW1vdmUgdGhlIG51bGxhYmxlIGFuZCBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBIb3N0ZWRNQ1BUb29sXG4gICAgICAgIG1jcFRvb2w6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2wnKSxcbiAgICAgICAgICAgIG5hbWU6IHoubGl0ZXJhbCgnaG9zdGVkX21jcCcpLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgfSksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0cmlwd2lyZVRyaWdnZXJlZDogei5ib29sZWFuKCksXG4gICAgb3V0cHV0SW5mbzogei5hbnkoKSxcbn0pO1xuY29uc3QgaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgYWdlbnRPdXRwdXQ6IHouYW55KCksXG4gICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgU2VyaWFsaXplZFJ1blN0YXRlID0gei5vYmplY3Qoe1xuICAgICRzY2hlbWFWZXJzaW9uLFxuICAgIGN1cnJlbnRUdXJuOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG9yaWdpbmFsSW5wdXQ6IHouc3RyaW5nKCkub3Ioei5hcnJheShwcm90b2NvbC5Nb2RlbEl0ZW0pKSxcbiAgICBtb2RlbFJlc3BvbnNlczogei5hcnJheShtb2RlbFJlc3BvbnNlU2NoZW1hKSxcbiAgICBjb250ZXh0OiB6Lm9iamVjdCh7XG4gICAgICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICAgICAgYXBwcm92YWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm9iamVjdCh7XG4gICAgICAgICAgICBhcHByb3ZlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgICAgICByZWplY3RlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGV4dDogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG4gICAgdG9vbFVzZVRyYWNrZXI6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLFxuICAgIG1heFR1cm5zOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudFNwYW46IFNlcmlhbGl6ZWRTcGFuLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBub0FjdGl2ZUFnZW50UnVuOiB6LmJvb2xlYW4oKSxcbiAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkoaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkob3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBjdXJyZW50U3RlcDogbmV4dFN0ZXBTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBsYXN0TW9kZWxSZXNwb25zZTogbW9kZWxSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGdlbmVyYXRlZEl0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgdHJhY2U6IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYS5udWxsYWJsZSgpLFxufSk7XG4vKipcbiAqIFNlcmlhbGl6YWJsZSBzbmFwc2hvdCBvZiBhbiBhZ2VudCdzIHJ1biwgaW5jbHVkaW5nIGNvbnRleHQsIHVzYWdlIGFuZCB0cmFjZS5cbiAqIFdoaWxlIHRoaXMgY2xhc3MgaGFzIHB1YmxpY2x5IHdyaXRhYmxlIHByb3BlcnRpZXMgKHByZWZpeGVkIHdpdGggYF9gKSwgdGhleSBhcmUgbm90IG1lYW50IHRvIGJlXG4gKiB1c2VkIGRpcmVjdGx5LiBUbyByZWFkIHRoZXNlIHByb3BlcnRpZXMsIHVzZSB0aGUgYFJ1blJlc3VsdGAgaW5zdGVhZC5cbiAqXG4gKiBNYW5pcHVsYXRpb24gb2YgdGhlIHN0YXRlIGRpcmVjdGx5IGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIHNob3VsZCBiZSBhdm9pZGVkLlxuICogSW5zdGVhZCwgdXNlIHRoZSBgYXBwcm92ZWAgYW5kIGByZWplY3RgIG1ldGhvZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5TdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0dXJuIG51bWJlciBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IGN1cnJlbnRseSBoYW5kbGluZyB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnQ7XG4gICAgLyoqXG4gICAgICogT3JpZ2luYWwgdXNlciBpbnB1dCBwcmlvciB0byBhbnkgcHJvY2Vzc2luZy5cbiAgICAgKi9cbiAgICBfb3JpZ2luYWxJbnB1dDtcbiAgICAvKipcbiAgICAgKiBSZXNwb25zZXMgZnJvbSB0aGUgbW9kZWwgc28gZmFyLlxuICAgICAqL1xuICAgIF9tb2RlbFJlc3BvbnNlcztcbiAgICAvKipcbiAgICAgKiBBY3RpdmUgdHJhY2luZyBzcGFuIGZvciB0aGUgY3VycmVudCBhZ2VudCBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudFNwYW47XG4gICAgLyoqXG4gICAgICogUnVuIGNvbnRleHQgdHJhY2tpbmcgYXBwcm92YWxzLCB1c2FnZSwgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIF9jb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGF0IHRvb2xzIGVhY2ggYWdlbnQgaGFzIHVzZWQuXG4gICAgICovXG4gICAgX3Rvb2xVc2VUcmFja2VyO1xuICAgIC8qKlxuICAgICAqIEl0ZW1zIGdlbmVyYXRlZCBieSB0aGUgYWdlbnQgZHVyaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgX2dlbmVyYXRlZEl0ZW1zO1xuICAgIC8qKlxuICAgICAqIE1heGltdW0gYWxsb3dlZCB0dXJucyBiZWZvcmUgZm9yY2luZyB0ZXJtaW5hdGlvbi5cbiAgICAgKi9cbiAgICBfbWF4VHVybnM7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcnVuIGhhcyBhbiBhY3RpdmUgYWdlbnQgc3RlcCBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBfbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgLyoqXG4gICAgICogTGFzdCBtb2RlbCByZXNwb25zZSBmb3IgdGhlIHByZXZpb3VzIHR1cm4uXG4gICAgICovXG4gICAgX2xhc3RUdXJuUmVzcG9uc2U7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIGlucHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBOZXh0IHN0ZXAgY29tcHV0ZWQgZm9yIHRoZSBhZ2VudCB0byB0YWtlLlxuICAgICAqL1xuICAgIF9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBQYXJzZWQgbW9kZWwgcmVzcG9uc2UgYWZ0ZXIgYXBwbHlpbmcgZ3VhcmRyYWlscyBhbmQgdG9vbHMuXG4gICAgICovXG4gICAgX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBUcmFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBydW4gaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF90cmFjZSA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgb3JpZ2luYWxJbnB1dCwgc3RhcnRpbmdBZ2VudCwgbWF4VHVybnMpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX29yaWdpbmFsSW5wdXQgPSBzdHJ1Y3R1cmVkQ2xvbmUob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgIHRoaXMuX21vZGVsUmVzcG9uc2VzID0gW107XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudCA9IHN0YXJ0aW5nQWdlbnQ7XG4gICAgICAgIHRoaXMuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgdGhpcy5fZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbWF4VHVybnMgPSBtYXhUdXJucztcbiAgICAgICAgdGhpcy5faW5wdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fdHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgaW50ZXJydXB0aW9ucyBpZiB0aGUgY3VycmVudCBzdGVwIGlzIGFuIGludGVycnVwdGlvbiBvdGhlcndpc2UgcmV0dXJucyBhbiBlbXB0eSBhcnJheS5cbiAgICAgKi9cbiAgICBnZXRJbnRlcnJ1cHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmVzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIGFwcHJvdmUgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgYXBwcm92ZSB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c0FwcHJvdmVgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgYXBwcm92YWwuXG4gICAgICovXG4gICAgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3RzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIHJlamVjdCB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSByZWplY3QgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNSZWplY3RgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSByZWplY3Rpb24uXG4gICAgICovXG4gICAgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICAkc2NoZW1hVmVyc2lvbjogQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTixcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuOiB0aGlzLl9jdXJyZW50VHVybixcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQ6IHRoaXMuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICBtb2RlbFJlc3BvbnNlczogdGhpcy5fbW9kZWxSZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0czogcmVzcG9uc2UudXNhZ2UucmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiByZXNwb25zZS51c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuX2NvbnRleHQudG9KU09OKCksXG4gICAgICAgICAgICB0b29sVXNlVHJhY2tlcjogdGhpcy5fdG9vbFVzZVRyYWNrZXIudG9KU09OKCksXG4gICAgICAgICAgICBtYXhUdXJuczogdGhpcy5fbWF4VHVybnMsXG4gICAgICAgICAgICBjdXJyZW50QWdlbnRTcGFuOiB0aGlzLl9jdXJyZW50QWdlbnRTcGFuPy50b0pTT04oKSxcbiAgICAgICAgICAgIG5vQWN0aXZlQWdlbnRSdW46IHRoaXMuX25vQWN0aXZlQWdlbnRSdW4sXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHIuYWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBjdXJyZW50U3RlcDogdGhpcy5fY3VycmVudFN0ZXAsXG4gICAgICAgICAgICBsYXN0TW9kZWxSZXNwb25zZTogdGhpcy5fbGFzdFR1cm5SZXNwb25zZSxcbiAgICAgICAgICAgIGdlbmVyYXRlZEl0ZW1zOiB0aGlzLl9nZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udG9KU09OKCkpLFxuICAgICAgICAgICAgbGFzdFByb2Nlc3NlZFJlc3BvbnNlOiB0aGlzLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsXG4gICAgICAgICAgICB0cmFjZTogdGhpcy5fdHJhY2UgPyB0aGlzLl90cmFjZS50b0pTT04oKSA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIC8vIHBhcnNpbmcgdGhlIHNjaGVtYSB0byBlbnN1cmUgdGhlIG91dHB1dCBpcyB2YWxpZCBmb3IgcmVwYXJzaW5nXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IFNlcmlhbGl6ZWRSdW5TdGF0ZS5zYWZlUGFyc2Uob3V0cHV0KTtcbiAgICAgICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN5c3RlbUVycm9yKGBGYWlsZWQgdG8gc2VyaWFsaXplIHJ1biBzdGF0ZS4gJHtwYXJzZWQuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHJ1biBzdGF0ZSB0byBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlc3VtZSB0aGUgcnVuIGxhdGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHNlcmlhbGl6ZWQgcnVuIHN0YXRlLlxuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc2VyaWFsaXplcyBhIHJ1biBzdGF0ZSBmcm9tIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBkZXNlcmlhbGl6ZSBhIHJ1biBzdGF0ZSBmcm9tIGEgc3RyaW5nIHRoYXQgd2FzIHNlcmlhbGl6ZWQgdXNpbmcgdGhlXG4gICAgICogYHRvU3RyaW5nYCBtZXRob2QuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21TdHJpbmcoaW5pdGlhbEFnZW50LCBzdHIpIHtcbiAgICAgICAgY29uc3QgW3BhcnNpbmdFcnJvciwganNvblJlc3VsdF0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBKU09OLnBhcnNlKHN0cikpO1xuICAgICAgICBpZiAocGFyc2luZ0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBGYWlsZWQgdG8gcGFyc2UgcnVuIHN0YXRlLiAke3BhcnNpbmdFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcGFyc2luZ0Vycm9yLm1lc3NhZ2UgOiBTdHJpbmcocGFyc2luZ0Vycm9yKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50U2NoZW1hVmVyc2lvbiA9IGpzb25SZXN1bHQuJHNjaGVtYVZlcnNpb247XG4gICAgICAgIGlmICghY3VycmVudFNjaGVtYVZlcnNpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1J1biBzdGF0ZSBpcyBtaXNzaW5nIHNjaGVtYSB2ZXJzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRTY2hlbWFWZXJzaW9uICE9PSBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBSdW4gc3RhdGUgc2NoZW1hIHZlcnNpb24gJHtjdXJyZW50U2NoZW1hVmVyc2lvbn0gaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIHVzZSB2ZXJzaW9uICR7Q1VSUkVOVF9TQ0hFTUFfVkVSU0lPTn1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZUpzb24gPSBTZXJpYWxpemVkUnVuU3RhdGUucGFyc2UoSlNPTi5wYXJzZShzdHIpKTtcbiAgICAgICAgY29uc3QgYWdlbnRNYXAgPSBidWlsZEFnZW50TWFwKGluaXRpYWxBZ2VudCk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIFJlYnVpbGQgdGhlIGNvbnRleHRcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHN0YXRlSnNvbi5jb250ZXh0LmNvbnRleHQpO1xuICAgICAgICBjb250ZXh0Ll9yZWJ1aWxkQXBwcm92YWxzKHN0YXRlSnNvbi5jb250ZXh0LmFwcHJvdmFscyk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgYWdlbnQgZnJvbSB0aGUgaW5pdGlhbCBhZ2VudFxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRBZ2VudC5uYW1lKTtcbiAgICAgICAgaWYgKCFjdXJyZW50QWdlbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEFnZW50ICR7c3RhdGVKc29uLmN1cnJlbnRBZ2VudC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZSA9IG5ldyBSdW5TdGF0ZShjb250ZXh0LCAnJywgY3VycmVudEFnZW50LCBzdGF0ZUpzb24ubWF4VHVybnMpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4gPSBzdGF0ZUpzb24uY3VycmVudFR1cm47XG4gICAgICAgIC8vIHJlYnVpbGQgdG9vbCB1c2UgdHJhY2tlclxuICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIgPSBuZXcgQWdlbnRUb29sVXNlVHJhY2tlcigpO1xuICAgICAgICBmb3IgKGNvbnN0IFthZ2VudE5hbWUsIHRvb2xOYW1lc10gb2YgT2JqZWN0LmVudHJpZXMoc3RhdGVKc29uLnRvb2xVc2VUcmFja2VyKSkge1xuICAgICAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoYWdlbnRNYXAuZ2V0KGFnZW50TmFtZSksIHRvb2xOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVidWlsZCBjdXJyZW50IGFnZW50IHNwYW5cbiAgICAgICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlSnNvbi50cmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUcmFjZSBpcyBub3Qgc2V0LCBza2lwcGluZyB0cmFjaW5nIHNldHVwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0cmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZSh7XG4gICAgICAgICAgICAgICAgdHJhY2VJZDogc3RhdGVKc29uLnRyYWNlPy5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBzdGF0ZUpzb24udHJhY2U/LndvcmtmbG93X25hbWUsXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogc3RhdGVKc29uLnRyYWNlPy5ncm91cF9pZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHN0YXRlSnNvbi50cmFjZT8ubWV0YWRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzdGF0ZUpzb24uY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICBzdGF0ZS5fdHJhY2UgPSB0cmFjZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHN0YXRlSnNvbi5ub0FjdGl2ZUFnZW50UnVuO1xuICAgICAgICBzdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzID1cbiAgICAgICAgICAgIHN0YXRlSnNvbi5pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgICAgIHN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gc3RhdGVKc29uLm91dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgIGFnZW50OiBhZ2VudE1hcC5nZXQoci5hZ2VudC5uYW1lKSxcbiAgICAgICAgfSkpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSBzdGF0ZUpzb24uY3VycmVudFN0ZXA7XG4gICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gc3RhdGVKc29uLm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHN0YXRlLl9tb2RlbFJlc3BvbnNlcyA9IHN0YXRlSnNvbi5tb2RlbFJlc3BvbnNlcy5tYXAoZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKTtcbiAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBzdGF0ZUpzb24ubGFzdE1vZGVsUmVzcG9uc2VcbiAgICAgICAgICAgID8gZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSBzdGF0ZUpzb24uZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKTtcbiAgICAgICAgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2VcbiAgICAgICAgICAgID8gYXdhaXQgZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2NvbnRleHQsIHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaGFuZG9mZicsXG4gICAgICAgICAgICAgICAgbmV3QWdlbnQ6IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudFN0ZXAubmV3QWdlbnQubmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpIHtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgcXVldWUgPSBbaW5pdGlhbEFnZW50XTtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAobWFwLmhhcyhjdXJyZW50QWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG1hcC5zZXQoY3VycmVudEFnZW50Lm5hbWUsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBjdXJyZW50QWdlbnQuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgIGlmIChoYW5kb2ZmIGluc3RhbmNlb2YgQWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRvZmYuYWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5hZ2VudC5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYuYWdlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4pIHtcbiAgICBjb25zdCBzcGFuRGF0YSA9IHNlcmlhbGl6ZWRTcGFuLnNwYW5fZGF0YTtcbiAgICBjb25zdCBwcmV2aW91c1NwYW4gPSBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuXG4gICAgICAgID8gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzcGFuID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICBzcGFuSWQ6IHNlcmlhbGl6ZWRTcGFuLmlkLFxuICAgICAgICB0cmFjZUlkOiBzZXJpYWxpemVkU3Bhbi50cmFjZV9pZCxcbiAgICAgICAgcGFyZW50SWQ6IHNlcmlhbGl6ZWRTcGFuLnBhcmVudF9pZCA/PyB1bmRlZmluZWQsXG4gICAgICAgIHN0YXJ0ZWRBdDogc2VyaWFsaXplZFNwYW4uc3RhcnRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGVuZGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLmVuZGVkX2F0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YTogc3BhbkRhdGEsXG4gICAgfSwgdHJhY2UpO1xuICAgIHNwYW4ucHJldmlvdXNTcGFuID0gcHJldmlvdXNTcGFuO1xuICAgIHJldHVybiBzcGFuO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzZXJpYWxpemVkTW9kZWxSZXNwb25zZSkge1xuICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKCk7XG4gICAgdXNhZ2UucmVxdWVzdHMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5yZXF1ZXN0cztcbiAgICB1c2FnZS5pbnB1dFRva2VucyA9IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zO1xuICAgIHVzYWdlLm91dHB1dFRva2VucyA9IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucztcbiAgICB1c2FnZS50b3RhbFRva2VucyA9IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlLnRvdGFsVG9rZW5zO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVzYWdlLFxuICAgICAgICBvdXRwdXQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHByb3RvY29sLk91dHB1dE1vZGVsSXRlbS5wYXJzZShpdGVtKSksXG4gICAgICAgIHJlc3BvbnNlSWQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVJdGVtKHNlcmlhbGl6ZWRJdGVtLCBhZ2VudE1hcCkge1xuICAgIHN3aXRjaCAoc2VyaWFsaXplZEl0ZW0udHlwZSkge1xuICAgICAgICBjYXNlICdtZXNzYWdlX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0ub3V0cHV0KTtcbiAgICAgICAgY2FzZSAncmVhc29uaW5nX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZWFzb25pbmdJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uc291cmNlQWdlbnQubmFtZSksIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS50YXJnZXRBZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfYXBwcm92YWxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5hc3luYyBmdW5jdGlvbiBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBjdXJyZW50QWdlbnQsIGNvbnRleHQsIHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgY3VycmVudEFnZW50LmdldEFsbFRvb2xzKGNvbnRleHQpO1xuICAgIGNvbnN0IHRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnY29tcHV0ZXInKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGhhbmRvZmZzID0gbmV3IE1hcChjdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkgaW5zdGFuY2VvZiBBZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIFtlbnRyeS5uYW1lLCBoYW5kb2ZmKGVudHJ5KV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtlbnRyeS50b29sTmFtZSwgZW50cnldO1xuICAgIH0pKTtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIG5ld0l0ZW1zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKSxcbiAgICAgICAgdG9vbHNVc2VkOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkLFxuICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kb2Zmcy5oYXMoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEhhbmRvZmYgJHtoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogaGFuZG9mZi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2Zmcy5nZXQoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBmdW5jdGlvbnM6IGF3YWl0IFByb21pc2UuYWxsKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMubWFwKGFzeW5jIChmdW5jdGlvbkNhbGwpID0+IHtcbiAgICAgICAgICAgIGlmICghdG9vbHMuaGFzKGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVG9vbCAke2Z1bmN0aW9uQ2FsbC50b29sLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogZnVuY3Rpb25DYWxsLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xzLmdldChmdW5jdGlvbkNhbGwudG9vbC5uYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLm1hcCgoY29tcHV0ZXJBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gY29tcHV0ZXJBY3Rpb24uY29tcHV0ZXIubmFtZTtcbiAgICAgICAgICAgIGlmICghY29tcHV0ZXJUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQ29tcHV0ZXIgdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGNvbXB1dGVyQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGNvbXB1dGVyOiBjb21wdXRlclRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzID8/IFtdKS5tYXAoKGFwcHJvdmFsUmVxdWVzdCkgPT4gKHtcbiAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbShhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW1cbiAgICAgICAgICAgICAgICAucmF3SXRlbSwgY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgIG1jcFRvb2w6IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sLFxuICAgICAgICB9KSksXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0LmhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuZnVuY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQubWNwQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuU3RhdGUubWpzLm1hcCIsImltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBkZWZpbmVJbnB1dEd1YXJkcmFpbCwgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IGdldEhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5pbXBvcnQgeyBSdW5Ib29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXplVG9vbCwgc2VyaWFsaXplSGFuZG9mZiB9IGZyb20gXCIuL3V0aWxzL3NlcmlhbGl6ZS5tanNcIjtcbmltcG9ydCB7IEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yLCBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFVzZXJFcnJvciwgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBhZGRTdGVwVG9SdW5SZXN1bHQsIGV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMsIGV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzLCBtYXliZVJlc2V0VG9vbENob2ljZSwgcHJvY2Vzc01vZGVsUmVzcG9uc2UsIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBnZXRPckNyZWF0ZVRyYWNlLCByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWdlbnRTcGFuLCB3aXRoR3VhcmRyYWlsU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQsIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5pbXBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5jb25zdCBERUZBVUxUX01BWF9UVVJOUyA9IDEwO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYWNpbmcodHJhY2luZ0Rpc2FibGVkLCB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgaWYgKHRyYWNpbmdEaXNhYmxlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gJ2VuYWJsZWRfd2l0aG91dF9kYXRhJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXJuSW5wdXQob3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICBjb25zdCByYXdJdGVtcyA9IGdlbmVyYXRlZEl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpIC8vIGRvbid0IGluY2x1ZGUgYXBwcm92YWwgaXRlbXMgdG8gYXZvaWQgZG91YmxlIGZ1bmN0aW9uIGNhbGxzXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG4gICAgaWYgKHR5cGVvZiBvcmlnaW5hbElucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBvcmlnaW5hbElucHV0ID0gW3sgdHlwZTogJ21lc3NhZ2UnLCByb2xlOiAndXNlcicsIGNvbnRlbnQ6IG9yaWdpbmFsSW5wdXQgfV07XG4gICAgfVxuICAgIHJldHVybiBbLi4ub3JpZ2luYWxJbnB1dCwgLi4ucmF3SXRlbXNdO1xufVxuLyoqXG4gKiBBIFJ1bm5lciBpcyByZXNwb25zaWJsZSBmb3IgcnVubmluZyBhbiBhZ2VudCB3b3JrZmxvdy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5lciBleHRlbmRzIFJ1bkhvb2tzIHtcbiAgICBjb25maWc7XG4gICAgaW5wdXRHdWFyZHJhaWxEZWZzO1xuICAgIG91dHB1dEd1YXJkcmFpbERlZnM7XG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBtb2RlbFByb3ZpZGVyOiBjb25maWcubW9kZWxQcm92aWRlciA/PyBnZXREZWZhdWx0TW9kZWxQcm92aWRlcigpLFxuICAgICAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IGNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgaGFuZG9mZklucHV0RmlsdGVyOiBjb25maWcuaGFuZG9mZklucHV0RmlsdGVyLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxzOiBjb25maWcuaW5wdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsczogY29uZmlnLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICB0cmFjaW5nRGlzYWJsZWQ6IGNvbmZpZy50cmFjaW5nRGlzYWJsZWQgPz8gZmFsc2UsXG4gICAgICAgICAgICB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhOiBjb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSA/PyB0cnVlLFxuICAgICAgICAgICAgd29ya2Zsb3dOYW1lOiBjb25maWcud29ya2Zsb3dOYW1lID8/ICdBZ2VudCB3b3JrZmxvdycsXG4gICAgICAgICAgICB0cmFjZUlkOiBjb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIGdyb3VwSWQ6IGNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgdHJhY2VNZXRhZGF0YTogY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVJbnB1dEd1YXJkcmFpbCk7XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcyA9IChjb25maWcub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKHN0YXJ0aW5nQWdlbnQsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNhdmVkIHN0YXRlIHdlIHVzZSB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIHN0YXJ0aW5nQWdlbnQsIG9wdGlvbnMubWF4VHVybnMgPz8gREVGQVVMVF9NQVhfVFVSTlMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWwgPSBzZWxlY3RNb2RlbChzdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsLCB0aGlzLmNvbmZpZy5tb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGF3YWl0IHRoaXMuY29uZmlnLm1vZGVsUHJvdmlkZXIuZ2V0TW9kZWwobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudC5oYW5kb2Zmcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoaWxlIHRoaXMgYXJyYXkgdXN1YWxseSBtdXN0IG5vdCBiZSB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UndmUgYWRkZWQgdGhpcyBjaGVjayB0byBwcmV2ZW50IHVuZXhwZWN0ZWQgcnVudGltZSBlcnJvcnMgbGlrZSBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1hZ2VudHMtanMvaXNzdWVzLzEzOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzLnB1c2goLi4uc3RhdGUuX2N1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZOYW1lcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gaC5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gY3JlYXRlQWdlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IGhhbmRvZmZOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dF90eXBlOiBzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dFNjaGVtYU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihzdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b29scyA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoc3RhdGUuX2NvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiBzZXJpYWxpemVUb29sKHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zcGFuRGF0YS50b29scyA9IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA+IHN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXggdHVybnMgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogc3RhdGUuX21heFR1cm5zIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3N0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7c3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3N0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRUdXJuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IGdldFR1cm5JbnB1dChzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBhd2FpdCBtb2RlbC5nZXRSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb25zOiBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChzdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFByb21wdChzdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHR1cm5JbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2Uoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHRvb2xzLCBoYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQgPSBzdGF0ZS5fY3VycmVudFN0ZXAubmV3QWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJydXB0ZWQuIERvbid0IHJ1biBhbnkgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnIpIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBlbmQgdGhlIHNwYW4gaWYgdGhlIHJ1biB3YXMgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyAjcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5pbnB1dEd1YXJkcmFpbHMubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHN0YXRlLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJvbGwgYmFjayB0aGUgY3VycmVudCB0dXJuIHRvIGVuYWJsZSByZXJ1bnNcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIG91dHB1dCkge1xuICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dEd1YXJkcmFpbHMubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCkpO1xuICAgICAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBhZ2VudE91dHB1dCA9IHN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCk7XG4gICAgICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIGFnZW50T3V0cHV0LFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IHN0YXRlLl9jb250ZXh0LFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHsgbW9kZWxSZXNwb25zZTogc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnR3VhcmRyYWlsIHRyaXB3aXJlIHRyaWdnZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYE91dHB1dCBndWFyZHJhaWwgZmFpbGVkIHRvIGNvbXBsZXRlOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5TdHJlYW1Mb29wKHJlc3VsdCwgb3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMocmVzdWx0LnN0YXRlLl9jb250ZXh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVG9vbHMgPSB0b29scy5tYXAoKHQpID0+IHNlcmlhbGl6ZVRvb2wodCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPz8ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ05vIG1vZGVsIHJlc3BvbnNlIGZvdW5kIGluIHByZXZpb3VzIHN0YXRlJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cyhyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgc3RpbGwgaW4gYW4gaW50ZXJydXB0aW9uLCBzbyB3ZSBuZWVkIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmTmFtZXMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IGguYWdlbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IGhhbmRvZmZOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0X3R5cGU6IGN1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4ocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID4gcmVzdWx0LnN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01heCB0dXJucyBleGNlZWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHJlc3VsdC5zdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3Jlc3VsdC5zdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7Y3VycmVudEFnZW50Lm5hbWV9ICh0dXJuICR7cmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbCA9IHNlbGVjdE1vZGVsKGN1cnJlbnRBZ2VudC5tb2RlbCwgdGhpcy5jb25maWcubW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBhd2FpdCB0aGlzLmNvbmZpZy5tb2RlbFByb3ZpZGVyLmdldE1vZGVsKG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGVsU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuSW5wdXQgPSBnZXRUdXJuSW5wdXQocmVzdWx0LmlucHV0LCByZXN1bHQubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbFJlc3BvbnNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIG1vZGVsLmdldFN0cmVhbWVkUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb25zOiBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHJlc3VsdC5zdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRQcm9tcHQocmVzdWx0LnN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB0dXJuSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiBzZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKGN1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZC5wYXJzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5yZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB1c2VyJ3MgY29kZSBleGl0cyBhIGxvb3AgdG8gY29uc3VtZSB0aGUgc3RyZWFtLCB3ZSBuZWVkIHRvIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBsb29wIHRvIHByZXZlbnQgaW50ZXJuYWwgZmFsc2UgZXJyb3JzIGFuZCB1bm5lY2Vzc2FyeSBwcm9jZXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50KGV2ZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmluYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgZGlkIG5vdCBwcm9kdWNlIGEgZmluYWwgcmVzcG9uc2UhJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBmaW5hbFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX21vZGVsUmVzcG9uc2VzLnB1c2gocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzTW9kZWxSZXNwb25zZShyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIGN1cnJlbnRBZ2VudCwgdG9vbHMsIGhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzKGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGN1cnJlbnRBZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBkb25lIGZvciBub3cuIERvbid0IHJ1biBhbnkgb3V0cHV0IGd1YXJkcmFpbHNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwXG4gICAgICAgICAgICAgICAgICAgICAgICA/Lm5ld0FnZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50KHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZG9mZiwgc28gd2UgbmVlZCB0byBydW4gdGhlIGxvb3AgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUnVubmluZyBuZXh0IGxvb3AnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGluIGFnZW50IHJ1bicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxTdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8/IHt9O1xuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgb3IgcmV1c2UgZXhpc3Rpbmcgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIGFnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHN0cmVhbWVkIHJlc3VsdCB3aXRoIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyZWFtZWRSdW5SZXN1bHQoe1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHRzXG4gICAgICAgICAgICByZXN1bHQubWF4VHVybnMgPSBvcHRpb25zLm1heFR1cm5zID8/IHN0YXRlLl9tYXhUdXJucztcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBzdHJlYW0gbG9vcCB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICB0aGlzLiNydW5TdHJlYW1Mb29wKHJlc3VsdCwgb3B0aW9ucykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kb25lKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9yYWlzZUVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zID0ge1xuICAgICAgICBzdHJlYW06IGZhbHNlLFxuICAgICAgICBjb250ZXh0OiB1bmRlZmluZWQsXG4gICAgfSkge1xuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZSAmJiBpbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UoaW5wdXQuX3RyYWNlLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Ll9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKGlucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0T3JDcmVhdGVUcmFjZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxTdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMuY29uZmlnLnRyYWNlSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmNvbmZpZy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLmNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMuY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmxldCBfZGVmYXVsdFJ1bm5lciA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldERlZmF1bHRSdW5uZXIoKSB7XG4gICAgaWYgKF9kZWZhdWx0UnVubmVyKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdFJ1bm5lcjtcbiAgICB9XG4gICAgX2RlZmF1bHRSdW5uZXIgPSBuZXcgUnVubmVyKCk7XG4gICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE1vZGVsKGFnZW50TW9kZWwsIHJ1bkNvbmZpZ01vZGVsKSB7XG4gICAgLy8gV2hlbiBpbml0aWFsaXppbmcgYW4gYWdlbnQgd2l0aG91dCBtb2RlbCBuYW1lLCB0aGUgbW9kZWwgcHJvcGVydHkgaXMgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy4gU28sXG4gICAgLy8gKiBhZ2VudE1vZGVsID09PSAnJyAmIHJ1bkNvbmZpZ01vZGVsIGV4aXN0cywgcnVuQ29uZmlnTW9kZWwgd2lsbCBiZSB1c2VkXG4gICAgLy8gKiBhZ2VudE1vZGVsIGlzIHNldCwgdGhlIGFnZW50TW9kZWwgd2lsbCBiZSB1c2VkIG92ZXIgcnVuQ29uZmlnTW9kZWxcbiAgICBpZiAoKHR5cGVvZiBhZ2VudE1vZGVsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBhZ2VudE1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKSB8fFxuICAgICAgICBhZ2VudE1vZGVsIC8vIGFueSB0cnV0aHkgdmFsdWVcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIGFnZW50TW9kZWw7XG4gICAgfVxuICAgIHJldHVybiBydW5Db25maWdNb2RlbCA/PyBhZ2VudE1vZGVsID8/IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVI7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJ1bm5lciA9IGdldERlZmF1bHRSdW5uZXIoKTtcbiAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bi5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgdG9vbCwgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBERUZBVUxUX01PREVMX1BMQUNFSE9MREVSID0gJyc7XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgcHJvbXB0O1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBjb25maWcucHJvbXB0O1xuICAgICAgICB0aGlzLmhhbmRvZmZEZXNjcmlwdGlvbiA9IGNvbmZpZy5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZnMgPSBjb25maWcuaGFuZG9mZnMgPz8gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgPz8gJyc7XG4gICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IGNvbmZpZy5tb2RlbFNldHRpbmdzID8/IHt9O1xuICAgICAgICB0aGlzLnRvb2xzID0gY29uZmlnLnRvb2xzID8/IFtdO1xuICAgICAgICB0aGlzLm1jcFNlcnZlcnMgPSBjb25maWcubWNwU2VydmVycyA/PyBbXTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbHMgPSBjb25maWcuaW5wdXRHdWFyZHJhaWxzID8/IFtdO1xuICAgICAgICB0aGlzLm91dHB1dEd1YXJkcmFpbHMgPSBjb25maWcub3V0cHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgaWYgKGNvbmZpZy5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFR5cGUgPSBjb25maWcub3V0cHV0VHlwZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvb2xVc2VCZWhhdmlvciA9IGNvbmZpZy50b29sVXNlQmVoYXZpb3IgPz8gJ3J1bl9sbG1fYWdhaW4nO1xuICAgICAgICB0aGlzLnJlc2V0VG9vbENob2ljZSA9IGNvbmZpZy5yZXNldFRvb2xDaG9pY2UgPz8gdHJ1ZTtcbiAgICAgICAgLy8gLS0tIFJ1bnRpbWUgd2FybmluZyBmb3IgaGFuZG9mZiBvdXRwdXQgdHlwZSBjb21wYXRpYmlsaXR5IC0tLVxuICAgICAgICBpZiAoY29uZmlnLmhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY29uZmlnLmhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRvZmZzICYmIHRoaXMub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFR5cGVzID0gbmV3IFNldChbSlNPTi5zdHJpbmdpZnkodGhpcy5vdXRwdXRUeXBlKV0pO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaCBvZiB0aGlzLmhhbmRvZmZzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgnb3V0cHV0VHlwZScgaW4gaCAmJiBoLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGVzLmFkZChKU09OLnN0cmluZ2lmeShoLm91dHB1dFR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgnYWdlbnQnIGluIGggJiYgaC5hZ2VudC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5hZ2VudC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dFR5cGVzLnNpemUgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBbQWdlbnRdIFdhcm5pbmc6IEhhbmRvZmYgYWdlbnRzIGhhdmUgZGlmZmVyZW50IG91dHB1dCB0eXBlczogJHtBcnJheS5mcm9tKG91dHB1dFR5cGVzKS5qb2luKCcsICcpfS4gWW91IGNhbiBtYWtlIGl0IHR5cGUtc2FmZSBieSB1c2luZyBBZ2VudC5jcmVhdGUoeyAuLi4gfSkgbWV0aG9kIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE91dHB1dCBzY2hlbWEgbmFtZS5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0U2NoZW1hTmFtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnWm9kT3V0cHV0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgY29weSBvZiB0aGUgYWdlbnQsIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50cyBjaGFuZ2VkLiBGb3IgZXhhbXBsZSwgeW91IGNvdWxkIGRvOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogY29uc3QgbmV3QWdlbnQgPSBhZ2VudC5jbG9uZSh7IGluc3RydWN0aW9uczogJ05ldyBpbnN0cnVjdGlvbnMnIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gQSBwYXJ0aWFsIGNvbmZpZ3VyYXRpb24gdG8gY2hhbmdlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGFnZW50IHdpdGggdGhlIGdpdmVuIGNoYW5nZXMuXG4gICAgICovXG4gICAgY2xvbmUoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWdlbnQoe1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGlzIGFnZW50IGludG8gYSB0b29sLCBjYWxsYWJsZSBieSBvdGhlciBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIGhhbmRvZmZzIGluIHR3byB3YXlzOlxuICAgICAqIDEuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHJlY2VpdmVzIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50XG4gICAgICogICAgcmVjZWl2ZXMgZ2VuZXJhdGVkIGlucHV0LlxuICAgICAqIDIuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHRha2VzIG92ZXIgdGhlIGNvbnZlcnNhdGlvbi4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50IGlzXG4gICAgICogICAgY2FsbGVkIGFzIGEgdG9vbCwgYW5kIHRoZSBjb252ZXJzYXRpb24gaXMgY29udGludWVkIGJ5IHRoZSBvcmlnaW5hbCBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHRvb2wuXG4gICAgICogQHJldHVybnMgQSB0b29sIHRoYXQgcnVucyB0aGUgYWdlbnQgYW5kIHJldHVybnMgdGhlIG91dHB1dCB0ZXh0LlxuICAgICAqL1xuICAgIGFzVG9vbChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIHRvb2xEZXNjcmlwdGlvbiwgY3VzdG9tT3V0cHV0RXh0cmFjdG9yIH0gPSBvcHRpb25zO1xuICAgICAgICByZXR1cm4gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogWydpbnB1dCddLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0Py5jb250ZXh0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21PdXRwdXRFeHRyYWN0b3IocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldE91dHB1dFRleHQocmVzdWx0LnJhd1Jlc3BvbnNlc1tyZXN1bHQucmF3UmVzcG9uc2VzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLm1jcFNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEFsbE1jcFRvb2xzKHRoaXMubWNwU2VydmVycywgcnVuQ29udGV4dCwgdGhpcywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQUxsIGFnZW50IHRvb2xzLCBpbmNsdWRpbmcgdGhlIE1DUGwgYW5kIGZ1bmN0aW9uIHRvb2xzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYWxsIGNvbmZpZ3VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIHJldHVybiBbLi4uKGF3YWl0IHRoaXMuZ2V0TWNwVG9vbHMocnVuQ29udGV4dCkpLCAuLi50aGlzLnRvb2xzXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJzZWQgb3V0LlxuICAgICAqL1xuICAgIHByb2Nlc3NGaW5hbE91dHB1dChvdXRwdXQpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShvdXRwdXQpO1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRUeXBlLnBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBhZ2VudCwgd2hpY2ggaXMgc2VyaWFsaXphYmxlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSBhZ2VudCdzIG5hbWUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRUcmFjZVByb2Nlc3NvciB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9wcm9jZXNzb3IubWpzXCI7XG5leHBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuZXhwb3J0IHsgQWdlbnQsIH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5leHBvcnQgeyBBZ2VudHNFcnJvciwgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yLCBTeXN0ZW1FcnJvciwgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5leHBvcnQgeyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCwgUnVuUmF3TW9kZWxTdHJlYW1FdmVudCwgUnVuSXRlbVN0cmVhbUV2ZW50LCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmV4cG9ydCB7IGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5leHBvcnQgeyBnZXRIYW5kb2ZmLCBnZXRUcmFuc2Zlck1lc3NhZ2UsIEhhbmRvZmYsIGhhbmRvZmYsIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmV4cG9ydCB7IGFzc2lzdGFudCwgc3lzdGVtLCB1c2VyIH0gZnJvbSBcIi4vaGVscGVycy9tZXNzYWdlLm1qc1wiO1xuZXhwb3J0IHsgZXh0cmFjdEFsbFRleHRPdXRwdXQsIFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmV4cG9ydCB7IEFnZW50SG9va3MgfSBmcm9tIFwiLi9saWZlY3ljbGUubWpzXCI7XG5leHBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5leHBvcnQgeyBnZXRBbGxNY3BUb29scywgaW52YWxpZGF0ZVNlcnZlclRvb2xzQ2FjaGUsIE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgfSBmcm9tIFwiLi9tY3AubWpzXCI7XG5leHBvcnQgeyBjcmVhdGVNQ1BUb29sU3RhdGljRmlsdGVyLCB9IGZyb20gXCIuL21jcFV0aWwubWpzXCI7XG5leHBvcnQgeyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmV4cG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5leHBvcnQgeyBydW4sIFJ1bm5lciwgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5leHBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmV4cG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5leHBvcnQgeyBjb21wdXRlclRvb2wsIGhvc3RlZE1jcFRvb2wsIHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5leHBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyLCBUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5leHBvcnQgKiBhcyBwcm90b2NvbCBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbi8qKlxuICogQWRkIHRoZSBkZWZhdWx0IHByb2Nlc3Nvciwgd2hpY2ggZXhwb3J0cyB0cmFjZXMgYW5kIHNwYW5zIHRvIHRoZSBiYWNrZW5kIGluIGJhdGNoZXMuIFlvdSBjYW5cbiAqIGNoYW5nZSB0aGUgZGVmYXVsdCBiZWhhdmlvciBieSBlaXRoZXI6XG4gKiAxLiBjYWxsaW5nIGFkZFRyYWNlUHJvY2Vzc29yLCB3aGljaCBhZGRzIGFkZGl0aW9uYWwgcHJvY2Vzc29ycywgb3JcbiAqIDIuIGNhbGxpbmcgc2V0VHJhY2VQcm9jZXNzb3JzLCB3aGljaCBzZXRzIHRoZSBwcm9jZXNzb3JzIGFuZCBkaXNjYXJkcyB0aGUgZGVmYXVsdCBvbmVcbiAqL1xuYWRkVHJhY2VQcm9jZXNzb3IoZGVmYXVsdFByb2Nlc3NvcigpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiLCJpbXBvcnQgeyBBZ2VudCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbi8qKlxuICogQSBzcGVjaWFsaXplZCBhZ2VudCBpbnN0YW5jZSB0aGF0IGlzIG1lYW50IHRvIGJlIHVzZWQgd2l0aGluIGEgYFJlYWx0aW1lU2Vzc2lvbmAgdG8gYnVpbGRcbiAqIHZvaWNlIGFnZW50cy4gRHVlIHRvIHRoZSBuYXR1cmUgb2YgdGhpcyBhZ2VudCwgc29tZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWRcbiAqIHRoYXQgYXJlIHN1cHBvcnRlZCBieSByZWd1bGFyIGBBZ2VudGAgaW5zdGFuY2VzLiBGb3IgZXhhbXBsZTpcbiAqIC0gYG1vZGVsYCBjaG9pY2UgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBtb2RlbFNldHRpbmdzYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYG91dHB1dFR5cGVgIGlzIG5vdCBzdXBwb3J0ZWQgYXMgUmVhbHRpbWVBZ2VudHMgZG8gbm90IHN1cHBvcnQgc3RydWN0dXJlZCBvdXRwdXRzXG4gKiAtIGB0b29sVXNlQmVoYXZpb3JgIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgdm9pY2VgIGNhbiBiZSBjb25maWd1cmVkIG9uIGFuIGBBZ2VudGAgbGV2ZWwgaG93ZXZlciBpdCBjYW5ub3QgYmUgY2hhbmdlZCBhZnRlciB0aGUgZmlyc3RcbiAqICAgIGFnZW50IHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHNwb2tlXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBhZ2VudCA9IG5ldyBSZWFsdGltZUFnZW50KHtcbiAqICAgbmFtZTogJ215LWFnZW50JyxcbiAqICAgaW5zdHJ1Y3Rpb25zOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgY2FuIGFuc3dlciBxdWVzdGlvbnMgYW5kIGhlbHAgd2l0aCB0YXNrcy4nLFxuICogfSlcbiAqXG4gKiBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWx0aW1lQWdlbnQgZXh0ZW5kcyBBZ2VudCB7XG4gICAgLyoqXG4gICAgICogVGhlIHZvaWNlIGludGVuZGVkIHRvIGJlIHVzZWQgYnkgdGhlIGFnZW50LiBJZiBhbm90aGVyIGFnZW50IGFscmVhZHkgc3Bva2UgZHVyaW5nIHRoZVxuICAgICAqIFJlYWx0aW1lU2Vzc2lvbiwgY2hhbmdpbmcgdGhlIHZvaWNlIGR1cmluZyBhIGhhbmRvZmYgd2lsbCBmYWlsLlxuICAgICAqL1xuICAgIHZvaWNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcihjb25maWcpO1xuICAgICAgICB0aGlzLnZvaWNlID0gY29uZmlnLnZvaWNlID8/ICdhc2gnO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWx0aW1lQWdlbnQubWpzLm1hcCIsImltcG9ydCB7IGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGVib3VuY2VUZXh0TGVuZ3RoOiBzZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGggPz8gMTAwLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwoeyBwb2xpY3lIaW50OiBwb2xpY3lIaW50SW5wdXQsIC4uLm9wdGlvbnMgfSkge1xuICAgIGNvbnN0IGJhc2VHdWFyZHJhaWwgPSBkZWZpbmVPdXRwdXRHdWFyZHJhaWwob3B0aW9ucyk7XG4gICAgY29uc3QgcG9saWN5SGludCA9IHBvbGljeUhpbnRJbnB1dCA/PyBiYXNlR3VhcmRyYWlsLm5hbWU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYmFzZUd1YXJkcmFpbCxcbiAgICAgICAgcG9saWN5SGludCxcbiAgICAgICAgcnVuOiBhc3luYyAoYXJncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYmFzZUd1YXJkcmFpbC5ydW4oYXJncyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgLi4ucmVzdWx0Lmd1YXJkcmFpbCwgcG9saWN5SGludCB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBtZXNzYWdlIHRoYXQgaW5mb3JtcyB0aGUgbW9kZWwgYWJvdXQgd2h5IHRoZSBndWFyZHJhaWwgd2FzIHRyaWdnZXJlZCBhbmQgdG9cbiAqIGNvcnJlY3QgdGhlIGJlaGF2aW9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UocmVzdWx0KSB7XG4gICAgcmV0dXJuIGBcbuKaoO+4jyBZb3VyIGxhc3QgYW5zd2VyIHdhcyBibG9ja2VkLiBcbkZhaWxlZCBHdWFyZHJhaWwgUmVhc29uOiAke3Jlc3VsdC5ndWFyZHJhaWwucG9saWN5SGludH0uIFxuRmFpbHVyZSBEZXRhaWxzOiAke0pTT04uc3RyaW5naWZ5KHJlc3VsdC5vdXRwdXQub3V0cHV0SW5mbyA/PyB7fSl9LiBcblBsZWFzZSByZXNwb25kIGFnYWluIGZvbGxvd2luZyBwb2xpY3kuIEFwb2xvZ2l6ZSBmb3Igbm90IGJlaW5nIGFibGUgdG8gYW5zd2VyIHRoZSBxdWVzdGlvbiAod2hpbGUgYXZvaWRpbmcgdGhlIHNwZWNpZmljIHJlYXNvbikgYW5kIGRpdmVydCBkaXNjdXNzaW9uIGJhY2sgdG8gYW4gYXBwcm92ZWQgdG9waWMgaW1tZWRpYXRlbHkgYW5kIG5vdCBpbnZpdGUgbW9yZSBkaXNjdXNzaW9uLlxuYC50cmltKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOnJlYWx0aW1lJyk7XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG5leHBvcnQgY29uc3QgYmFzZUl0ZW1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCdyb2xlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ3N5c3RlbScpLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ3VzZXInKSxcbiAgICAgICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnXSksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSwgdGV4dDogei5zdHJpbmcoKSB9KS5vcih6Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgICAgIHJvbGU6IHoubGl0ZXJhbCgnYXNzaXN0YW50JyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3RleHQnKSwgdGV4dDogei5zdHJpbmcoKSB9KS5vcih6Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgfSkpKSxcbiAgICB9KSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lVG9vbENhbGxJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnXSksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuLy8gRXZlbnQgc2NoZW1hcyBtaXJyb3JpbmcgdGhlIHN0cnVjdHVyZXMgZGVmaW5lZCBpbiB0aGUgT3BlbkFJIFNESyB0eXBpbmdzLlxuLy8gTW9zdCBmaWVsZHMgZnJvbSB0aGUgaW50ZXJmYWNlcyBpbiBgcmVhbHRpbWUuZC50c2AgYXJlIGNhcHR1cmVkIGhlcmUgdG9cbi8vIHByb3ZpZGUgYmV0dGVyIHJ1bnRpbWUgdmFsaWRhdGlvbiB3aGVuIHBhcnNpbmcgZXZlbnRzIGZyb20gdGhlIHNlcnZlci5cbmV4cG9ydCBjb25zdCByZWFsdGltZVJlc3BvbnNlID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBjb252ZXJzYXRpb25faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1heF9vdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9yKHoubGl0ZXJhbCgnaW5mJykpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1vZGFsaXRpZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5yZXNwb25zZScpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvdXRwdXQ6IHouYXJyYXkoei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG91dHB1dF9hdWRpb19mb3JtYXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHN0YXR1czogelxuICAgICAgICAuZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2ZhaWxlZCcsICdjYW5jZWxsZWQnLCAnaW5fcHJvZ3Jlc3MnXSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3RhdHVzX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB1c2FnZTogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIGlucHV0X3Rva2Vuc19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb3V0cHV0X3Rva2Vuc19kZXRhaWxzOiB6XG4gICAgICAgICAgICAucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpXG4gICAgICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAgICAgLm51bGxhYmxlKCksXG4gICAgfSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgdm9pY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG4vLyBCYXNpYyBjb250ZW50IHNjaGVtYSB1c2VkIGJ5IENvbnZlcnNhdGlvbkl0ZW0uXG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdGV4dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei51bmlvbihbXG4gICAgICAgIHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvJyksXG4gICAgICAgIHoubGl0ZXJhbCgnaXRlbV9yZWZlcmVuY2UnKSxcbiAgICAgICAgei5saXRlcmFsKCd0ZXh0JyksXG4gICAgICAgIHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICBdKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY29udGVudDogei5hcnJheShjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLml0ZW0nKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJvbGU6IHouZW51bShbJ3VzZXInLCAnYXNzaXN0YW50JywgJ3N5c3RlbSddKS5vcHRpb25hbCgpLFxuICAgIHN0YXR1czogei5lbnVtKFsnY29tcGxldGVkJywgJ2luY29tcGxldGUnLCAnaW5fcHJvZ3Jlc3MnXSkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmVudW0oWydtZXNzYWdlJywgJ2Z1bmN0aW9uX2NhbGwnLCAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnXSkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgY29udmVyc2F0aW9uOiB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5jb252ZXJzYXRpb24nKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZmFpbGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGVycm9yOiB6Lm9iamVjdCh7XG4gICAgICAgIGNvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBwYXJhbTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgZXJyb3JFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Vycm9yJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBlcnJvcjogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyksXG4gICAgYXVkaW86IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdHRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19zdGFydF9tczogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5zdGFydGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmF0ZV9saW1pdHMudXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJhdGVfbGltaXRzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgbGltaXQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgbmFtZTogei5lbnVtKFsncmVxdWVzdHMnLCAndG9rZW5zJ10pLm9wdGlvbmFsKCksXG4gICAgICAgIHJlbWFpbmluZzogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICByZXNldF9zZWNvbmRzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgfSkpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5hdWRpby5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW8uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5hdWRpb190cmFuc2NyaXB0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFydDogei5vYmplY3Qoe1xuICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5lbnVtKFsndGV4dCcsICdhdWRpbyddKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZURvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZTogcmVhbHRpbWVSZXNwb25zZSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UudGV4dC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS50ZXh0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNhbmNlbCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jcmVhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLnVwZGF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd0cmFuc2NyaXB0aW9uX3Nlc3Npb24udXBkYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd0cmFuc2NyaXB0aW9uX3Nlc3Npb24udXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbi8qKlxuICogVGhpcyBzY2hlbWEgaXMgdXNlZCBpZiBhbiBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuIFRoZSBSZWFsdGltZSBBUEkgbWlnaHQgaW50cm9kdWNlXG4gKiBuZXcgZXZlbnRzIGF0IHNvbWUgcG9pbnQgYW5kIHdlIHNob3VsZCBoYW5kbGUgdGhlbSBncmFjZWZ1bGx5IGJ5IHRyZWF0aW5nIHRoZW0gYXMgZ2VuZXJpYyBldmVudHNcbiAqIG9ubHkgcmVxdWlyaW5nIGEgdHlwZSBhbmQgYW4gb3B0aW9uYWwgZXZlbnRfaWQuXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmljRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSxcbiAgICBlcnJvckV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICByYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lQ2xpZW50RXZlbnRTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbiAgICB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hLFxuXSk7XG4vKipcbiAqIFBhcnNlcyBhIHJlYWx0aW1lIGV2ZW50IGZyb20gdGhlIHNlcnZlci4gSWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudCwgaXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgZ2VuZXJpYyBldmVudC5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwYXJzZS5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgZXZlbnQgb3IgbnVsbCBpZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KSB7XG4gICAgY29uc3QgcmF3ID0gSlNPTi5wYXJzZShldmVudC5kYXRhLnRvU3RyaW5nKCkpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBnZW5lcmljUGFyc2VkID0gZ2VuZXJpY0V2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgICAgICBpZiAoZ2VuZXJpY1BhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBnZW5lcmljUGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGlzR2VuZXJpYzogdHJ1ZSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBkYXRhOiBwYXJzZWQuZGF0YSwgaXNHZW5lcmljOiBmYWxzZSB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVFdmVudHMubWpzLm1hcCIsImltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIsIFVzYWdlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLCByZWFsdGltZVRvb2xDYWxsSXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50LCByZXNwb25zZURvbmVFdmVudFNjaGVtYSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IGFycmF5QnVmZmVyVG9CYXNlNjQsIGRpZmZSZWFsdGltZUhpc3RvcnkgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlckRlbGVnYXRlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IG1vZGVsIHRoYXQgaXMgdXNlZCBkdXJpbmcgdGhlIGNvbm5lY3Rpb24gaWYgbm8gbW9kZWwgaXMgcHJvdmlkZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCA9ICdncHQtNG8tcmVhbHRpbWUtcHJldmlldyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IHNlc3Npb24gY29uZmlnIHRoYXQgZ2V0cyBzZW5kIG92ZXIgZHVyaW5nIHNlc3Npb24gY29ubmVjdGlvbiB1bmxlc3Mgb3ZlcnJpZGRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICB2b2ljZTogJ2FzaCcsXG4gICAgbW9kYWxpdGllczogWyd0ZXh0JywgJ2F1ZGlvJ10sXG4gICAgaW5wdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBvdXRwdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBpbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbjoge1xuICAgICAgICBtb2RlbDogJ2dwdC00by1taW5pLXRyYW5zY3JpYmUnLFxuICAgIH0sXG4gICAgdHVybkRldGVjdGlvbjoge1xuICAgICAgICB0eXBlOiAnc2VtYW50aWNfdmFkJyxcbiAgICB9LFxuICAgIGlucHV0QXVkaW9Ob2lzZVJlZHVjdGlvbjogbnVsbCxcbiAgICBzcGVlZDogMSxcbn07XG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVCYXNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgICNtb2RlbDtcbiAgICAjYXBpS2V5O1xuICAgICN0cmFjaW5nQ29uZmlnID0gbnVsbDtcbiAgICAjcmF3U2Vzc2lvbkNvbmZpZyA9IG51bGw7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiAqKk5vdGUqKjogVGhlIG1vZGVsIGNhbm5vdCBiZSBjaGFuZ2VkIG1pZCBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgc2V0IGN1cnJlbnRNb2RlbChtb2RlbCkge1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICBnZXQgX3Jhd1Nlc3Npb25Db25maWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyYXdTZXNzaW9uQ29uZmlnID8/IG51bGw7XG4gICAgfVxuICAgIGFzeW5jIF9nZXRBcGlLZXkob3B0aW9ucykge1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBvcHRpb25zLmFwaUtleSA/PyB0aGlzLiNhcGlLZXk7XG4gICAgICAgIGlmICh0eXBlb2YgYXBpS2V5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgYXBpS2V5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwaUtleTtcbiAgICB9XG4gICAgX29uTWVzc2FnZShldmVudCkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpO1xuICAgICAgICBpZiAocGFyc2VkID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCcqJywgcGFyc2VkKTtcbiAgICAgICAgaWYgKGlzR2VuZXJpYykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHsgdHlwZTogJ2Vycm9yJywgZXJyb3I6IHBhcnNlZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdChwYXJzZWQudHlwZSwgcGFyc2VkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0dXJuX3N0YXJ0ZWQnLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlX3N0YXJ0ZWQnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YToge1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJzZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24udXBkYXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3Jhd1Nlc3Npb25Db25maWcgPSBwYXJzZWQuc2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZURvbmVFdmVudFNjaGVtYS5zYWZlUGFyc2UocGFyc2VkKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcGFyc2luZyByZXNwb25zZSBkb25lIGV2ZW50JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlucHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnMgPSByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICBjb25zdCB0b3RhbFRva2VucyA9IGlucHV0VG9rZW5zICsgb3V0cHV0VG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgdXNhZ2UgPSBuZXcgVXNhZ2Uoe1xuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbnNfZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1c2FnZV91cGRhdGUnLCB1c2FnZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fZG9uZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2VfZG9uZScsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5vdXRwdXQgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW8uZG9uZScpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fZG9uZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fZGVsZXRlZCcsIHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpIHtcbiAgICAgICAgICAgIC8vIHJpZ2h0IG5vdyByYXRoZXIgdGhhbiBrZWVwaW5nIHRyYWNrIG9mIHBhcnRpYWxzIGFuZCByZWJ1aWxkaW5nIHRoZSBpdGVtIHdlXG4gICAgICAgICAgICAvLyB3aWxsIHJldHJpZXZlIGl0IGluc3RlYWQgd2hpY2ggdHJpZ2dlcnMgdGhlIGBjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWRgIGV2ZW50IGJlbG93XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICBpdGVtX2lkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLnRleHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3RyYW5zY3JpcHRfZGVsdGEnLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NyaXB0X2RlbHRhJyxcbiAgICAgICAgICAgICAgICAgICAgZGVsdGE6IHBhcnNlZC5kZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm8gc3VwcG9ydCBmb3IgcGFydGlhbCB0cmFuc2NyaXB0cyB5ZXQuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC5pdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSXRlbUlkID0gcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGVkJ1xuICAgICAgICAgICAgICAgICAgICA/IHBhcnNlZC5wcmV2aW91c19pdGVtX2lkXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZWQuaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiBwYXJzZWQuaXRlbS5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwYXJzZWQuaXRlbS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHBhcnNlZC5pdGVtLnN0YXR1cyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgaXRlbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBhcnNlZC5pdGVtO1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIGl0ZW0uc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLCAvLyB3ZSBzZXQgaXQgdG8gaW5fcHJvZ3Jlc3MgZm9yIHRoZSBVSSBhcyBpdCB3aWxsIG9ubHkgYmUgY29tcGxldGVkIHdpdGggdGhlIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogbnVsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgdG9vbENhbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZnVuY3Rpb25fY2FsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiBpdGVtLmNhbGxfaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsdGltZUl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCByZWFsdGltZUl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX29uT3BlbigpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgX29uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZGlzY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcgaXRlbSBpbiB0aGUgY29udmVyc2F0aW9uIGFuZFxuICAgICAqIHRyaWdnZXIgYSByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3RoZXJFdmVudERhdGEgLSBBZGRpdGlvbmFsIGV2ZW50IGRhdGEgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF90ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBtZXNzYWdlLFxuICAgICAgICAgICAgLi4ub3RoZXJFdmVudERhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogY29uZmlnLmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwgPz9cbiAgICAgICAgICAgICAgICB0aGlzLiNtb2RlbCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLm1vZGVsLFxuICAgICAgICAgICAgdm9pY2U6IGNvbmZpZy52b2ljZSA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy52b2ljZSxcbiAgICAgICAgICAgIHNwZWVkOiBjb25maWcuc3BlZWQgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuc3BlZWQsXG4gICAgICAgICAgICBtb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RhbGl0aWVzLFxuICAgICAgICAgICAgaW5wdXRfYXVkaW9fZm9ybWF0OiBjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9Gb3JtYXQsXG4gICAgICAgICAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiBjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5vdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgIGlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb246IGNvbmZpZy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9UcmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgaW5wdXRfYXVkaW9fbm9pc2VfcmVkdWN0aW9uOiBjb25maWcuaW5wdXRBdWRpb05vaXNlUmVkdWN0aW9uID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuaW5wdXRBdWRpb05vaXNlUmVkdWN0aW9uLFxuICAgICAgICAgICAgdHVybl9kZXRlY3Rpb246IE9wZW5BSVJlYWx0aW1lQmFzZS5idWlsZFR1cm5EZXRlY3Rpb25Db25maWcoY29uZmlnLnR1cm5EZXRlY3Rpb24pID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBjb25maWcudG9vbENob2ljZSA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scz8ubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihjb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICBzdGF0aWMgYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKGMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIGNyZWF0ZVJlc3BvbnNlLCBjcmVhdGVfcmVzcG9uc2UsIGVhZ2VybmVzcywgaW50ZXJydXB0UmVzcG9uc2UsIGludGVycnVwdF9yZXNwb25zZSwgcHJlZml4UGFkZGluZ01zLCBwcmVmaXhfcGFkZGluZ19tcywgc2lsZW5jZUR1cmF0aW9uTXMsIHNpbGVuY2VfZHVyYXRpb25fbXMsIHRocmVzaG9sZCwgLi4ucmVzdCB9ID0gYztcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGNyZWF0ZV9yZXNwb25zZTogY3JlYXRlUmVzcG9uc2UgPyBjcmVhdGVSZXNwb25zZSA6IGNyZWF0ZV9yZXNwb25zZSxcbiAgICAgICAgICAgIGVhZ2VybmVzcyxcbiAgICAgICAgICAgIGludGVycnVwdF9yZXNwb25zZTogaW50ZXJydXB0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICA/IGludGVycnVwdFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgOiBpbnRlcnJ1cHRfcmVzcG9uc2UsXG4gICAgICAgICAgICBwcmVmaXhfcGFkZGluZ19tczogcHJlZml4UGFkZGluZ01zID8gcHJlZml4UGFkZGluZ01zIDogcHJlZml4X3BhZGRpbmdfbXMsXG4gICAgICAgICAgICBzaWxlbmNlX2R1cmF0aW9uX21zOiBzaWxlbmNlRHVyYXRpb25Nc1xuICAgICAgICAgICAgICAgID8gc2lsZW5jZUR1cmF0aW9uTXNcbiAgICAgICAgICAgICAgICA6IHNpbGVuY2VfZHVyYXRpb25fbXMsXG4gICAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9O1xuICAgICAgICAvLyBSZW1vdmUgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIHRoZSBjb25maWdcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWdba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25maWdba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjb25maWcpLmxlbmd0aCA+IDAgPyBjb25maWcgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGludGVybmFsIHRyYWNpbmcgY29uZmlnLiBUaGlzIGlzIHVzZWQgdG8gdHJhY2sgdGhlIHRyYWNpbmcgY29uZmlnIHRoYXQgaGFzIGJlZW4gc2V0XG4gICAgICogZHVyaW5nIHRoZSBzZXNzaW9uLmNyZWF0ZSBldmVudC5cbiAgICAgKi9cbiAgICBzZXQgX3RyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gdHJhY2luZ0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdHJhY2luZyBjb25maWcgZm9yIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgc2VuZCB0aGUgdHJhY2luZyBjb25maWcgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFjaW5nQ29uZmlnIC0gVGhlIHRyYWNpbmcgY29uZmlnIHRvIHNldC4gV2UgZG9uJ3Qgc3VwcG9ydCAnYXV0bycgaGVyZSBhcyB0aGUgU0RLIHdpbGwgYWx3YXlzIGNvbmZpZ3VyZSBhIFdvcmtmbG93IE5hbWUgdW5sZXNzIGl0IGV4aXN0c1xuICAgICAqL1xuICAgIF91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gdHJlYXRpbmcgaXQgYXMgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgLy8gdHVybiBvbiB0cmFjaW5nIGluIGF1dG8gbW9kZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBhbHJlYWR5IHNldCwgd2UgY2FuJ3QgY2hhbmdlIGl0XG4gICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2luZyBjb25maWcgaXMgYWxyZWFkeSBzZXQsIHNraXBwaW5nIHNldHRpbmcgaXQgYWdhaW4uIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSBudWxsKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0Rpc2FibGluZyB0cmFjaW5nIGZvciB0aGlzIHNlc3Npb24uIEl0IGNhbm5vdCBiZSB0dXJuZWQgb24gZm9yIHRoaXMgc2Vzc2lvbiBmcm9tIHRoaXMgcG9pbnQgb24uJyk7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnID09PSBudWxsIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgY3VycmVudGx5IG5vdCBzZXQgc28gd2UgY2FuIHNldCBpdCB0byB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/Lm1ldGFkYXRhICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ01pc21hdGNoIGluIHRyYWNpbmcgY29uZmlnLiBJZ25vcmluZyB0aGUgbmV3IHRyYWNpbmcgY29uZmlnLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4gQ3VycmVudCB0cmFjaW5nIGNvbmZpZzogJXMsIG5ldyB0cmFjaW5nIGNvbmZpZzogJXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiN0cmFjaW5nQ29uZmlnKSwgSlNPTi5zdHJpbmdpZnkodHJhY2luZ0NvbmZpZykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZXNzaW9uIGNvbmZpZy4gVGhpcyB3aWxsIG1lcmdlIGl0IHdpdGggdGhlIGN1cnJlbnQgc2Vzc2lvbiBjb25maWcgd2l0aCB0aGUgZGVmYXVsdFxuICAgICAqIHZhbHVlcyBhbmQgc2VuZCBpdCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBzZXNzaW9uIGNvbmZpZyB0byB1cGRhdGUuXG4gICAgICovXG4gICAgdXBkYXRlU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB0aGlzLl9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiBzZXNzaW9uRGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgdGhlIG91dHB1dCBvZiBhIGZ1bmN0aW9uIGNhbGwgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0b29sQ2FsbCAtIFRoZSB0b29sIGNhbGwgdG8gc2VuZCB0aGUgb3V0cHV0IGZvci5cbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKiBAcGFyYW0gc3RhcnRSZXNwb25zZSAtIFdoZXRoZXIgdG8gc3RhcnQgYSBuZXcgcmVzcG9uc2UgYWZ0ZXIgc2VuZGluZyB0aGUgb3V0cHV0LlxuICAgICAqL1xuICAgIHNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgc3RhcnRSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHRvb2xDYWxsLnByZXZpb3VzSXRlbUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogdG9vbENhbGwuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdG9vbCBjYWxsIGl0ZW0nLCBlcnJvciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBJZiBgeyBjb21taXQ6IHRydWUgfWAgaXMgcGFzc2VkLCB0aGUgYXVkaW8gYnVmZmVyXG4gICAgICogd2lsbCBiZSBjb21taXR0ZWQgYW5kIHRoZSBtb2RlbCB3aWxsIHN0YXJ0IHByb2Nlc3NpbmcgaXQuIFRoaXMgaXMgbmVjZXNzYXJ5IGlmIHlvdSBoYXZlXG4gICAgICogZGlzYWJsZWQgdHVybiBkZXRlY3Rpb24gLyB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIHsgY29tbWl0ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyxcbiAgICAgICAgICAgIGF1ZGlvOiBhcnJheUJ1ZmZlclRvQmFzZTY0KGF1ZGlvKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb21taXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLiBUaGlzIHdpbGwgY3JlYXRlIGEgZGlmZiBiZXR3ZWVuIHRoZSBvbGQgYW5kIG5ldyBoaXN0b3J5XG4gICAgICogYW5kIHNlbmQgdGhlIG5lY2Vzc2FyeSBldmVudHMgdG8gdGhlIFJlYWx0aW1lIEFQSSB0byB1cGRhdGUgdGhlIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgcmVzZXRIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICAgICAgY29uc3QgeyByZW1vdmFscywgYWRkaXRpb25zLCB1cGRhdGVzIH0gPSBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpO1xuICAgICAgICBjb25zdCByZW1vdmFsSWRzID0gbmV3IFNldChyZW1vdmFscy5tYXAoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkKSk7XG4gICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYW4gdXBkYXRlIGV2ZW50IGZvciBpdGVtcyBzbyB3ZSB3aWxsIHJlbW92ZSBhbmQgcmUtYWRkIHdoYXQncyB0aGVyZVxuICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG4gICAgICAgICAgICByZW1vdmFsSWRzLmFkZCh1cGRhdGUuaXRlbUlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZhbElkcy5zaXplID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtSWQgb2YgcmVtb3ZhbElkcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZGRpdGlvbnNBbmRVcGRhdGVzID0gWy4uLmFkZGl0aW9ucywgLi4udXBkYXRlc107XG4gICAgICAgIGZvciAoY29uc3QgYWRkaXRpb24gb2YgYWRkaXRpb25zQW5kVXBkYXRlcykge1xuICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1FbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiBhZGRpdGlvbi5yb2xlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBhZGRpdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBpZDogYWRkaXRpb24uaXRlbUlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uLnJvbGUgIT09ICdzeXN0ZW0nICYmIGFkZGl0aW9uLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtRW50cnkuc3RhdHVzID0gYWRkaXRpb24uc3RhdHVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRW50cnksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhZGRpdGlvbi50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRnVuY3Rpb24gY2FsbHMgY2Fubm90IGJlIG1hbnVhbGx5IGFkZGVkIG9yIHVwZGF0ZWQgYXQgdGhlIG1vbWVudC4gSWdub3JpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUJhc2UubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5pbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBIRUFERVJTIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJSVEMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdCBjYW5cbiAqIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICpcbiAqIFVubGVzcyB5b3Ugc3BlY2lmeSBhIGBtZWRpYVN0cmVhbWAgb3IgYGF1ZGlvRWxlbWVudGAgb3B0aW9uLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZSBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViUlRDIGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICBvcHRpb25zO1xuICAgICN1cmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAjbXV0ZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBSVENQZWVyQ29ubmVjdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLmJhc2VVcmwgPz8gYGh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWVgO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW5jbHVkaW5nIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIGRhdGFcbiAgICAgKiBjaGFubmVsLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBPcGVuQUkgUmVhbHRpbWUgQVBJXG4gICAgICogdmlhIFdlYlJUQy5cbiAgICAgKlxuICAgICAqIElmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGwgYWxzbyBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGVcbiAgICAgKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0aW5nJykge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy4gUGxlYXNlIGF3YWl0IG9yaWdpbmFsIHByb21pc2UnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBvcHRpb25zLnVybCA/PyB0aGlzLiN1cmw7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgY29uc3QgaXNDbGllbnRLZXkgPSB0eXBlb2YgYXBpS2V5ID09PSAnc3RyaW5nJyAmJiBhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJyk7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSAmJiAhaXNDbGllbnRLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gaW5zZWN1cmUgQVBJIGtleS4gUGxlYXNlIHVzZSBhIFdlYlNvY2tldCBjb25uZWN0aW9uIGluc3RlYWQgb3Igc2V0IHRoZSB1c2VJbnNlY3VyZUFwaUtleSBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXN5bmMtcHJvbWlzZS1leGVjdXRvclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyU2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uVXJsID0gbmV3IFVSTChiYXNlVXJsKTtcbiAgICAgICAgICAgICAgICBsZXQgcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQ2hhbm5lbCA9IHBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdvYWktZXZlbnRzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBTZW5kaW5nIHRoZSBzZXNzaW9uIGNvbmZpZyBhZ2FpbiBoZXJlIG9uY2UgdGhlIGNoYW5uZWwgaXMgY29ubmVjdGVkIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHRoZSBzZXNzaW9uIGNvbmZpZyBpcyBzZW50IHRvIHRoZSBzZXJ2ZXIgYmVmb3JlIHRoZSBmaXJzdCByZXNwb25zZSBpcyByZWNlaXZlZFxuICAgICAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIGl0IG9uIGNvbm5lY3Rpb24gc2hvdWxkIHdvcmsgYnV0IHRoZSBjb25maWcgaXMgbm90IGJlaW5nIHZhbGlkYXRlZCBvbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyLiBUaGlzIHRyaWdnZXJzIGEgdmFsaWRhdGlvbiBlcnJvciBpZiB0aGUgY29uZmlnIGlzIG5vdCB2YWxpZC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnLnRyYWNpbmcgPz8gJ2F1dG8nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIHNldCB1cCBhdWRpbyBwbGF5YmFja1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRWxlbWVudCA9IHRoaXMub3B0aW9ucy5hdWRpb0VsZW1lbnQgPz8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9udHJhY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IGV2ZW50LnN0cmVhbXNbMF07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBnZXQgbWljcm9waG9uZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLm9wdGlvbnMubWVkaWFTdHJlYW0gPz9cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uYWRkVHJhY2soc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2hhbmdlUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7IC4uLnRoaXMuI3N0YXRlLCBwZWVyQ29ubmVjdGlvbiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFvZmZlci5zZHApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG9mZmVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuX2dldE1lcmdlZFNlc3Npb25Db25maWcodXNlclNlc3Npb25Db25maWcpLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3NkcCcsIG9mZmVyLnNkcCk7XG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3Nlc3Npb24nLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uQ29uZmlnKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2RwUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb25uZWN0aW9uVXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IEhFQURFUlNbJ1gtT3BlbkFJLUFnZW50cy1TREsnXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgICAgICAgICAgICAgICBzZHA6IGF3YWl0IHNkcFJlc3BvbnNlLnRleHQoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLmRhdGFDaGFubmVsIHx8XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGRhdGEgY2hhbm5lbCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSBvciB1bm11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzZW5kZXIudHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrLmVuYWJsZWQgPSAhbXV0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSSBhbmQgZGlzY29ubmVjdHMgdGhlIHVuZGVybHlpbmcgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrPy5zdG9wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyAhPT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgY3VycmVudCByZXNwb25zZSBpZiBvbmUgaXMgb25nb2luZyBhbmQgY2xlYXIgdGhlIGF1ZGlvIGJ1ZmZlciBzbyB0aGF0IHRoZSBhZ2VudFxuICAgICAqIHN0b3BzIHRhbGtpbmcuXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyJyxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5leHBvcnQgY29uc3QgV2ViU29ja2V0ID0gZ2xvYmFsVGhpcy5XZWJTb2NrZXQ7XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgY29uc3QgdXNlV2ViU29ja2V0UHJvdG9jb2xzID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsImltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50LCB1c2VXZWJTb2NrZXRQcm90b2NvbHMsIFdlYlNvY2tldCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1yZWFsdGltZS9fc2hpbXMnO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IGJhc2U2NFRvQXJyYXlCdWZmZXIsIEhFQURFUlMsIFdFQlNPQ0tFVF9NRVRBIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViU29ja2V0cy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0XG4gKiBjYW4gYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgI2FwaUtleTtcbiAgICAjdXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI2N1cnJlbnRJdGVtSWQ7XG4gICAgI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleDtcbiAgICAvKipcbiAgICAgKiBUaW1lc3RhbXAgbWFpbnRhaW5lZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyIHRvIGFpZCB3aXRoIHRoZSBjYWxjdWxhdGlvbiBvZiB0aGUgZWxhcHNlZCB0aW1lXG4gICAgICogc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQgdG8gY29tcHV0ZSB0aGUgcmlnaHQgaW50ZXJydXB0aW9uIHRpbWUuXG4gICAgICpcbiAgICAgKiBNb3N0bHkgaW50ZXJuYWwgYnV0IG1pZ2h0IGJlIHVzZWQgYnkgZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVycyBmb3IgdGhlaXIgaW50ZXJydXB0aW9uXG4gICAgICogY2FsY3VsYXRpb24uXG4gICAgICovXG4gICAgX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbHdheXMgcmV0dXJucyBgbnVsbGAgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3QgaGFuZGxlIG11dGluZy4gSW5zdGVhZCxcbiAgICAgKiB0aGlzIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBjbGllbnQgYnkgbm90IHRyaWdnZXJpbmcgdGhlIGBzZW5kQXVkaW9gIG1ldGhvZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBpdGVtIElEIG9mIHRoZSBvbmdvaW5nIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50SXRlbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEl0ZW1JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgdGhlIGBhdWRpb2AgZXZlbnQgdGhhdCBhIGNsaWVudCBtaWdodCBsaXN0ZW4gdG8gdG8gcmVjZWl2ZSB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqIFByb3RlY3RlZCBmb3IgeW91IHRvIGJlIGFibGUgdG8gb3ZlcnJpZGUgYW5kIGRpc2FibGUgZW1pdHRpbmcgdGhpcyBldmVudCBpbiBjYXNlIHlvdXIgZXh0ZW5kZWRcbiAgICAgKiB0cmFuc3BvcnQgbGF5ZXIgaGFuZGxlcyBhdWRpbyBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvRXZlbnQgLSBUaGUgYXVkaW8gZXZlbnQgdG8gZW1pdC5cbiAgICAgKi9cbiAgICBfb25BdWRpbyhhdWRpb0V2ZW50KSB7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBhdWRpb0V2ZW50KTtcbiAgICB9XG4gICAgI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLiNhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FQSSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNhbGwgYGNvbm5lY3QoKWAgd2l0aCBhbiBBUEkga2V5IGZpcnN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmXG4gICAgICAgICAgICAhdGhpcy4jYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpICYmXG4gICAgICAgICAgICAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBoYXZlIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGJyb3dzZXJzIGFuZCB3b3JrZXJkIHNob3VsZCB1c2UgdGhlIHByb3RvY29scyBhcmd1bWVudCwgbm9kZSBzaG91bGQgdXNlIHRoZSBoZWFkZXJzIGFyZ3VtZW50XG4gICAgICAgIGNvbnN0IHdlYnNvY2tldEFyZ3VtZW50cyA9IHVzZVdlYlNvY2tldFByb3RvY29sc1xuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAvLyBBdXRoXG4gICAgICAgICAgICAgICAgJ29wZW5haS1pbnNlY3VyZS1hcGkta2V5LicgKyB0aGlzLiNhcGlLZXksXG4gICAgICAgICAgICAgICAgLy8gQmV0YSBwcm90b2NvbCwgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAnb3BlbmFpLWJldGEucmVhbHRpbWUtdjEnLFxuICAgICAgICAgICAgICAgIC8vIFZlcnNpb24gaGVhZGVyXG4gICAgICAgICAgICAgICAgV0VCU09DS0VUX01FVEEsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiNhcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgJ09wZW5BSS1CZXRhJzogJ3JlYWx0aW1lPXYxJyxcbiAgICAgICAgICAgICAgICAgICAgLi4uSEVBREVSUyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KHRoaXMuI3VybCwgd2Vic29ja2V0QXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW8uZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gcGFyc2VkLmNvbnRlbnRfaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHBhcnNlZC5pdGVtX2lkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIHN0YXJ0IHRpbWVzdGFtcCBpcyBub3Qgc2V0LCB3ZSBzZXQgaXQgdG8gdGhlIGN1cnJlbnQgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZWxhcHNlZCB0aW1lIGZvciBpbnRlcnJ1cHRpb24uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZiA9IGJhc2U2NFRvQXJyYXlCdWZmZXIocGFyc2VkLmRlbHRhKTtcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGF1ZGlvIGxlbmd0aCBpbiBtaWxsaXNlY29uZHMgYXNzdW1pbmcgMjRrSHogcGNtMTZsZVxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRm9ybWF0ID0gdGhpcy5fcmF3U2Vzc2lvbkNvbmZpZz8ub3V0cHV0X2F1ZGlvX2Zvcm1hdCA/PyAncGNtMTYnO1xuICAgICAgICAgICAgICAgIGlmIChhdWRpb0Zvcm1hdC5zdGFydHNXaXRoKCdnNzExXycpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDhrSHogKiAxIGJ5dGUgcGVyIHNhbXBsZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyAyNGtIeiAqIDIgYnl0ZXMgcGVyIHNhbXBsZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYnVmZixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fb25BdWRpbyhhdWRpb0V2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCA9IHRoaXMuX3Jhd1Nlc3Npb25Db25maWc/LnR1cm5fZGV0ZWN0aW9uPy5pbnRlcnJ1cHRfcmVzcG9uc2UgPz8gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoIWF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcoc2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHVybCA9IG9wdGlvbnMudXJsID8/XG4gICAgICAgICAgICB0aGlzLiN1cmwgPz9cbiAgICAgICAgICAgIGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9tb2RlbD0ke3RoaXMuY3VycmVudE1vZGVsfWA7XG4gICAgICAgIHRoaXMuI3VybCA9IHVybDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyhzZXNzaW9uQ29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgd2lsbCBhbHNvIHJlc2V0IGFueSBpbnRlcm5hbCBjb25uZWN0aW9uIHRyYWNraW5nIHVzZWQgZm9yIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0Py5jbG9zZSgpO1xuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaWxsIHRocm93IGFuIGVycm9yIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIG11dGUoX211dGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXV0ZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydC4gWW91IGhhdmUgdG8gbXV0ZSB0aGUgYXVkaW8gaW5wdXQgeW91cnNlbGYuJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCBmb3IgeW91ciBjbGllbnQgdG8gc2VuZCBhdWRpbyB0byB0aGVcbiAgICAgKiBtb2RlbCB0byByZXNwb25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHN1cGVyLnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGNhbmNlbCByZXNwb25zZSBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgdG8gY2FuY2VsIGFuIG9uZ29pbmdcbiAgICAgKiAgcmVzcG9uc2UgdGhhdCB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGdlbmVyYXRpbmcuXG4gICAgICovXG4gICAgX2NhbmNlbFJlc3BvbnNlKCkge1xuICAgICAgICAvLyBjYW5jZWwgdGhlIG9uZ29pbmcgcmVzcG9uc2VcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEbyBOT1QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gQ2FsbCBgaW50ZXJydXB0KClgIGluc3RlYWQgZm9yIHByb3BlciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlbmQgdGhlIHJpZ2h0IGV2ZW50cyB0byB0aGUgQVBJIHRvIGluZm9ybSB0aGUgbW9kZWwgdGhhdCB0aGUgdXNlciBoYXNcbiAgICAgKiBpbnRlcnJ1cHRlZCB0aGUgcmVzcG9uc2UuIEl0IG1pZ2h0IGJlIG92ZXJyaWRkZW4vZXh0ZW5kZWQgYnkgYW4gZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVyLiBTZWVcbiAgICAgKiB0aGUgYFR3aWxpb1JlYWx0aW1lVHJhbnNwb3J0TGF5ZXJgIGZvciBhbiBleGFtcGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVsYXBzZWRUaW1lIC0gVGhlIGVsYXBzZWQgdGltZSBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZC5cbiAgICAgKi9cbiAgICBfaW50ZXJydXB0KGVsYXBzZWRUaW1lLCBjYW5jZWxPbmdvaW5nUmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA8IDAgfHwgZWxhcHNlZFRpbWUgPiB0aGlzLl9hdWRpb0xlbmd0aE1zKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgZW1pdCB0aGlzIGV2ZW50IHNvIHRoZSBjbGllbnQgY2FuIHN0b3AgcGxheWluZyBhdWRpb1xuICAgICAgICBpZiAoY2FuY2VsT25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxSZXNwb25zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyxcbiAgICAgICAgICAgIGl0ZW1faWQ6IHRoaXMuI2N1cnJlbnRJdGVtSWQsXG4gICAgICAgICAgICBjb250ZW50X2luZGV4OiB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXgsXG4gICAgICAgICAgICBhdWRpb19lbmRfbXM6IGVsYXBzZWRUaW1lLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBvbmdvaW5nIHJlc3BvbnNlLiBUaGlzIG1ldGhvZCBpcyB0cmlnZ2VyZWQgYXV0b21hdGljYWxseSBieSB0aGUgY2xpZW50IHdoZW5cbiAgICAgKiB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkgaXMgZW5hYmxlZCAoZGVmYXVsdCkgYXMgd2VsbCBhcyB3aGVuIGFuIG91dHB1dCBndWFyZHJhaWwgZ290XG4gICAgICogdHJpZ2dlcmVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkgaWYgeW91IHdhbnQgdG8gaW50ZXJydXB0IHRoZSBjb252ZXJzYXRpb24gZm9yIGV4YW1wbGVcbiAgICAgKiBiYXNlZCBvbiBhbiBldmVudCBpbiB0aGUgY2xpZW50LlxuICAgICAqL1xuICAgIGludGVycnVwdChjYW5jZWxPbmdvaW5nUmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIGlmICghdGhpcy4jY3VycmVudEl0ZW1JZCB8fCB0eXBlb2YgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5faW50ZXJydXB0KGVsYXBzZWRUaW1lLCBjYW5jZWxPbmdvaW5nUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzLm1hcCIsImltcG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgUnVuQ29udGV4dCwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCwgdG9TbWFydFN0cmluZyB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuaW1wb3J0IHsgZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwsIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlLCBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLCBoYXNXZWJSVENTdXBwb3J0LCB1cGRhdGVSZWFsdGltZUhpc3RvcnksIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyIHBpZWNlIG9mIGJ1aWxkaW5nIFZvaWNlIEFnZW50cy4gSXQncyB0aGUgZXF1aXZhbGVudCBvZiBhXG4gKiBSdW5uZXIgaW4gdGV4dC1iYXNlZCBhZ2VudHMgZXhjZXB0IHRoYXQgaXQgYXV0b21hdGljYWxseSBoYW5kbGVzIG11bHRpcGxlIHR1cm5zIGJ5IG1haW50YWluaW5nIGFcbiAqIGNvbm5lY3Rpb24gd2l0aCB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIuXG4gKlxuICogVGhlIHNlc3Npb24gaGFuZGxlcyBtYW5hZ2luZyB0aGUgbG9jYWwgaGlzdG9yeSBjb3B5LCBleGVjdXRlcyB0b29scywgcnVucyBvdXRwdXQgZ3VhcmRyYWlscywgYW5kXG4gKiBmYWNpbGl0aWVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scyA9IFtdO1xuICAgICNjb250ZXh0O1xuICAgICNvdXRwdXRHdWFyZHJhaWxzID0gW107XG4gICAgI291dHB1dEd1YXJkcmFpbFNldHRpbmdzO1xuICAgICN0cmFuc2NyaWJlZFRleHREZWx0YXMgPSB7fTtcbiAgICAjaGlzdG9yeSA9IFtdO1xuICAgICNzaG91bGRJbmNsdWRlQXVkaW9EYXRhO1xuICAgICNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKGluaXRpYWxBZ2VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbEFnZW50ID0gaW5pdGlhbEFnZW50O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBpZiAoKHR5cGVvZiBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3VuZGVmaW5lZCcgJiYgaGFzV2ViUlRDU3VwcG9ydCgpKSB8fFxuICAgICAgICAgICAgb3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJydGMnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJSVEMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnNvY2tldCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gb3B0aW9ucy50cmFuc3BvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50ID0gaW5pdGlhbEFnZW50O1xuICAgICAgICB0aGlzLiNjb250ZXh0ID0gbmV3IFJ1bkNvbnRleHQoe1xuICAgICAgICAgICAgLi4uKG9wdGlvbnMuY29udGV4dCA/PyB7fSksXG4gICAgICAgICAgICBoaXN0b3J5OiB0aGlzLiNoaXN0b3J5LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlscyA9IChvcHRpb25zLm91dHB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzID0gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhvcHRpb25zLm91dHB1dEd1YXJkcmFpbFNldHRpbmdzID8/IHt9KTtcbiAgICAgICAgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSA9IG9wdGlvbnMuaGlzdG9yeVN0b3JlQXVkaW8gPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc3BvcnQgbGF5ZXIgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNwb3J0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhZ2VudCBpbiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB1c2FnZSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgdXNhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0LnVzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC4gTWlnaHQgYmUgYG51bGxgIGlmIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdFxuICAgICAqIHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydC5tdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNoaXN0b3J5O1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IHRoaXMuI2N1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHRoaXMuI2NvbnRleHQpO1xuICAgICAgICB0aGlzLiNjdXJyZW50VG9vbHMgPSBbXG4gICAgICAgICAgICAuLi5hbGxUb29scy5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyksXG4gICAgICAgICAgICAuLi5oYW5kb2ZmVG9vbHMsXG4gICAgICAgIF07XG4gICAgfVxuICAgIGFzeW5jICNnZXRTZXNzaW9uQ29uZmlnKGFkZGl0aW9uYWxDb25maWcgPSB7fSkge1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAudHJhY2luZ0Rpc2FibGVkXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6ICdhdXRvJztcbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgIT09IG51bGwgJiYgdHJhY2luZ0NvbmZpZyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLmdyb3VwX2lkID0gdGhpcy5vcHRpb25zLmdyb3VwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLm1ldGFkYXRhID0gdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQgfHwgdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbiBvcmRlciB0byBzZXQgdHJhY2VNZXRhZGF0YSBvciBhIGdyb3VwSWQgeW91IG5lZWQgdG8gc3BlY2lmeSBhIHdvcmtmbG93TmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgdm9pY2U6IHRoaXMuI2N1cnJlbnRBZ2VudC52b2ljZSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB0b29sczogdGhpcy4jY3VycmVudFRvb2xzLFxuICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIC4uLmFkZGl0aW9uYWxDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUFnZW50KG5ld0FnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgaGFuZG9mZikge1xuICAgICAgICBjb25zdCBuZXdBZ2VudCA9IChhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZih0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMpKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICAvLyB1cGRhdGUgc2Vzc2lvbiB3aXRoIG5ldyBhZ2VudFxuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBnZXRUcmFuc2Zlck1lc3NhZ2UobmV3QWdlbnQpO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgdG9vbCkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sLm5lZWRzQXBwcm92YWwodGhpcy4jY29udGV4dCwgcGFyc2VkQXJncywgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gdGhpcy5jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCByZXN1bHQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHJlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCByZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFwcHJvdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbCxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgdGhpcy4jY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbC5pbnZva2UodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQpO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCB0cnVlKTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvbkNhbGwodG9vbENhbGwpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZk1hcCA9IG5ldyBNYXAodGhpcy4jY3VycmVudEFnZW50LmhhbmRvZmZzXG4gICAgICAgICAgICAubWFwKGdldEhhbmRvZmYpXG4gICAgICAgICAgICAubWFwKChoYW5kb2ZmKSA9PiBbaGFuZG9mZi50b29sTmFtZSwgaGFuZG9mZl0pKTtcbiAgICAgICAgY29uc3QgYWxsVG9vbHMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbE1hcCA9IG5ldyBNYXAoYWxsVG9vbHMubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgICAgICBjb25zdCBwb3NzaWJsZUhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgaWYgKHBvc3NpYmxlSGFuZG9mZikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgcG9zc2libGVIYW5kb2ZmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uVG9vbE1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgICAgICBpZiAoZnVuY3Rpb25Ub29sICYmIGZ1bmN0aW9uVG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgZnVuY3Rpb25Ub29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sQ2FsbC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhvdXRwdXQsIHJlc3BvbnNlSWQsIGl0ZW1JZCkge1xuICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuI2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgIGFnZW50T3V0cHV0OiBvdXRwdXQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLiNjb250ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5tYXAoKGd1YXJkcmFpbCkgPT4gZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKSkpO1xuICAgICAgICBjb25zdCBmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkID0gcmVzdWx0cy5maW5kKChyZXN1bHQpID0+IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICBpZiAoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgaWYgb25lIGd1YXJkcmFpbCBhbHJlYWR5IHRyaXBzIGFuZCB3ZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhbm90aGVyXG4gICAgICAgICAgICAvLyBndWFyZHJhaWwgcnVuLCB3ZSBkb24ndCB0cmlwIGFnYWluXG4gICAgICAgICAgICBpZiAodGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWxbcmVzcG9uc2VJZF0gPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYE91dHB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQub3V0cHV0Lm91dHB1dEluZm8pfWAsIGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdndWFyZHJhaWxfdHJpcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgZXJyb3IsIHtcbiAgICAgICAgICAgICAgICBpdGVtSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCk7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja1RleHQgPSBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoZmVlZGJhY2tUZXh0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignKicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfZXZlbnQnLCBldmVudCk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgY29tcGxldGVkIHVzZXIgdHJhbnNjcmlwdGlvbiBldmVudHNcbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkRXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBjb21wbGV0ZWRFdmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW8nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX2RvbmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBldmVudC5yZXNwb25zZS5vdXRwdXRbZXZlbnQucmVzcG9uc2Uub3V0cHV0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGV4dE91dHB1dCA9IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSA/PyAnJztcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0/LmlkID8/ICcnO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRleHRPdXRwdXQpO1xuICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyh0ZXh0T3V0cHV0LCBldmVudC5yZXNwb25zZS5pZCwgaXRlbUlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fZG9uZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fc3RvcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgbGV0IGxhc3RJdGVtSWQ7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50Lml0ZW1JZDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUlkID0gZXZlbnQucmVzcG9uc2VJZDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEl0ZW1JZCAhPT0gaXRlbUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RJdGVtSWQgPSBpdGVtSWQ7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IGN1cnJlbnRUZXh0ICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgdGhpcy4jdHJhbnNjcmliZWRUZXh0RGVsdGFzW2l0ZW1JZF0gPSBuZXdUZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UnVuSW5kZXggPSBNYXRoLmZsb29yKG5ld1RleHQubGVuZ3RoIC8gdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3UnVuSW5kZXggPiBsYXN0UnVuSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gbmV3UnVuSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGNhbmNlbCBleGlzdGluZyBydW5zIGJlY2F1c2Ugd2Ugd2FudCB0aGUgZmlyc3Qgb25lIHRvIGZhaWwgdG8gZmFpbFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNwb3J0IGxheWVyIHNob3VsZCB1cG9uIGZhaWx1cmUgaGFuZGxlIHRoZSBpbnRlcnJ1cHRpb24gYW5kIHN0b3AgdGhlIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZ2VuZXJhdGluZyBmdXJ0aGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMobmV3VGV4dCwgcmVzcG9uc2VJZCwgaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV91cGRhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSAhdGhpcy4jaGlzdG9yeS5zb21lKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSXRlbSA9IHRoaXMuI2hpc3RvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV9hZGRlZCcsIGFkZGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX2RlbGV0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHRoaXMuI2hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLml0ZW1JZCAhPT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdmdW5jdGlvbl9jYWxsJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uQ2FsbChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGZ1bmN0aW9uIGNhbGwnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3VzYWdlX3VwZGF0ZScsICh1c2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29udGV4dC51c2FnZS5hZGQodXNhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19pbnRlcnJ1cHRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICBpbml0aWFsU2Vzc2lvbkNvbmZpZzogYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZyh0aGlzLm9wdGlvbnMuY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2hpc3RvcnkgPSBbXTtcbiAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IHRvIHNldC5cbiAgICAgKi9cbiAgICB1cGRhdGVIaXN0b3J5KG5ld0hpc3RvcnkpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRIaXN0b3J5O1xuICAgICAgICBpZiAodHlwZW9mIG5ld0hpc3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeSh0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN0cmFuc3BvcnQucmVzZXRIaXN0b3J5KHRoaXMuI2hpc3RvcnksIHVwZGF0ZWRIaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvdGhlckV2ZW50RGF0YSAtIEFkZGl0aW9uYWwgZXZlbnQgZGF0YSB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQubXV0ZShtdXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhdWRpbyB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb21taXQgLSBXaGV0aGVyIHRvIGZpbmlzaCB0aGUgdHVybiB3aXRoIHRoaXMgYXVkaW8uXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgc2Vzc2lvbiBhcnRpZmljaWFsbHkgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gYnVpbGQgYSBcInN0b3AgdGFsa2luZ1wiXG4gICAgICogYnV0dG9uLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmludGVycnVwdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c0FwcHJvdmUgLSBXaGV0aGVyIHRvIGFsd2F5cyBhcHByb3ZlIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7YXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzUmVqZWN0IC0gV2hldGhlciB0byBhbHdheXMgcmVqZWN0IHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNpbXVsYXRlIGEgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudCB0byBsZXQgdGhlIGFnZW50IGtub3dcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke2FwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVTZXNzaW9uLm1qcy5tYXAiLCJpbXBvcnQgKiBhcyB1dGlsSW1wb3J0IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVBZ2VudCB9IGZyb20gXCIuL3JlYWx0aW1lQWdlbnQubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBiYXNlNjRUb0FycmF5QnVmZmVyOiB1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIsXG4gICAgYXJyYXlCdWZmZXJUb0Jhc2U2NDogdXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0LFxuICAgIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZTogdXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsXG59O1xuZXhwb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgdG9vbCwgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6WyJNRVRBREFUQSIsImJhc2U2NFRvQXJyYXlCdWZmZXIiLCJiYXNlNjQiLCJiaW5hcnlTdHJpbmciLCJsZW4iLCJieXRlcyIsImkiLCJhcnJheUJ1ZmZlclRvQmFzZTY0IiwiYXJyYXlCdWZmZXIiLCJnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiLCJpdGVtIiwibGFzdENvbnRlbnRJdGVtIiwiZGlmZlJlYWx0aW1lSGlzdG9yeSIsIm9sZEhpc3RvcnkiLCJuZXdIaXN0b3J5IiwicmVtb3ZhbHMiLCJuZXdJdGVtIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsImVudHJ5IiwidXBkYXRlUmVhbHRpbWVIaXN0b3J5IiwiaGlzdG9yeSIsImV2ZW50Iiwic2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsInVwZGF0ZWRDb250ZW50IiwibmV3RXZlbnQiLCJleGlzdGluZ0luZGV4IiwiaWR4IiwicHJldkluZGV4IiwiSEVBREVSUyIsIldFQlNPQ0tFVF9NRVRBIiwic2FmZUV4ZWN1dGUiLCJmbiIsImVycm9yIiwibWFrZVBhcnNlYWJsZVRleHRGb3JtYXQiLCJyZXNwb25zZV9mb3JtYXQiLCJwYXJzZXIiLCJvYmoiLCJpZ25vcmVPdmVycmlkZSIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJvcHRpb25zIiwiem9kRGVmIiwiem9kU2NoZW1hIiwiaXNFbXB0eU9iaiIsIl9rIiwiZ2V0UmVmcyIsIl9vcHRpb25zIiwiY3VycmVudFBhdGgiLCJuYW1lIiwiZGVmIiwiYWRkRXJyb3JNZXNzYWdlIiwicmVzIiwia2V5IiwiZXJyb3JNZXNzYWdlIiwicmVmcyIsInNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMiLCJ2YWx1ZSIsInV0aWwiLCJfIiwiYXNzZXJ0SXMiLCJfYXJnIiwiYXNzZXJ0TmV2ZXIiLCJfeCIsIml0ZW1zIiwidmFsaWRLZXlzIiwiayIsImZpbHRlcmVkIiwiZSIsIm9iamVjdCIsImtleXMiLCJhcnIiLCJjaGVja2VyIiwidmFsIiwiam9pblZhbHVlcyIsImFycmF5Iiwic2VwYXJhdG9yIiwib2JqZWN0VXRpbCIsImZpcnN0Iiwic2Vjb25kIiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJzdWIiLCJzdWJzIiwiYWN0dWFsUHJvdG8iLCJfbWFwcGVyIiwibWFwcGVyIiwiaXNzdWUiLCJmaWVsZEVycm9ycyIsInByb2Nlc3NFcnJvciIsImN1cnIiLCJlbCIsImZvcm1FcnJvcnMiLCJlcnJvclV0aWwiLCJtZXNzYWdlIiwiWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIiwicGFyc2VBbnlEZWYiLCJwYXJzZUFycmF5RGVmIiwiX2IiLCJfYSIsInBhcnNlRGVmIiwicGFyc2VCaWdpbnREZWYiLCJjaGVjayIsInBhcnNlQm9vbGVhbkRlZiIsInBhcnNlQnJhbmRlZERlZiIsIl9kZWYiLCJwYXJzZUNhdGNoRGVmIiwicGFyc2VEYXRlRGVmIiwib3ZlcnJpZGVEYXRlU3RyYXRlZ3kiLCJzdHJhdGVneSIsImludGVnZXJEYXRlUGFyc2VyIiwicGFyc2VEZWZhdWx0RGVmIiwicGFyc2VFZmZlY3RzRGVmIiwiZm9yY2VSZXNvbHV0aW9uIiwicGFyc2VFbnVtRGVmIiwiaXNKc29uU2NoZW1hN0FsbE9mVHlwZSIsInR5cGUiLCJwYXJzZUludGVyc2VjdGlvbkRlZiIsImFsbE9mIiwieCIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1lcmdlZEFsbE9mIiwic2NoZW1hIiwibmVzdGVkU2NoZW1hIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJyZXN0IiwicGFyc2VMaXRlcmFsRGVmIiwicGFyc2VkVHlwZSIsImVtb2ppUmVnZXgiLCJ6b2RQYXR0ZXJucyIsInBhcnNlU3RyaW5nRGVmIiwicHJvY2Vzc1BhdHRlcm4iLCJlc2NhcGVOb25BbHBoYU51bWVyaWMiLCJhZGRGb3JtYXQiLCJhZGRQYXR0ZXJuIiwiYyIsInJlZ2V4IiwicHJvY2Vzc1JlZ0V4cCIsInJlZ2V4T3JGdW5jdGlvbiIsImZsYWdzIiwic291cmNlIiwicGF0dGVybiIsImlzRXNjYXBlZCIsImluQ2hhckdyb3VwIiwiaW5DaGFyUmFuZ2UiLCJyZWdleFRlc3QiLCJwYXJzZVJlY29yZERlZiIsImFjYyIsIl9jIiwia2V5VHlwZSIsIl9kIiwicGFyc2VNYXBEZWYiLCJ2YWx1ZXMiLCJwYXJzZU5hdGl2ZUVudW1EZWYiLCJhY3R1YWxWYWx1ZXMiLCJwYXJzZWRUeXBlcyIsInBhcnNlTmV2ZXJEZWYiLCJwYXJzZU51bGxEZWYiLCJwcmltaXRpdmVNYXBwaW5ncyIsInBhcnNlVW5pb25EZWYiLCJhc0FueU9mIiwidHlwZXMiLCJ1bmlxdWVUeXBlcyIsImEiLCJhbnlPZiIsInBhcnNlTnVsbGFibGVEZWYiLCJiYXNlIiwicGFyc2VOdW1iZXJEZWYiLCJkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlT2JqZWN0RGVmIiwicmVzdWx0IiwicHJvcE5hbWUiLCJwcm9wRGVmIiwicHJvcGVydHlQYXRoIiwicGFyc2VkRGVmIiwicGFyc2VPcHRpb25hbERlZiIsImlubmVyU2NoZW1hIiwicGFyc2VQaXBlbGluZURlZiIsImIiLCJwYXJzZVByb21pc2VEZWYiLCJwYXJzZVNldERlZiIsInBhcnNlVHVwbGVEZWYiLCJwYXJzZVVuZGVmaW5lZERlZiIsInBhcnNlVW5rbm93bkRlZiIsInBhcnNlUmVhZG9ubHlEZWYiLCJzZWVuSXRlbSIsIm92ZXJyaWRlUmVzdWx0Iiwic2VlblNjaGVtYSIsImdldCRyZWYiLCJqc29uU2NoZW1hIiwic2VsZWN0UGFyc2VyIiwiYWRkTWV0YSIsImdldFJlbGF0aXZlUGF0aCIsImluZGV4IiwicGF0aEEiLCJwYXRoQiIsInR5cGVOYW1lIiwiem9kVG9Kc29uU2NoZW1hIiwibWFpbiIsInRpdGxlIiwiZGVmaW5pdGlvbnMiLCJwcm9jZXNzZWREZWZpbml0aW9ucyIsIm5ld0RlZmluaXRpb25zIiwiY29tYmluZWQiLCJtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sIiwidG9vbCIsImNhbGxiYWNrIiwiX3pvZFRvSnNvblNjaGVtYSIsInpvZFRleHRGb3JtYXQiLCJ6b2RPYmplY3QiLCJwcm9wcyIsImNvbnRlbnQiLCJ6b2RSZXNwb25zZXNGdW5jdGlvbiIsImFyZ3MiLCJBZ2VudHNFcnJvciIsInN0YXRlIiwiX19wdWJsaWNGaWVsZCIsIlN5c3RlbUVycm9yIiwiTWF4VHVybnNFeGNlZWRlZEVycm9yIiwiTW9kZWxCZWhhdmlvckVycm9yIiwiVXNlckVycm9yIiwiR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IiLCJUb29sQ2FsbEVycm9yIiwiSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsIk91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwiaXNab2RPYmplY3QiLCJpbnB1dCIsImlzQWdlbnRUb29sSW5wdXQiLCJ0b0Z1bmN0aW9uVG9vbE5hbWUiLCJnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIiwiaW5wdXRUeXBlIiwiZm9ybWF0dGVkRnVuY3Rpb24iLCJjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUiLCJvdXRwdXRUeXBlIiwib3V0cHV0IiwicyIsIm0iLCJoIiwiZCIsInciLCJ5IiwibXMiLCJwYXJzZSIsImZtdExvbmciLCJmbXRTaG9ydCIsInN0ciIsIm1hdGNoIiwibiIsIm1zQWJzIiwicGx1cmFsIiwiaXNQbHVyYWwiLCJzZXR1cCIsImVudiIsImNyZWF0ZURlYnVnIiwiY29lcmNlIiwiZGlzYWJsZSIsImVuYWJsZSIsImVuYWJsZWQiLCJyZXF1aXJlJCQwIiwiZGVzdHJveSIsInNlbGVjdENvbG9yIiwibmFtZXNwYWNlIiwiaGFzaCIsInByZXZUaW1lIiwiZW5hYmxlT3ZlcnJpZGUiLCJuYW1lc3BhY2VzQ2FjaGUiLCJlbmFibGVkQ2FjaGUiLCJkZWJ1ZyIsInNlbGYiLCJmb3JtYXQiLCJmb3JtYXR0ZXIiLCJleHRlbmQiLCJ2IiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJuYW1lc3BhY2VzIiwic3BsaXQiLCJucyIsIm1hdGNoZXNUZW1wbGF0ZSIsInNlYXJjaCIsInRlbXBsYXRlIiwic2VhcmNoSW5kZXgiLCJ0ZW1wbGF0ZUluZGV4Iiwic3RhckluZGV4IiwibWF0Y2hJbmRleCIsInNraXAiLCJjb21tb24iLCJleHBvcnRzIiwiZm9ybWF0QXJncyIsInNhdmUiLCJsb2FkIiwidXNlQ29sb3JzIiwibG9jYWxzdG9yYWdlIiwid2FybmVkIiwibW9kdWxlIiwibGFzdEMiLCJyIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwidG9TbWFydFN0cmluZyIsImRlZmF1bHRUb29sRXJyb3JGdW5jdGlvbiIsImNvbnRleHQiLCJ0b29sRXJyb3JGdW5jdGlvbiIsInN0cmljdE1vZGUiLCJwYXJhbWV0ZXJzIiwiX2ludm9rZSIsInJ1bkNvbnRleHQiLCJwYXJzZWQiLCJzdHJpbmdSZXN1bHQiLCJpbnZva2UiLCJjdXJyZW50U3BhbiIsImdldEN1cnJlbnRTcGFuIiwibmVlZHNBcHByb3ZhbCIsIlpvZFBhcnNlZFR5cGUiLCJnZXRQYXJzZWRUeXBlIiwiZGF0YSIsIlpvZElzc3VlQ29kZSIsImVycm9yTWFwIiwiX2N0eCIsIm92ZXJyaWRlRXJyb3JNYXAiLCJkZWZhdWx0RXJyb3JNYXAiLCJnZXRFcnJvck1hcCIsIm1ha2VJc3N1ZSIsInBhcmFtcyIsInBhdGgiLCJlcnJvck1hcHMiLCJpc3N1ZURhdGEiLCJmdWxsUGF0aCIsImZ1bGxJc3N1ZSIsIm1hcHMiLCJtYXAiLCJhZGRJc3N1ZVRvQ29udGV4dCIsImN0eCIsIm92ZXJyaWRlTWFwIiwiUGFyc2VTdGF0dXMiLCJzdGF0dXMiLCJyZXN1bHRzIiwiYXJyYXlWYWx1ZSIsIklOVkFMSUQiLCJwYWlycyIsInN5bmNQYWlycyIsInBhaXIiLCJmaW5hbE9iamVjdCIsIkRJUlRZIiwiT0siLCJpc0Fib3J0ZWQiLCJpc0RpcnR5IiwiaXNWYWxpZCIsImlzQXN5bmMiLCJQYXJzZUlucHV0TGF6eVBhdGgiLCJwYXJlbnQiLCJoYW5kbGVSZXN1bHQiLCJwcm9jZXNzQ3JlYXRlUGFyYW1zIiwiaW52YWxpZF90eXBlX2Vycm9yIiwicmVxdWlyZWRfZXJyb3IiLCJkZXNjcmlwdGlvbiIsImlzcyIsIlpvZFR5cGUiLCJlcnIiLCJtYXliZUFzeW5jUmVzdWx0IiwiZ2V0SXNzdWVQcm9wZXJ0aWVzIiwic2V0RXJyb3IiLCJyZWZpbmVtZW50RGF0YSIsInJlZmluZW1lbnQiLCJab2RFZmZlY3RzIiwiWm9kT3B0aW9uYWwiLCJab2ROdWxsYWJsZSIsIlpvZEFycmF5IiwiWm9kUHJvbWlzZSIsIm9wdGlvbiIsIlpvZFVuaW9uIiwiaW5jb21pbmciLCJab2RJbnRlcnNlY3Rpb24iLCJ0cmFuc2Zvcm0iLCJkZWZhdWx0VmFsdWVGdW5jIiwiWm9kRGVmYXVsdCIsIlpvZEJyYW5kZWQiLCJjYXRjaFZhbHVlRnVuYyIsIlpvZENhdGNoIiwiVGhpcyIsInRhcmdldCIsIlpvZFBpcGVsaW5lIiwiWm9kUmVhZG9ubHkiLCJjdWlkUmVnZXgiLCJjdWlkMlJlZ2V4IiwidWxpZFJlZ2V4IiwidXVpZFJlZ2V4IiwibmFub2lkUmVnZXgiLCJqd3RSZWdleCIsImR1cmF0aW9uUmVnZXgiLCJlbWFpbFJlZ2V4IiwiX2Vtb2ppUmVnZXgiLCJpcHY0UmVnZXgiLCJpcHY0Q2lkclJlZ2V4IiwiaXB2NlJlZ2V4IiwiaXB2NkNpZHJSZWdleCIsImJhc2U2NFJlZ2V4IiwiYmFzZTY0dXJsUmVnZXgiLCJkYXRlUmVnZXhTb3VyY2UiLCJkYXRlUmVnZXgiLCJ0aW1lUmVnZXhTb3VyY2UiLCJzZWNvbmRzUmVnZXhTb3VyY2UiLCJzZWNvbmRzUXVhbnRpZmllciIsInRpbWVSZWdleCIsImRhdGV0aW1lUmVnZXgiLCJvcHRzIiwiaXNWYWxpZElQIiwiaXAiLCJ2ZXJzaW9uIiwiaXNWYWxpZEpXVCIsImp3dCIsImFsZyIsImhlYWRlciIsImRlY29kZWQiLCJpc1ZhbGlkQ2lkciIsIlpvZFN0cmluZyIsInRvb0JpZyIsInRvb1NtYWxsIiwidmFsaWRhdGlvbiIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImNoIiwibWluIiwibWF4IiwiZmxvYXRTYWZlUmVtYWluZGVyIiwic3RlcCIsInZhbERlY0NvdW50Iiwic3RlcERlY0NvdW50IiwiZGVjQ291bnQiLCJ2YWxJbnQiLCJzdGVwSW50IiwiWm9kTnVtYmVyIiwia2luZCIsImluY2x1c2l2ZSIsIlpvZEJpZ0ludCIsIlpvZEJvb2xlYW4iLCJab2REYXRlIiwibWluRGF0ZSIsIm1heERhdGUiLCJab2RTeW1ib2wiLCJab2RVbmRlZmluZWQiLCJab2ROdWxsIiwiWm9kQW55IiwiWm9kVW5rbm93biIsIlpvZE5ldmVyIiwiWm9kVm9pZCIsImRlZXBQYXJ0aWFsaWZ5IiwiWm9kT2JqZWN0IiwibmV3U2hhcGUiLCJmaWVsZFNjaGVtYSIsIlpvZFR1cGxlIiwic2hhcGUiLCJzaGFwZUtleXMiLCJleHRyYUtleXMiLCJrZXlWYWxpZGF0b3IiLCJ1bmtub3duS2V5cyIsImNhdGNoYWxsIiwiZGVmYXVsdEVycm9yIiwiYXVnbWVudGF0aW9uIiwibWVyZ2luZyIsIm1hc2siLCJuZXdGaWVsZCIsImNyZWF0ZVpvZEVudW0iLCJoYW5kbGVSZXN1bHRzIiwidW5pb25FcnJvcnMiLCJjaGlsZEN0eCIsImRpcnR5IiwiZ2V0RGlzY3JpbWluYXRvciIsIlpvZExhenkiLCJab2RMaXRlcmFsIiwiWm9kRW51bSIsIlpvZE5hdGl2ZUVudW0iLCJab2REaXNjcmltaW5hdGVkVW5pb24iLCJkaXNjcmltaW5hdG9yIiwiZGlzY3JpbWluYXRvclZhbHVlIiwib3B0aW9uc01hcCIsImRpc2NyaW1pbmF0b3JWYWx1ZXMiLCJtZXJnZVZhbHVlcyIsImFUeXBlIiwiYlR5cGUiLCJiS2V5cyIsInNoYXJlZEtleXMiLCJuZXdPYmoiLCJzaGFyZWRWYWx1ZSIsIm5ld0FycmF5IiwiaXRlbUEiLCJpdGVtQiIsImhhbmRsZVBhcnNlZCIsInBhcnNlZExlZnQiLCJwYXJzZWRSaWdodCIsIm1lcmdlZCIsImxlZnQiLCJyaWdodCIsIml0ZW1JbmRleCIsInNjaGVtYXMiLCJab2RSZWNvcmQiLCJ2YWx1ZVR5cGUiLCJ0aGlyZCIsIlpvZE1hcCIsImZpbmFsTWFwIiwiWm9kU2V0IiwiZmluYWxpemVTZXQiLCJlbGVtZW50cyIsInBhcnNlZFNldCIsImVsZW1lbnQiLCJtaW5TaXplIiwibWF4U2l6ZSIsInNpemUiLCJnZXR0ZXIiLCJleHBlY3RlZFZhbHVlcyIsImVudW1WYWx1ZXMiLCJuZXdEZWYiLCJvcHQiLCJuYXRpdmVFbnVtVmFsdWVzIiwicHJvbWlzaWZpZWQiLCJlZmZlY3QiLCJjaGVja0N0eCIsImFyZyIsInByb2Nlc3NlZCIsImV4ZWN1dGVSZWZpbmVtZW50IiwiaW5uZXIiLCJwcmVwcm9jZXNzIiwibmV3Q3R4IiwiWm9kTmFOIiwiaW5SZXN1bHQiLCJmcmVlemUiLCJzdHJpbmdUeXBlIiwibnVtYmVyVHlwZSIsImJvb2xlYW5UeXBlIiwiYW55VHlwZSIsImFycmF5VHlwZSIsIm9iamVjdFR5cGUiLCJ1bmlvblR5cGUiLCJkaXNjcmltaW5hdGVkVW5pb25UeXBlIiwicmVjb3JkVHlwZSIsImxhenlUeXBlIiwibGl0ZXJhbFR5cGUiLCJlbnVtVHlwZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsImdldEFsbE1jcEZ1bmN0aW9uVG9vbHMiLCJtY3BTZXJ2ZXJzIiwiYWdlbnQiLCJjb252ZXJ0U2NoZW1hc1RvU3RyaWN0IiwiYWxsVG9vbHMiLCJ0b29sTmFtZXMiLCJzZXJ2ZXIiLCJzZXJ2ZXJUb29scyIsImdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyIiwiaW50ZXJzZWN0aW9uIiwidCIsIl9jYWNoZWRUb29scyIsIm1jcFRvRnVuY3Rpb25Ub29sIiwid2l0aE1DUExpc3RUb29sc1NwYW4iLCJzcGFuIiwiZmV0Y2hlZE1jcFRvb2xzIiwibWNwVG9vbHMiLCJmaWx0ZXIiLCJnbG9iYWxMb2dnZXIiLCJhbGxvd2VkVG9vbE5hbWVzIiwiYmxvY2tlZFRvb2xOYW1lcyIsImFsbG93ZWQiLCJibG9ja2VkIiwidG9vbHMiLCJnZXRBbGxNY3BUb29scyIsIm1jcFRvb2wiLCJfY29udGV4dCIsInN0cmljdFNjaGVtYSIsImVuc3VyZVN0cmljdEpzb25TY2hlbWEiLCJub25TdHJpY3RTY2hlbWEiLCJvdXQiLCJCcm93c2VyRXZlbnRFbWl0dGVyIiwiX19wcml2YXRlQWRkIiwiX3RhcmdldCIsImxpc3RlbmVyIiwiX19wcml2YXRlR2V0IiwiaGFuZGxlciIsInJhbmRvbVVVSUQiLCJSZWFkYWJsZSIsIl9kZXN0aW5hdGlvbiIsIl90cmFuc2Zvcm0iLCJSZWFkYWJsZVN0cmVhbSIsIlRyYW5zZm9ybVN0cmVhbSIsIkFzeW5jTG9jYWxTdG9yYWdlIiwiQnJvd3NlclRpbWVyIiwidGltZW91dCIsInRpbWVvdXRJZCIsInRpbWVyIiwiX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldEN1cnJlbnRUcmFjZSIsImN1cnJlbnRUcmFjZSIsIl93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUiLCJ0cmFjZSIsIndpdGhUcmFjZSIsIm5ld1RyYWNlIiwiZ2V0R2xvYmFsVHJhY2VQcm92aWRlciIsImdldE9yQ3JlYXRlVHJhY2UiLCJzZXRDdXJyZW50U3BhbiIsInJlc2V0Q3VycmVudFNwYW4iLCJhZGRFcnJvclRvQ3VycmVudFNwYW4iLCJzcGFuRXJyb3IiLCJjbG9uZUN1cnJlbnRDb250ZXh0Iiwid2l0aE5ld1NwYW5Db250ZXh0IiwiY3VycmVudENvbnRleHQiLCJjb3B5T2ZDb250ZXh0IiwiQ29uc29sZVNwYW5FeHBvcnRlciIsIkJhdGNoVHJhY2VQcm9jZXNzb3IiLCJleHBvcnRlciIsIm1heFF1ZXVlU2l6ZSIsIm1heEJhdGNoU2l6ZSIsInNjaGVkdWxlRGVsYXkiLCJleHBvcnRUcmlnZ2VyUmF0aW8iLCJfQmF0Y2hUcmFjZVByb2Nlc3Nvcl9pbnN0YW5jZXMiLCJfbWF4UXVldWVTaXplIiwiX21heEJhdGNoU2l6ZSIsIl9zY2hlZHVsZURlbGF5IiwiX2V4cG9ydFRyaWdnZXJTaXplIiwiX2V4cG9ydGVyIiwiX2J1ZmZlciIsIl90aW1lciIsIl90aW1lb3V0IiwiX2V4cG9ydEluUHJvZ3Jlc3MiLCJfdGltZW91dEFib3J0Q29udHJvbGxlciIsIl9fcHJpdmF0ZVNldCIsIl9fcHJpdmF0ZU1ldGhvZCIsInJ1bkV4cG9ydExvb3BfZm4iLCJzYWZlQWRkSXRlbV9mbiIsIl90cmFjZSIsIl9zcGFuIiwiZXhwb3J0QmF0Y2hlc19mbiIsInJlc29sdmUiLCJmb3JjZSIsInRvRXhwb3J0IiwiYmF0Y2giLCJNdWx0aVRyYWNpbmdQcm9jZXNzb3IiLCJfcHJvY2Vzc29ycyIsInByb2Nlc3NvciIsInByb2Nlc3NvcnMiLCJfZGVmYXVsdEV4cG9ydGVyIiwiX2RlZmF1bHRQcm9jZXNzb3IiLCJkZWZhdWx0RXhwb3J0ZXIiLCJkZWZhdWx0UHJvY2Vzc29yIiwidGltZUlzbyIsImdlbmVyYXRlVHJhY2VJZCIsImdlbmVyYXRlU3BhbklkIiwicmVtb3ZlUHJpdmF0ZUZpZWxkcyIsIl9TcGFuIiwiX2RhdGEiLCJfdHJhY2VJZCIsIl9zcGFuSWQiLCJfcGFyZW50SWQiLCJfcHJvY2Vzc29yIiwiX3N0YXJ0ZWRBdCIsIl9lbmRlZEF0IiwiX2Vycm9yIiwiX3ByZXZpb3VzU3BhbiIsIlNwYW4iLCJOb29wU3BhbiIsIl9UcmFjZSIsIl9zdGFydGVkIiwiVHJhY2UiLCJOb29wVHJhY2UiLCJUcmFjZVByb3ZpZGVyIiwiX1RyYWNlUHJvdmlkZXJfaW5zdGFuY2VzIiwiX211bHRpUHJvY2Vzc29yIiwiX2Rpc2FibGVkIiwiYWRkQ2xlYW51cExpc3RlbmVyc19mbiIsImRpc2FibGVkIiwidHJhY2VPcHRpb25zIiwidHJhY2VJZCIsInNwYW5PcHRpb25zIiwicGFyZW50SWQiLCJjbGVhbnVwIiwiaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzIiwicmVhc29uIiwicHJvbWlzZSIsImhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzIiwiR0xPQkFMX1RSQUNFX1BST1ZJREVSIiwiX3dpdGhTcGFuRmFjdG9yeSIsImNyZWF0ZVNwYW4iLCJjcmVhdGVBZ2VudFNwYW4iLCJjcmVhdGVGdW5jdGlvblNwYW4iLCJ3aXRoRnVuY3Rpb25TcGFuIiwiY3JlYXRlSGFuZG9mZlNwYW4iLCJ3aXRoSGFuZG9mZlNwYW4iLCJjcmVhdGVHdWFyZHJhaWxTcGFuIiwid2l0aEd1YXJkcmFpbFNwYW4iLCJjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuIiwiYWRkVHJhY2VQcm9jZXNzb3IiLCJFdmVudEVtaXR0ZXJEZWxlZ2F0ZSIsIkFnZW50SG9va3MiLCJSdW50aW1lRXZlbnRFbWl0dGVyIiwiUnVuSG9va3MiLCJkZWZpbmVJbnB1dEd1YXJkcmFpbCIsImV4ZWN1dGUiLCJkZWZpbmVPdXRwdXRHdWFyZHJhaWwiLCJnZXRUcmFuc2Zlck1lc3NhZ2UiLCJkZWZhdWx0SGFuZG9mZlRvb2xOYW1lIiwiZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24iLCJIYW5kb2ZmIiwib25JbnZva2VIYW5kb2ZmIiwiaGFuZG9mZiIsImNvbmZpZyIsImhhc09uSGFuZG9mZiIsImhhc0lucHV0VHlwZSIsImlucHV0SnNvblN0cmluZyIsImdldEhhbmRvZmYiLCJnZXREZWZhdWx0TW9kZWxQcm92aWRlciIsIlNoYXJlZEJhc2UiLCJJdGVtQmFzZSIsIlJlZnVzYWwiLCJPdXRwdXRUZXh0IiwiSW5wdXRUZXh0IiwiSW5wdXRJbWFnZSIsInpcbiAgICAgICAgLnN0cmluZyIsIklucHV0RmlsZSIsIkF1ZGlvQ29udGVudCIsIkltYWdlQ29udGVudCIsIlRvb2xPdXRwdXRUZXh0IiwiVG9vbE91dHB1dEltYWdlIiwiQ29tcHV0ZXJUb29sT3V0cHV0IiwiY29tcHV0ZXJBY3Rpb25zIiwiei5kaXNjcmltaW5hdGVkVW5pb24iLCJ6Lm51bWJlciIsInouZW51bSIsIkFzc2lzdGFudENvbnRlbnQiLCJNZXNzYWdlQmFzZSIsIkFzc2lzdGFudE1lc3NhZ2VJdGVtIiwiVXNlckNvbnRlbnQiLCJVc2VyTWVzc2FnZUl0ZW0iLCJTeXN0ZW1NZXNzYWdlSXRlbSIsIkhvc3RlZFRvb2xDYWxsSXRlbSIsIkZ1bmN0aW9uQ2FsbEl0ZW0iLCJGdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwiQ29tcHV0ZXJVc2VDYWxsSXRlbSIsIkNvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0iLCJUb29sQ2FsbEl0ZW0iLCJSZWFzb25pbmdJdGVtIiwiVW5rbm93bkl0ZW0iLCJPdXRwdXRNb2RlbEl0ZW0iLCJNb2RlbEl0ZW0iLCJ6LnVuaW9uIiwiVXNhZ2VEYXRhIiwiU3RyZWFtRXZlbnRUZXh0U3RyZWFtIiwiU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQiLCJTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIiwiU3RyZWFtRXZlbnRHZW5lcmljSXRlbSIsIlVzYWdlIiwibmV3VXNhZ2UiLCJSdW5Db250ZXh0IiwiX2FwcHJvdmFscyIsImFwcHJvdmFscyIsInRvb2xOYW1lIiwiY2FsbElkIiwiYXBwcm92YWxFbnRyeSIsImluZGl2aWR1YWxDYWxsQXBwcm92YWwiLCJpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiIsImFwcHJvdmFsSXRlbSIsImFsd2F5c0FwcHJvdmUiLCJhbHdheXNSZWplY3QiLCJSdW5SZXN1bHRCYXNlIiwiZ2V0VHVybklucHV0IiwicmVzcG9uc2VzIiwiUnVuUmVzdWx0IiwiU3RyZWFtZWRSdW5SZXN1bHQiLCJfc2lnbmFsIiwiX3JlYWRhYmxlQ29udHJvbGxlciIsIl9yZWFkYWJsZVN0cmVhbSIsIl9jb21wbGV0ZWRQcm9taXNlIiwiX2NvbXBsZXRlZFByb21pc2VSZXNvbHZlIiwiX2NvbXBsZXRlZFByb21pc2VSZWplY3QiLCJfY2FuY2VsbGVkIiwiX1JlYWRhYmxlU3RyZWFtIiwiY29udHJvbGxlciIsInJlamVjdCIsInN0cmVhbSIsInNlcmlhbGl6ZVRvb2wiLCJzZXJpYWxpemVIYW5kb2ZmIiwiUnVuSXRlbUJhc2UiLCJSdW5NZXNzYWdlT3V0cHV0SXRlbSIsInJhd0l0ZW0iLCJwYXJ0IiwiUnVuVG9vbENhbGxJdGVtIiwiUnVuVG9vbENhbGxPdXRwdXRJdGVtIiwiUnVuUmVhc29uaW5nSXRlbSIsIlJ1bkhhbmRvZmZDYWxsSXRlbSIsIlJ1bkhhbmRvZmZPdXRwdXRJdGVtIiwic291cmNlQWdlbnQiLCJ0YXJnZXRBZ2VudCIsIlJ1blRvb2xBcHByb3ZhbEl0ZW0iLCJSdW5JbmplY3RlZE1lc3NhZ2VJdGVtIiwiZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZSIsIm91dHB1dE1lc3NhZ2UiLCJsYXN0SXRlbSIsImdldE91dHB1dFRleHQiLCJSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IiwiUnVuSXRlbVN0cmVhbUV2ZW50IiwiUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQiLCJwcm9jZXNzTW9kZWxSZXNwb25zZSIsIm1vZGVsUmVzcG9uc2UiLCJoYW5kb2ZmcyIsInJ1bkhhbmRvZmZzIiwicnVuRnVuY3Rpb25zIiwicnVuQ29tcHV0ZXJBY3Rpb25zIiwicnVuTUNQQXBwcm92YWxSZXF1ZXN0cyIsInRvb2xzVXNlZCIsImhhbmRvZmZNYXAiLCJmdW5jdGlvbk1hcCIsImNvbXB1dGVyVG9vbCIsIm1jcFRvb2xNYXAiLCJwcm92aWRlckRhdGEiLCJtY3BTZXJ2ZXJMYWJlbCIsIm1jcFNlcnZlclRvb2wiLCJmdW5jdGlvblRvb2wiLCJuZXh0U3RlcFNjaGVtYSIsIlNpbmdsZVN0ZXBSZXN1bHQiLCJvcmlnaW5hbElucHV0IiwicHJlU3RlcEl0ZW1zIiwibmV3U3RlcEl0ZW1zIiwibmV4dFN0ZXAiLCJtYXliZVJlc2V0VG9vbENob2ljZSIsInRvb2xVc2VUcmFja2VyIiwibW9kZWxTZXR0aW5ncyIsImV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMiLCJvcmlnaW5hbFByZVN0ZXBJdGVtcyIsIm5ld1Jlc3BvbnNlIiwicHJvY2Vzc2VkUmVzcG9uc2UiLCJydW5uZXIiLCJmdW5jdGlvbkNhbGxJZHMiLCJmdW5jdGlvblRvb2xSdW5zIiwicnVuIiwiZnVuY3Rpb25SZXN1bHRzIiwiZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzIiwibmV3SXRlbXMiLCJtY3BBcHByb3ZhbFJ1bnMiLCJhcHByb3ZhbFJlcXVlc3RJZCIsImFwcHJvdmVkIiwiY2hlY2tUb29sT3V0cHV0IiwiY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyIsImV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzIiwiY29tcHV0ZXJSZXN1bHRzIiwiZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyIsImZ1bmN0aW9uUmVzdWx0IiwiaW5qZWN0ZWRNZXNzYWdlSXRlbSIsImFwcHJvdmFsUmVxdWVzdCIsInRvb2xEYXRhIiwicmVxdWVzdERhdGEiLCJhcHByb3ZhbFJlc3VsdCIsImFwcHJvdmFsUmVzcG9uc2VEYXRhIiwiZXhlY3V0ZUhhbmRvZmZDYWxscyIsIm1lc3NhZ2VJdGVtcyIsInBvdGVudGlhbEZpbmFsT3V0cHV0IiwiZ2V0VG9vbENhbGxPdXRwdXRJdGVtIiwidG9vbENhbGwiLCJ0b29sUnVucyIsInJ1blNpbmdsZVRvb2wiLCJ0b29sUnVuIiwicGFyc2VkQXJncyIsImFwcHJvdmFsIiwicmVzcG9uc2UiLCJfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90IiwiY29tcHV0ZXIiLCJhY3Rpb24iLCJzY3JlZW5zaG90IiwicCIsImFjdGlvbnMiLCJjdXN0b21Mb2dnZXIiLCJfbG9nZ2VyIiwiaW1hZ2VVcmwiLCJhY3R1YWxIYW5kb2ZmIiwiaGFuZG9mZlNwYW4iLCJuZXdBZ2VudCIsInJlcXVlc3RlZEFnZW50cyIsImlucHV0RmlsdGVyIiwiaGFuZG9mZklucHV0RGF0YSIsIk5PVF9GSU5BTF9PVVRQVVQiLCJ0b29sUmVzdWx0cyIsImludGVycnVwdGlvbnMiLCJmaXJzdFRvb2xSZXN1bHQiLCJ0b29sVXNlQmVoYXZpb3IiLCJzdG9wcGluZ1Rvb2wiLCJhZGRTdGVwVG9SdW5SZXN1bHQiLCJpdGVtTmFtZSIsIkFnZW50VG9vbFVzZVRyYWNrZXIiLCJfYWdlbnRUb1Rvb2xzIiwiQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiIsIiRzY2hlbWFWZXJzaW9uIiwic2VyaWFsaXplZEFnZW50U2NoZW1hIiwic2VyaWFsaXplZFNwYW5CYXNlIiwielxuICAgICAgICAub2JqZWN0IiwiU2VyaWFsaXplZFNwYW4iLCJ6LmxhenkiLCJ1c2FnZVNjaGVtYSIsIm1vZGVsUmVzcG9uc2VTY2hlbWEiLCJwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0iLCJpdGVtU2NoZW1hIiwicHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJwcm90b2NvbC5Ub29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwicHJvdG9jb2wuUmVhc29uaW5nSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0iLCJzZXJpYWxpemVkVHJhY2VTY2hlbWEiLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEiLCJ6XG4gICAgICAgIC5hcnJheSIsImd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwiaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJTZXJpYWxpemVkUnVuU3RhdGUiLCJwcm90b2NvbC5Nb2RlbEl0ZW0iLCJSdW5TdGF0ZSIsInN0YXJ0aW5nQWdlbnQiLCJtYXhUdXJucyIsImluaXRpYWxBZ2VudCIsInBhcnNpbmdFcnJvciIsImpzb25SZXN1bHQiLCJjdXJyZW50U2NoZW1hVmVyc2lvbiIsInN0YXRlSnNvbiIsImFnZW50TWFwIiwiYnVpbGRBZ2VudE1hcCIsImN1cnJlbnRBZ2VudCIsImFnZW50TmFtZSIsImRlc2VyaWFsaXplU3BhbiIsImRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSIsImRlc2VyaWFsaXplSXRlbSIsImRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UiLCJfZSIsInF1ZXVlIiwiQWdlbnQiLCJzZXJpYWxpemVkU3BhbiIsInNwYW5EYXRhIiwicHJldmlvdXNTcGFuIiwic2VyaWFsaXplZE1vZGVsUmVzcG9uc2UiLCJ1c2FnZSIsInNlcmlhbGl6ZWRJdGVtIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlIiwiY29tcHV0ZXJUb29scyIsImZ1bmN0aW9uQ2FsbCIsImNvbXB1dGVyQWN0aW9uIiwiREVGQVVMVF9NQVhfVFVSTlMiLCJnZXRUcmFjaW5nIiwidHJhY2luZ0Rpc2FibGVkIiwidHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSIsImdlbmVyYXRlZEl0ZW1zIiwicmF3SXRlbXMiLCJSdW5uZXIiLCJfUnVubmVyX2luc3RhbmNlcyIsInJ1bkluZGl2aWR1YWxTdHJlYW1fZm4iLCJydW5JbmRpdmlkdWFsTm9uU3RyZWFtX2ZuIiwibW9kZWwiLCJzZWxlY3RNb2RlbCIsInR1cm5SZXN1bHQiLCJoYW5kb2ZmTmFtZXMiLCJzZXJpYWxpemVkVG9vbHMiLCJzZXJpYWxpemVkSGFuZG9mZnMiLCJydW5JbnB1dEd1YXJkcmFpbHNfZm4iLCJ0dXJuSW5wdXQiLCJydW5PdXRwdXRHdWFyZHJhaWxzX2ZuIiwiZ3VhcmRyYWlscyIsImd1YXJkcmFpbEFyZ3MiLCJndWFyZHJhaWwiLCJhZ2VudE91dHB1dCIsInJ1blN0cmVhbUxvb3BfZm4iLCJmaW5hbFJlc3BvbnNlIiwiYWdlbnRNb2RlbCIsInJ1bkNvbmZpZ01vZGVsIiwiX0FnZW50Iiwib3V0cHV0VHlwZXMiLCJ0b29sRGVzY3JpcHRpb24iLCJjdXN0b21PdXRwdXRFeHRyYWN0b3IiLCJSZWFsdGltZUFnZW50IiwiZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyIsInNldHRpbmdzIiwiZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwiLCJwb2xpY3lIaW50SW5wdXQiLCJiYXNlR3VhcmRyYWlsIiwicG9saWN5SGludCIsImdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlIiwicmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSIsInJlYWx0aW1lVG9vbENhbGxJdGVtIiwicmVhbHRpbWVSZXNwb25zZSIsInpcbiAgICAgICAgLmVudW0iLCJ6XG4gICAgICAgICAgICAucmVjb3JkIiwiY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtU2NoZW1hIiwiY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEiLCJlcnJvckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSIsInpcbiAgICAub2JqZWN0Iiwib3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsInJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hIiwic2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSIsInRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJ0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSIsImdlbmVyaWNFdmVudFNjaGVtYSIsInJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEiLCJwYXJzZVJlYWx0aW1lRXZlbnQiLCJyYXciLCJnZW5lcmljUGFyc2VkIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwiLCJERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyIsIl9PcGVuQUlSZWFsdGltZUJhc2UiLCJfbW9kZWwiLCJfYXBpS2V5IiwiX3RyYWNpbmdDb25maWciLCJfcmF3U2Vzc2lvbkNvbmZpZyIsImFwaUtleSIsImlzR2VuZXJpYyIsImlucHV0VG9rZW5zIiwib3V0cHV0VG9rZW5zIiwidG90YWxUb2tlbnMiLCJfZiIsInByZXZpb3VzSXRlbUlkIiwicmVhbHRpbWVJdGVtIiwib3RoZXJFdmVudERhdGEiLCJjcmVhdGVSZXNwb25zZSIsImNyZWF0ZV9yZXNwb25zZSIsImVhZ2VybmVzcyIsImludGVycnVwdFJlc3BvbnNlIiwiaW50ZXJydXB0X3Jlc3BvbnNlIiwicHJlZml4UGFkZGluZ01zIiwicHJlZml4X3BhZGRpbmdfbXMiLCJzaWxlbmNlRHVyYXRpb25NcyIsInNpbGVuY2VfZHVyYXRpb25fbXMiLCJ0aHJlc2hvbGQiLCJ0cmFjaW5nQ29uZmlnIiwic2Vzc2lvbkRhdGEiLCJzdGFydFJlc3BvbnNlIiwiYXVkaW8iLCJjb21taXQiLCJyZW1vdmFsSWRzIiwidXBkYXRlIiwiaXRlbUlkIiwiYWRkaXRpb25zQW5kVXBkYXRlcyIsImFkZGl0aW9uIiwiaXRlbUVudHJ5IiwiT3BlbkFJUmVhbHRpbWVCYXNlIiwiT3BlbkFJUmVhbHRpbWVXZWJSVEMiLCJfdXJsIiwiX3N0YXRlIiwiX3VzZUluc2VjdXJlQXBpS2V5IiwiX29uZ29pbmdSZXNwb25zZSIsIl9tdXRlZCIsImJhc2VVcmwiLCJpc0NsaWVudEtleSIsInVzZXJTZXNzaW9uQ29uZmlnIiwiY29ubmVjdGlvblVybCIsInBlZXJDb25uZWN0aW9uIiwiZGF0YUNoYW5uZWwiLCJhdWRpb0VsZW1lbnQiLCJvZmZlciIsInNlc3Npb25Db25maWciLCJhbnN3ZXIiLCJtdXRlZCIsInNlbmRlciIsIldlYlNvY2tldCIsIk9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IiwiX09wZW5BSVJlYWx0aW1lV2ViU29ja2V0X2luc3RhbmNlcyIsIl9jdXJyZW50SXRlbUlkIiwiX2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCIsImF1ZGlvRXZlbnQiLCJ1cmwiLCJzZXR1cFdlYlNvY2tldF9mbiIsImVsYXBzZWRUaW1lIiwiY2FuY2VsT25nb2luZ1Jlc3BvbnNlIiwid2Vic29ja2V0QXJndW1lbnRzIiwid3MiLCJidWZmIiwiYXV0b21hdGljUmVzcG9uc2VDYW5jZWxsYXRpb25FbmFibGVkIiwiUmVhbHRpbWVTZXNzaW9uIiwiX1JlYWx0aW1lU2Vzc2lvbl9pbnN0YW5jZXMiLCJfdHJhbnNwb3J0IiwiX2N1cnJlbnRBZ2VudCIsIl9jdXJyZW50VG9vbHMiLCJfb3V0cHV0R3VhcmRyYWlscyIsIl9vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyIsIl90cmFuc2NyaWJlZFRleHREZWx0YXMiLCJfaGlzdG9yeSIsIl9zaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwiX2ludGVycnVwdGVkQnlHdWFyZHJhaWwiLCJfYXVkaW9TdGFydGVkIiwic2V0Q3VycmVudEFnZW50X2ZuIiwiZ2V0U2Vzc2lvbkNvbmZpZ19mbiIsInNldEV2ZW50TGlzdGVuZXJzX2ZuIiwidXBkYXRlZEhpc3RvcnkiLCJoYW5kbGVGdW5jdGlvblRvb2xDYWxsX2ZuIiwiaGFuZG9mZlRvb2xzIiwiYWRkaXRpb25hbENvbmZpZyIsImluc3RydWN0aW9ucyIsImhhbmRsZUhhbmRvZmZfZm4iLCJoYW5kbGVGdW5jdGlvbkNhbGxfZm4iLCJmdW5jdGlvblRvb2xNYXAiLCJwb3NzaWJsZUhhbmRvZmYiLCJyZXNwb25zZUlkIiwiZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCIsImZlZWRiYWNrVGV4dCIsImNvbXBsZXRlZEV2ZW50IiwidGV4dE91dHB1dCIsImxhc3RSdW5JbmRleCIsImxhc3RJdGVtSWQiLCJkZWx0YSIsIm5ld1RleHQiLCJuZXdSdW5JbmRleCIsImlzTmV3IiwiYWRkZWRJdGVtIiwidXRpbHMiLCJ1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIiLCJ1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQiLCJ1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNPLE1BQU1BLEtBQVc7QUFBQSxFQUVwQixTQUFXO0FBTWY7QUNITyxTQUFTQyxHQUFvQkMsR0FBUTtBQUN4QyxRQUFNQyxJQUFlLEtBQUtELENBQU0sR0FDMUJFLElBQU1ELEVBQWEsUUFDbkJFLElBQVEsSUFBSSxXQUFXRCxDQUFHO0FBQ2hDLFdBQVNFLElBQUksR0FBR0EsSUFBSUYsR0FBS0U7QUFDckIsSUFBQUQsRUFBTUMsQ0FBQyxJQUFJSCxFQUFhLFdBQVdHLENBQUM7QUFFeEMsU0FBT0QsRUFBTTtBQUNqQjtBQU1PLFNBQVNFLEdBQW9CQyxHQUFhO0FBQzdDLFFBQU1MLElBQWUsT0FBTyxhQUFhLEdBQUcsSUFBSSxXQUFXSyxDQUFXLENBQUM7QUFDdkUsU0FBTyxLQUFLTCxDQUFZO0FBQzVCO0FBTU8sU0FBU00sR0FBa0NDLEdBQU07QUFZcEQsTUFYSSxPQUFPQSxJQUFTLE9BQ2hCQSxNQUFTLFFBQ1QsT0FBT0EsS0FBUyxZQUNoQixFQUFFLFVBQVVBLE1BQ1osT0FBT0EsRUFBSyxRQUFTLFlBQ3JCLENBQUNBLEVBQUssUUFHTkEsRUFBSyxTQUFTLGFBR2QsRUFBRSxhQUFhQSxNQUNmLENBQUMsTUFBTSxRQUFRQSxFQUFLLE9BQU8sS0FDM0JBLEVBQUssUUFBUSxTQUFTO0FBQ3RCO0FBRUosUUFBTUMsSUFBa0JELEVBQUssUUFBUUEsRUFBSyxRQUFRLFNBQVMsQ0FBQztBQUM1RCxNQUFJLElBQUUsVUFBVUMsTUFDWixPQUFPQSxFQUFnQixRQUFTLFdBR3BDO0FBQUEsUUFBSUEsRUFBZ0IsU0FBUztBQUN6QixhQUFPLE9BQU9BLEVBQWdCLFFBQVMsV0FDakNBLEVBQWdCLE9BQ2hC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QUFLLEtBQUssU0FBUztBQUFBLFFBQ2YsTUFBTTtBQUFBLFFBQ04sT0FBQUE7QUFBQSxNQUNwQixDQUFpQjtBQUFBLElBQ2pCO0FBQUEsRUFDQSxDQUFTLEdBQ0Q0aUIsRUFBQSxNQUFLc2hCLEdBQVcsR0FBRyxnQkFBZ0IsQ0FBQy9LLE1BQVU7QUFDMUMsSUFBQXZXLEVBQUEsTUFBS1QsR0FBUyxNQUFNLElBQUlnWCxDQUFLO0FBQUEsRUFDekMsQ0FBUyxHQUNEdlcsRUFBQSxNQUFLc2hCLEdBQVcsR0FBRyxxQkFBcUIsTUFBTTtBQUMxQyxJQUFJdGhCLEVBQUEsTUFBSytoQixPQUNMOWUsRUFBQSxNQUFLOGUsSUFBZ0IsS0FFekIsS0FBSyxLQUFLLHFCQUFxQi9oQixFQUFBLE1BQUtULElBQVVTLEVBQUEsTUFBS3VoQixFQUFhO0FBQUEsRUFDNUUsQ0FBUyxHQUNEdmhCLEVBQUEsTUFBS3NoQixHQUFXLEdBQUcsU0FBUyxDQUFDbGtDLE1BQVU7QUFDbkMsU0FBSyxLQUFLLFNBQVNBLENBQUs7QUFBQSxFQUNwQyxDQUFTO0FBQ1Q7QUNyWlksTUFBQ29tQyxLQUFRO0FBQUEsRUFDakIscUJBQXFCQztBQUFBQSxFQUNyQixxQkFBcUJDO0FBQUFBLEVBQ3JCLG1DQUFtQ0M7QUFDdkM7IiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDksNTAsNTEsNTYsNTcsNTgsNTksNjAsNjEsNjJdfQ==
